# language_name_wals:	English
# language_name_glotto:	English
# ISO_6393:	eng
# year_composed:	NA
# year_published:	NA
# mode:	written
# genre_broad:	technical
# genre_narrow:	NA
# writing_system:	Latn
# special_characters:	NA
# short_description:	KDE4
# source:	https://object.pouta.csc.fi/OPUS-KDE4/v2/raw/en.zip
# copyright_short:	http://opus.nlpl.eu/KDE4.php
# copyright_long:	http://opus.nlpl.eu/KDE4.php J. Tiedemann, 2012, Parallel Data, Tools and Interfaces in OPUS. In Proceedings of the 8th International Conference on Language Resources and Evaluation (LREC 2012)
# sample_type:	whole
# comments:	NA

The & kdm; Handbook
& Oswald. Buddenhagen; & Oswald. Buddenhagen. mail;
ROLES_OF_TRANSLATORS
& Neal. Crook;
& Oswald. Buddenhagen;
& Lauri. Watts;
This document describes & kdm; the & kde; Display Manager. & kdm; is also known as the Login Manager.
KDE
kdm
xdm
display manager
desktop manager
login manager
Introduction
& kdm; provides a graphical interface that allows you to log in to a system. It prompts for login (username) and password, authenticates the user and starts a session. & kdm; is superior to & xdm;, the X Display Manager, in a number of ways.
Quick Start Guide
This is a quick start guide for users who fit the following pattern:
X is configured and works with the command startx from the commandline.
Each user will generally only use a single window manager or desktop environment, and does not change this choice very often, or is comfortable editing a single text file in order to change their choice.
This scenario will be sufficient for many environments where a single user or several users normally boot the computer and log into their preferred environment.
Setting up a Default Session
Create or open the file ~/. xinitrc
If you already have a working ~/. xinitrc, go to the next step
If one does not already exist, add a line to the ~/. xinitrc to start your preferred window manager or desktop environment.
For & kde; you should enter:
startkde
For other window managers or desktop environments, you should look in their documentation for the correct command.
Make a link as follows:
ln -s ~/. xinitrc ~/. xsession
At this point, typing startx on the commandline should start X, with a & kde; session. The next task is to try & kdm;.
As root, type kdm at the prompt.
You should see a login window, which is described more fully in.
Typing your normal username and password in the fields provided, and leaving default selected as the session type should now open a & kde; session for your user.
If you have other users to configure, you should repeat the procedure above for each of them.
This is a quick guide to getting up and running only. You probably will want to customize & kdm; further, for example, to hide the names of the system accounts, to allow further sessions, and much more. Please read through the rest of this manual to find out how to do these things.
The Login Window
The user interface to & kdm; consists of dialog boxes. The main dialog box contains:
Widgets allowing you to authenticate. When the "classic" authentication method is chosen, these are:
A Username: field for you to enter your username.
A Password: field for you to enter your password.
(Optionally) a list containing entries with the name and graphical image of each user (for example, a digitized photograph). Clicking a list entry is equivalent to typing the associated username into the Username: field.
(Optionally) a region to the right of or above the authentication area which can be used to display either a static image or an analog clock.
A Login button that validates the username/ password combination and attempts to start a session of the selected type.
A Menu button that opens an action menu with the following items:
(Optionally) A Session Type item to choose the type of session (desktop environment, window manager) to start. See to find out how to configure different session types.
(Optionally) A Authentication Method item to switch between different authentication methods like the classical username+password, smartcard, biometry, & etc;. The actual authenticators are combinations of PAM modules and matching frontend modules (conversation plugins). See.
(Optionally on local displays) A Switch User... item to switch between local sessions running on different virtual terminals of this computer.
(Optionally on local displays) A Restart X Server item that terminates the currently running & X-Server;, starts a new one and displays the login dialog again. You can use this if the display content seems to be broken somehow.
(Optionally on remote displays) A Close Connection item that closes the connection to the & XDMCP; server you are currently connected to. If you got to this server through a host chooser, this will bring you back to the chooser, otherwise it will only reset the & X-Server; and bring up the login dialog again.
(Optionally on local displays) A Remote Login item that displays a host chooser dialog with & XDMCP; servers one can log into remotely.
(Optionally on local displays) A Console Mode item that terminates graphical login and leaves you at the console. See and.
(Optionally) A Shutdown... item that displays the Shutdown dialog box.
The Shutdown dialog box presents a set of buttons that allow one of these actions to be executed:
Turn Off Computer
Shut the system down in a controlled manner, ready for power-down.
Restart Computer
Shut the system down and reboot. For systems that use Lilo or Grub, an optional drop down box allows you to select a particular operating system to be used for the reboot.
Schedule...
If this option is enabled, you may use it to enter a more complex shutdown dialog. See for details.
Pressing the Cancel button returns to the main & kdm; dialog box.
Configuring & kdm;
This chapter assumes that & kdm; is already up and running on your system, and that you simply want to change its behavior in some way.
When & kdm; starts up, it reads its configuration from the folder $KDEDIR / share/ config/ kdm/ (this may be / etc/ kde4/ kdm/ or something else on your system).
The main configuration file is & kdmrc;; all other files are referenced from there and could be stored under any name anywhere on the system - but usually that would not make much sense for obvious reasons (one particular exception is referencing configuration files of an already installed & xdm; - however when a new & kdm; is installed, it will import settings from those files if it finds an already installed & xdm;).
Since & kdm; must run before any user is logged in, it is not associated with any particular user. Therefore, it is not possible to have user-specific configuration files; all users share the common & kdmrc;. It follows from this that the configuration of & kdm; can only be altered by those users that have write access to $KDEDIR / share/ config/ kdm/ kdmrc (normally restricted to system administrators logged in as root).
You can view the & kdmrc; file currently in use on your system, and you can configure & kdm; by editing this file. Alternatively, you can use the graphical configuration tool provided by the & kcontrolcenter; (under System Administration Login Manager).
The remainder of this chapter describes configuration of & kdm; via the & kcontrolcenter; module, and the next chapter describes the options available in & kdmrc; itself. If you only need to configure for local users, the & kcontrolcenter; module should be sufficient for your needs. If you need to configure remote logins, or have multiple & kdm; sessions running, you will need to read on.
& Thomas. Tanghus; & Thomas. Tanghus. mail;
& Steffen. Hansen; & Steffen. Hansen. mail;
& Mike. McBride; & Mike. McBride. mail;
The Login Manager & kcontrolcenter; Module
Using this module, you can configure the & kde; graphical login manager, & kdm;. You can change how the login screen looks, who has access using the login manager and who can shutdown the computer.
All settings will be written to the configuration file & kdmrc;, which in its original state has many comments to help you configure & kdm;. Using this & kcontrolcenter; module will strip these comments from the file. All available options in & kdmrc; are covered in.
The options listed in this chapter are cross referenced with their equivalents in & kdmrc;. All options available in the & kcontrol; module are also available directly in & kdmrc; but the reverse is not true.
In order to organize all of these options, this module is divided into several sections: Appearance, Font, Background, Shutdown, Users and Convenience.
You can switch between the sections using the tabs at the top of the window.
If you are not currently logged in as a superuser, you will need to click the Administrator Mode... Button. You will then be asked for a superuser password. Entering a correct password will allow you to modify the settings of this module.
Appearance
From this page you can change the visual appearance of & kdm;, & kde; 's graphical login manager.
The Greeting: is the title of the login screen. Setting this is especially useful if you have many servers users may log in to. You may use various placeholders, which are described along with the corresponding key GreetString in & kdmrc;.
You can then choose to show either the current system time, a logo or nothing special in the login box. Make your choice in the radio buttons labeled Logo area:. This corresponds to LogoArea in & kdmrc;
If you chose Show logo you can now choose a logo:
Drop an image file on the image button.
Click on the image button and select a new image from the image chooser dialog.
If you do not specify a logo, the default $KDEDIR / share/ apps/ kdm/ pics/ kdelogo. xpm will be displayed.
Normally the login box is centered on the screen. Use the Position: options if you want it to appear elsewhere on the screen. You can specify the relative position (percentage of the screen size) for the center of the login window, relative to the top left of the display, in the fields labeled X: and Y: respectively. These correspond to the key GreeterPos in & kdmrc;.
While & kde; 's style depends on the settings of the user logged in, the style used by & kdm; can be configured using the GUI Style: and Color Scheme: options. These correspond to the keys GUIStyle and ColorScheme in & kdmrc; respectively.
Below that, you have a drop down box to choose the language for your login box, corresponding to setting Language in & kdmrc;.
Font
From this section of the module you can change the fonts used in the login window. Only fonts available to all users are available here, not fonts you have installed on a per user basis.
You can select three different font styles from the drop down box (General:, Failures:, Greeting:). When you click on the Choose... button a dialog appears from which you can select the new characteristics for the font style.
The General: font is used in all other places in the login window.
The Failures: font is used when a login fails.
The Greeting: font is the font used for the title (Greeting String).
You can also check the box labeled Use anti-aliasing for fonts if you want smoothed fonts in the login dialog.
Background
Here you can change the desktop background which will be displayed before a user logs in. The options are identical to those described in the background settings, save some that are not applicable to the & kdm; context.
Shutdown
Allow Shutdown
Use this drop down box to choose who is allowed to shut down:
Nobody: No one can shutdown the computer using & kdm;. You must be logged in, and execute a command.
Everybody: Everyone can shutdown the computer using & kdm;.
Only Root: & kdm; requires that the root password be entered before shutting down the computer.
You can independently configure who is allowed to issue a shutdown command for the Local: and Remote: users.
Commands
Use these text fields to define the exact shutdown command.
The Halt: command defaults to / sbin/ halt. The Restart: command defaults to / sbin/ reboot.
When Show boot options is enabled, & kdm; will on reboot offer you options for the lilo boot manager. For this feature to work, you will need to supply the correct paths to your lilo command and to lilo's map file. Note that this option is not available on all operating systems.
Users
From here you can change the way users are represented in the login window.
You may disable the user list in & kdm; entirely in the Show Users section. You can choose from:
Show List
Only show users you have specifically enabled in the list alongside
If you do not check this box, no list will be shown. This is the most secure setting, since an attacker would then have to guess a valid login name as well as a password. It's also the preferred option if you have more than a handful of users to list, or the list itself would become unwieldy.
Inverse selection
Allows you to intead select a list of users that should not be shown, and all other users will be listed.
Independently of the users you specify by name, you can use the System UIDs to specify a range of valid UID s that are shown in the list. By default user id's under 1000, which are often system or daemon users, and user id's over 65000, are not shown.
You can also enable the Sort users checkbox, to have the user list sorted alphabetically. If this is disabled, users will appear in the order they are listed in the password file. & kdm; will also autocomplete user names if you enable the Autocompletion option.
If you choose to show users, then the login window will show images (which you select), of a list of users. When someone is ready to login, they may select their user name/ image, enter their password, and they are granted access.
If you permit a user image, then you can configure the source for those images.
You can configure the admin picture here, for each user on the system. Depending on the order selected above, users may be able to override your selection.
If you choose not to show users, then the login window will be more traditional. Users will need to type their username and password to gain entrance. This is the preferred way if you have many users on this terminal.
Convenience
In the convenience tab you can configure some options that make life easier for lazy people, like automatic login or disabling passwords.
Please think more than twice before using these options. Every option in the Convenience tab is well-suited to seriously compromise your system security. Practically, these options are only to be used in a completely non-critical environment, & eg; a private computer at home.
Automatic Login
Automatic login will give anyone access to a certain account on your system without doing any authentication. You can enable it using the option Enable Auto-login.
You can choose the account to be used for automatic login from the list labeled User:.
Automatic login can be suppressed by pressing the Shift key immediately after the & X-Server; switches to graphics mode and releasing it when & kdm; 's hourglass cursor appears.
Password-Less Login
Using this feature, you can allow certain users to login without having to provide their password. Enable this feature using the Enable Password-less logins option.
Below this option you'll see a list of users on the system. Enable password-less login for specific users by checking the checkbox next to the login names. By default, this feature is disabled for all users.
Again, this option should only be used in a safe environment. If you enable it on a rather public system you should take care that only users with heavy access restrictions are granted password-less login, & eg; guest.
You can also choose which user is preselected when & kdm; starts. The default is None, but you can choose Previous to have & kdm; default to the last successfully logged in user, or you can Specify a particular user to always be selected from the list. You can also have & kdm; set the focus to the password field, so that when you reach the & kdm; login screen, you can type the password immediately.
The Automatically login after X server crash option allows you to skip the authentication procedure when your X server accidentally crashed.
Configuring your system to use & kdm;
This chapter assumes that your system is already configured to run the & X-Window;, and that you only need to reconfigure it to allow graphical login.
Setting up & kdm;
The fundamental thing that controls whether your computer boots to a terminal prompt (console mode) or a graphical login prompt is the default runlevel. The runlevel is set by the program / sbin/ init under the control of the configuration file / etc/ inittab. The default runlevels used by different & UNIX; systems (and different & Linux; distributions) vary, but if you look at / etc/ inittab the start of it should be something like this:
# Default runlevel. The runlevels used by RHS are: # 0 - halt (Do NOT set initdefault to this) # 1 - Single user mode # 2 - Multiuser, without NFS # 3 - Full multiuser mode # 4 - unused # 5 - X11 # 6 - reboot (Do NOT set initdefault to this) id:3: initdefault:
All but the last line of this extract are comments. The comments show that runlevel 5 is used for X11 and that runlevel 3 is used for multi-user mode without X11 (console mode). The final line specifies that the default runlevel of the system is 3 (console mode). If your system currently uses graphical login (for example, using & xdm;) its default runlevel will match the runlevel specified for X11.
The runlevel with graphical login (xdm;) for some common & Linux; distributions is:
5 for & RedHat; 3. x and later, and for & Mandrake;
4 for Slackware
3 for & SuSE;. 4. x and 5. x
The first step in configuring your system is to ensure that you can start & kdm; from the command line. Once this is working, you can change your system configuration so that & kdm; starts automatically each time you reboot your system.
To test & kdm;, you must first bring your system to a runlevel that does not run & xdm;. To do so, issue a command like this:
/ sbin/ init 3
Instead of the number 3 you should specify the appropriate runlevel for console mode on your system.
If your system uses Pluggable Authentication Modules (PAM), which is normal with recent & Linux; and & Solaris; systems, you should check that your PAM configuration permits login through the service named kde. If you previously used & xdm; successfully, you should not need to make any changes to your PAM configuration in order to use & kdm;. / etc/ pam. conf or / etc/ pam. d/ kde. Information on configuring PAM is beyond the scope of this handbook, but PAM comes with comprehensive documentation (try looking in / usr/ share/ doc/ *pam*/ html/).
Now it's time for you to test & kdm; by issuing the following command:
kdm -nodaemon
If you get a & kdm; login dialog and you are able to log in, things are going well. The main thing that can go wrong here is that the run-time linker might not find the shared & Qt; or & kde; libraries. If you have a binary distribution of the & kde; libraries, make sure & kdm; is installed where the libraries believe & kde; is installed and try setting some environment variables to point to your & kde; and & Qt; libraries.
For example:
export KDEDIR= / opt/ kde export QTDIR= / usr/ lib/ qt4 export PATH= $KDEDIR/ bin: $QTDIR/ bin: $PATH export LD_LIBRARY_PATH= $KDEDIR/ lib: $QTDIR/ lib
If you are still unsuccessful, try starting & xdm; instead, to make sure that you are not suffering from a more serious X configuration problem.
When you are able to start & kdm; successfully, you can start to replace & xdm; by & kdm;. Again, this is distribution-dependent.
For & RedHat;, edit / etc/ inittab, look for this line:
x:5: respawn: / usr/ X11/ bin/ xdm -nodaemon
and replace with:
x:5: respawn: / opt/ kde/ bin/ kdm
This tells init (8) to respawn & kdm; when the system is in run level 5. Note that & kdm; does not need the -nodaemon option.
For & Mandrake;, the X11 runlevel in / etc/ inittab invokes the shell script / etc/ X11/ prefdm, which is set up to select from amongst several display managers, including & kdm;. Make sure that all the paths are correct for your installation.
For & SuSE;, edit / sbin/ init. d/ xdm to add a first line:
. / etc/ rc. config DISPLAYMANAGER=kdm export DISPLAYMANAGER
For FreeBSD, edit / etc/ ttys and find the line like this:
ttyv8 "/ usr/ X11R6/ bin/ xdm -nodaemon" xterm off secure
and edit it to this:
ttyv8 "/ opt/ kde/ bin/ kdm" xterm on secure
Most other distributions are a variation of one of these.
At this stage, you can test & kdm; again by bringing your system to the runlevel that should now run & kdm;. To do so, issue a command like this:
/ sbin/ init 5
Instead of the number 5 you should specify the appropriate runlevel for running X11 on your system.
The final step is to edit the initdefault entry in / etc/ inittab to specify the appropriate runlevel for X11.
Before you make this change, ensure that you have a way to reboot your system if a problem occurs. This might be a rescue floppy-disk provided by your operating system distribution or a specially-designed rescue floppy-disk, such as tomsrtbt. Ignore this advice at your peril.
This usually involves changing the line:
id:3: initdefault:
to
id:5: initdefault:
When you reboot your system, you should end up with the graphical & kdm; login dialog.
If this step is unsuccessful the most likely problem is that the environment used at boot time differs from the environment that you used for testing at the command line. If you are trying to get two versions of & kde; to co-exist, be particularly careful that the settings you use for your PATH and LD_LIBRARY_PATH environment variables are consistent, and that the startup scripts are not over-riding them in some way.
Supporting multiple window managers
& kdm; detects most available window manager and desktop environments when it is run. Installing a new one should make it automatically available in the & kdm; main dialog's Session Type submenu.
If you have a very new window manager, or something that & kdm; does not support, the first thing you should check is that the application to be run is in the PATH and has not been renamed during the install into something unexpected.
If the case is that the application is too new and not yet supported by & kdm;, you can quite simply add a new session.
The sessions are defined in. desktop files in $KDEDIR / share/ apps/ kdm/ sessions. You can simply add an appropriately named. desktop file in this directory. The fields are:
[Desktop Entry] Encoding=UTF-8 This is fixed to UTF-8 and may be omitted Type=XSession This is fixed to XSession and may be omitted Exec= executable name Passed to eval exec in a Bourne shell TryExec= executable name Supported but not required Name= name to show in the & kdm; session list
There are also three magic types:
default
The default session for & kdm; is normally & kde; but can be configured by the system administrator.
custom
The Custom session will run the user's ~/. xsession if it exists.
failsafe
Failsafe will run a very plain session, and is useful only for debugging purposes.
To override a session type, copy the. desktop file from the data dir to the config dir and edit it at will. Removing the shipped session types can be accomplished by shadowing them with. desktop files containing Hidden=true. For the magic session types no. desktop files exist by default, but & kdm; pretends they would, so you can override them like any other type. I guess you already know how to add a new session type by now.; -)
Using & kdm; for Remote Logins (XDMCP;)
& XDMCP; is the Open Group standard, the X Display Manager Control Protocol. This is used to set up connections between remote systems over the network.
& XDMCP; is useful in multiuser situations where there are users with workstations and a more powerful server that can provide the resources to run multiple X sessions. For example, & XDMCP; is a good way to reuse old computers - a Pentium or even 486 computer with 16 Mb RAM is sufficient to run X itself, and using & XDMCP; such a computer can run a full modern & kde; session from a server. For the server part, once a single & kde; (or other environment) session is running, running another one requires very few extra resources.
However, allowing another method of login to your machine obviously has security implications. You should run this service only if you need to allow remote X Servers to start login sessions on your system. Users with a single & UNIX; computer should not need to run this.
Advanced Topics
Command Sockets
This is a feature you can use to remote-control & kdm;. It's mostly intended for use by & ksmserver; and & kdesktop; from a running session, but other applications are possible as well.
The sockets are & UNIX; domain sockets which live in subdirectories of the directory specified by FifoDir =. The subdir is the key to addressing and security; the sockets all have the file name socket and file permissions rw-rw-rw- (0666). This is because some systems do n't care for the file permission of the socket files.
There are two types of sockets: the global one (dmctl) and the per-display ones (dmctl-lt; displaygt;).
The global one's subdir is owned by root, the subdirs of the per-display ones' are owned by the user currently owning the session (root or the logged in user). Group ownership of the subdirs can be set via FifoGroup=, otherwise it's root. The file permissions of the subdirs are rwxr-x--- (0750).
The fields of a command are separated by tabs (\ ), the fields of a list are separated by spaces, literal spaces in list fields are denoted by \\s.
The command is terminated by a newline (\).
The same applies to replies. The reply on success is ok, possibly followed by the requested information. The reply on error is an errno-style word (eg; perm, noent, & etc;) followed by a longer explanation.
Global commands:
login display (now | schedule) user password [session_arguments]
login user at specified display. if now is specified, a possibly running session is killed, otherwise the login is done after the session exits. session_arguments are printf-like escaped contents for. dmrc. Unlisted keys will default to previously saved values.
resume
Force return from console mode, even if TTY logins are still active.
manage display [display_class [auth_name auth_data]]
Start managing the named foreign display.
display_class, if specified and non-empty, will be used for configuration matching; see.
auth_name and auth_data need to be passed if the display requires X authorization. The format is the same as the 2nd and 3rd column of the xauth list output.
unmanage display
Stop managing the named foreign display.
Per-display commands:
lock
The display is marked as locked. If the & X-Server; crashes in this state, no auto-relogin will be performed even if the option is on.
unlock
Reverse the effect of lock, and re-enable auto-relogin.
suicide
The currently running session is forcibly terminated. No auto-relogin is attempted, but a scheduled "login" command will be executed.
Commands for all sockets
caps
Returns a list of this socket's capabilities:
kdm
identifies & kdm;, in case some other DM implements this protocol, too
list, lock, suicide, login, resume, manage
The respective command is supported
bootoptions
The listbootoptions command and the = to shutdown are supported
shutdown & lt; listgt;
shutdown is supported and allowed for the listed users (a comma separated list.) * means all authenticated users.
nuke & lt; listgt;
Forced shutdown may be performed by the listed users.
nuke
Forced shutdown may be performed by everybody
reserve & lt; numbergt;
Reserve displays are configured, and number are available at this time
list [all | alllocal]
Return a list of running sessions. By default all active sessions are listed. if all is specified, passive sessions are listed as well. If alllocal is specified, passive sessions are listed as well, but all incoming remote sessions are skipped.
Each session entry is a comma separated tuple of:
Display or TTY name
VT name for local sessions
Logged in user's name, empty for passive sessions and outgoing remote sessions (local chooser mode)
Session type or lt; remotegt; for outgoing remote sessions, empty for passive sessions.
A Flag field:
* for the display belonging to the requesting socket.
! for sessions that cannot be killed by the reqeusting socket.
New fields may be added in the future.
reserve [timeout in seconds]
Start a reserve login screen. If nobody logs in within the specified amount of time (one minute by default), the display is removed again. When the session on the display exits, the display is removed, too.
Permitted only on sockets of local displays and the global socket.
activate (vt | display)
Switch to a particular VT (virtual terminal). The VT may be specified either directly (eg; vt3) or by a display using it (eg; :2).
listbootoptions
List available boot options.
The return value contains these tokens:
A list of boot options (as shown in & kdm; itself).
The default boot option.
The current boot option.
The default and current option are zero-based indices into the list of boot options. If either one is unset or not determinable, it is -1.
shutdown (reboot | halt) [= bootchoice] (ask | trynow | forcenow | schedule | start (-1 | end (force | forcemy | cancel))))
Request a system shutdown, either a reboot or a halt/ poweroff.
An OS choice for the next boot may be specified from the list returned by listbootoptions
Shutdowns requested from per-display sockets are executed when the current session on that display exits. Such a request may pop up a dialog asking for confirmation and/ or authentication
start is the time for which the shutdown is scheduled. If it starts with a plus-sign, the current time is added. Zero means immediately.
end is the latest time at which the shutdown should be performed if active sessions are still running. If it starts with a plus-sign, the start time is added. -1 means wait infinitely. If end is through and active sessions are still running, & kdm; can do one of the following:
cancel - give up the shutdown
force - shut down nonetheless
forcemy - shut down nonetheless if all active sessions belong to the requesting user. Only for per-display sockets.
start and end are specified in seconds since the & UNIX; epoch.
trynow is a synonym for 0 0 cancel, forcenow for 0 0 force and schedule for 0 -1.
ask attempts an immediate shutdown and interacts with the user if active sessions are still running. Only for per-display sockets.
shutdown cancel [local | global}
Cancel a scheduled shutdown. The global socket always cancels the currently pending shutdown, while per-display sockets default to cancelling their queued request.
shutdown status
Return a list with information about shutdowns.
The entries are a comma-separated tuples of:
(global | local) - pending vs. queued shutdown. A local entry can be returned only by a per-display socket.
(halt | reboot)
start
end
("ask"|"force"|"forcemy"|"cancel")
Numeric user ID of the requesting user, -1 for the global socket.
The next boot OS choice or "-" for none.
New fields might be added later
There are two ways of using the sockets:
Connecting them directly. FifoDir is exported as $DM_CONTROL; the name of per-display sockets can be derived from $DISPLAY.
By using the kdmctl command (eg; from within a shell script). Try kdmctl -h to find out more.
Here is an example bash script reboot into FreeBSD:
if kdmctl | grep -q shutdown; then IFS=$'\ 'set -- ` kdmctl listbootoptions ` if ["$1" = ok]; then fbsd=$(echo "$2" | tr' ''\' | sed -ne's, \\\\s,, g; /freebsd/ I{p; q} ') if [-n "$fbsd"]; then kdmctl shutdown reboot "=$fbsd" ask & gt; / dev/ null else echo "FreeBSD boot unavailable." fi else echo "Boot options unavailable." fi else echo "Cannot reboot system." fi
Other sources of information
Since & kdm; is descended from & xdm;, the xdm man page may provide useful background information. For X-related problems try the man pages X and startx. If you have questions about & kdm; that are not answered by this handbook, take advantage of the fact the & kdm; is provided under the terms of the & GNU; General Public License: look at the source code.
Credits and License
& kdm; is derived from, and includes code from, & xdm; & copy; Keith Packard, MIT X Consortium.
& kdm; 0.1 was written by & Matthias. Ettrich;. Later versions till & kde; 2.0. x were written by & Steffen. Hansen;. Some new features for & kde; 2.1. x and a major rewrite for & kde; 2.2. x made by & Oswald. Buddenhagen;.
Other parts of the & kdm; code are copyright by the authors, and licensed under the terms of the GNU; GPL. Anyone is allowed to change & kdm; and redistribute the result as long as the names of the authors are mentioned.
& kdm; requires the & Qt; library, which is copyright Troll Tech AS.
Documentation contributors:
Documentation written by & Steffen. Hansen; & Steffen. Hansen. mail;
Documentation extended by Gregor Zumstein zumstein@ssd. ethz. ch. Last update August 9, 1998
Documentation revised for & kde; 2 by & Neal. Crook; & Neal. Crook. mail;. Last update August 6, 2000
Documentation extended and revised for & kde; 2.2 and 4.0 by & Oswald. Buddenhagen; & Oswald. Buddenhagen. mail;. Last update December 7, 2007
Documentation copyright & Steffen. Hansen;, Gregor Zumstein, & Neal. Crook; and & Oswald. Buddenhagen;. This document also includes large parts of the & xdm; man page, which is & copy; Keith Packard. The theme format documentation is heavily based on the GDM manual, which is & copy; Martin K. Petersen, George Lebl, & RedHat;, Inc. and Sun Microsystems, Inc.
CREDIT_FOR_TRANSLATORS
& underFDL;
Glossary
greeter
The greeter is the login dialog, & ie; the part of & kdm; which the user sees.
entropy
The entropy of a system is the measure of its unpredictability. This is used during the generation of random numbers.
A Menu drop down box that allows & kdm; to be used to start sessions with various different window managers or desktop environments installed on the system.
A Clear button that clears the text from the Login and Pass fields.
Restart
Stop and then restart the X-server. Typically, you might need to use this option if you have changed your X11 configuration in some way.
Console Mode
Stop the & X-Server; and return the system to console mode. This is achieved by bringing the system down to runlevel 3. Typically, the system manager might need to use this option before upgrading or re-configuring X11 software.
Scaled
(Optionally) A Shutdown... button that displays the shutdown dialog box.
Session types
The main dialog box for & kdm; includes a Session Type: drop-down box, which allows you to select a window manager to use for your session. This chapter describes the changes that you must make to your configuration files in order to support this feature.
The options that appear in the Session Type: drop-down box are configured by entries in the KDM section of & kdmrc;.
When you log in using & kdm;, the shell script Xsession is executed. The session type that you select is passed as a command-line argument. (Xsession can be found in / etc/ X11/ xdm/ for Redhat and Mandrake, and in / usr/ X11R6/ lib/ X11/ xdm/ for S. u. S. E.). Whilst debugging, you might find it helpful to add this line to Xsession:
echo "$0 || $1 || $2" > $HOME/. Xsession_args
How you proceed now depends upon how your system usually starts up window managers. Here are two different approaches, with examples of the changes that you must make:
The window manager is started by commands within Xsession. In this case, you can add a case statement to start the appropriate window manager. Linux Mandrake uses this approach; here is an extract from Xsession:
# now, we see if xdm/ gdm/ kdm has asked for a specific environment case $# in 1) case $1 in kde) source / opt/ kde2/ bin/ kde1 exec startkde;; kde2) source / opt/ kde2/ bin/ kde2 exec startkde;; failsafe) exec xterm -geometry 80x24-0-0;; default);; *) exec / bin/ sh -c "$(/ usr/ sbin/ chksession -x=$1)";; esac esac
The window manager is started by another script that is invoked by Xsession. In this case you must ensure that the parameter passed to Xsession is passed on to that other script. For example, if the window manager is started like this:
exec $startup
you would need to change it to:
exec $startup $@
Having made this change, you must trace your way through the startup to find the place where the window manager is started. One approach uses xinitrc to start the window manager; this allows a system-wide file / etc/ X11/ xinit/ xinitrc or a user-specific file $HOME/. xinitrc to be used. If you edit $HOME/. xinitrc, you may want to save a copy in / etc/ skel, so that it will be automatically generated in every user account you create from now on. Here is an example xinitrc for a system using this approach:
#! /bin/ bash # #. xsession/. xinitrc # # choose a window manager # defaultwm=kde #set the window manager to $1 if it was supplied windowmgr=${1: -$defaultwm} #start the respective window managers case ${windowmgr} in kde|kwm|kdestart) WINDOWMANAGER=startkde;; fvwm|fvwm2) WINDOWMANAGER=fvwm2;; fvwm95) WINDOWMANAGER=fvwm95;; *) WINDOWMANAGER=windowmgr # default for unknown wm's esac # # load resources # if [-f / usr/ X11R6/ lib/ X11/ Xmodmap]; then xmodmap / usr/ X11R6/ lib/ X11/ Xmodmap fi if [-f ~/. Xmodmap]; then xmodmap ~/. Xmodmap fi if [-f ~/. Xdefaults]; then xrdb -merge ~/. Xdefaults fi if [-f ~/. Xresources]; then xrdb -merge ~/. Xresources fi # # finally start the window manager # exec $WINDOWMANAGER
Building and Installing kdm
& kdm; is part of the KDE project. The various component parts of the KDE project are broken into sections, called packages. & kdm; is part of the package called kdebase. You can get KDE source code from various Linux and BSD distribution CDs, or by download from www. kde. org or its mirrors. If you have an out-of-date source code tree, you can use one of the KDE cvsup servers to bring it up-to-date whilst using minimal network bandwidth.
Before building kdebase, you must have built and installed (in this order) version 2 of the qt library and the KDE packages kdesupport (optionally) and kdelibs.
In order to build any of the above, you must already have the X Window System installed, together with a C++ compiler. If are you building from CVS you will also need the GNU configuration tools automake and autoconf.
If the last few paragraphs seemed like a foreign language, then either you have strayed into an Inappropriate Area of this handbook, or you are about to undergo a Great Learning Experience.
If you managed to satisfy all of the prerequisites, you are unlikely to have any problems with building and installing kdebase. & kdm; is installed in your $KDEDIR/ bin folder.
make install will not overwrite your previous & kdm; config files including & kdmrc;.