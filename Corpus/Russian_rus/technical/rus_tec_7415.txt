# language_name_wals:	Russian
# language_name_glotto:	Russian
# iso639_3:	rus
# year_composed:	NA
# year_published:	2014
# mode:	written
# genre_broad:	technical
# genre_narrow:	NA
# writing_system:	Cyrl
# special_characters:	NA
# short_description:	GNOME
# source:	https://object.pouta.csc.fi/OPUS-GNOME/v1/raw/ru.zip
# copyright_short:	http://opus.nlpl.eu/GNOME.php
# copyright_long:	http://opus.nlpl.eu/GNOME.php J. Tiedemann, 2012, Parallel Data, Tools and Interfaces in OPUS. In Proceedings of the 8th International Conference on Language Resources and Evaluation (LREC 2012)
# sample_type:	whole
# comments:	NA

Руководство менеджера входа в систему
0.0
2008-09
GDM — сокращение от GNOME Display Manager, программа графического входа в систему.
Martin
K.
Petersen
mkp@mkp.net
George
Lebl
jirka@5z.com
Jon
McCann
mccann@jhu.edu
Ray
Strode
rstrode@redhat.com
Brian
Cameron
Brian.Cameron@Sun.COM
1998
1999
Martin K. Petersen
2001
2003
2004
George Lebl
2007
2008
Red Hat, Inc.
Разрешается копировать, распространять и/или изменять этот документ на условиях лицензии GNU Free Documentation License (GFDL), версии 1.1 или любой более поздней версии, опубликованной Фондом свободного программного обеспечения (Free Software Foundation), без неизменяемых частей и без текстов на обложках. Вы можете найти копию лицензии GFDL по
Это руководство — часть документации GNOME, которая распространяется на условиях лицензии GNU FDL. Если вы хотите распространять это руководство отдельно от остальной документации, вам следует приложить к руководству копию лицензии, как описано в разделе 6 лицензии.
Некоторые имена и марки используются компаниями для обозначения их продуктов и услуг и являются торговыми марками. Там, где эти имена присутствуют в документации и где участники проекта документирования GNOME знают об этом, имена выделяются заглавными буквами или начальной заглавной буквой.
ДОКУМЕНТ РАСПРОСТРАНЯЕТСЯ «КАК ЕСТЬ», БЕЗ ВСЯКИХ ГАРАНТИЙ, ЯВНЫХ ИЛИ НЕЯВНЫХ, ВКЛЮЧАЯ, БЕЗ ОГРАНИЧЕНИЙ, ГАРАНТИИ ТОГО, ЧТО ДОКУМЕНТ ИЛИ ИЗМЕНЁННАЯ ВЕРСИЯ ДОКУМЕНТА СВОБОДНА ОТ ДЕФЕКТОВ, ПРИГОДНА К ПРОДАЖЕ, ПРИГОДНА К ИСПОЛЬЗОВАНИЮ В ОПРЕДЕЛЁННЫХ ЦЕЛЯХ ИЛИ НЕ НАРУШАЕТ ЗАКОНЫ. ВЕСЬ РИСК, КАСАЮЩИЙСЯ КАЧЕСТВА, ТОЧНОСТИ ИЛИ ПРАВИЛЬНОСТИ ДОКУМЕНТА ИЛИ ИЗМЕНЁННЫХ ВЕРСИЙ ДОКУМЕНТА, ЛЕЖИТ НА ВАС. ЕСЛИ ДОКУМЕНТ ИЛИ ИЗМЕНЁННАЯ ВЕРСИЯ ДОКУМЕНТА ИМЕЕТ НЕДОСТАТКИ, ВЫ (А НЕ АВТОР ДОКУМЕНТА ИЛИ ЕГО ПОМОЩНИК) БЕРЁТЕ НА СЕБЯ СТОИМОСТЬ ЛЮБОЙ НЕОБХОДИМОЙ ДОРАБОТКИ, КОРРЕКЦИИ ИЛИ ВОССТАНОВЛЕНИЯ. ЭТОТ ОТКАЗ ОТ ГАРАНТИЙ СОСТАВЛЯЕТ ВАЖНУЮ ЧАСТЬ ЛИЦЕНЗИИ. НИКАКОЕ ИСПОЛЬЗОВАНИЕ ДОКУМЕНТА ИЛИ ИЗМЕНЁННОЙ ВЕРСИИ ДОКУМЕНТА НЕ ДОПУСКАЕТСЯ БЕЗ ДАННОГО ПРЕДУПРЕЖДЕНИЯ И
НИ ПРИ КАКИХ ОБСТОЯТЕЛЬСТВАХ И НИ ПРИ КАКОМ ЗАКОННОМ СПОСОБЕ, НИ ПО КАКОМУ СОГЛАШЕНИЮ ИЛИ ДРУГОЙ ПРИЧИНЕ, АВТОР, СОЗДАТЕЛЬ, ПОМОЩНИКИ ИЛИ РАСПРОСТРАНИТЕЛИ ДОКУМЕНТА НЕ НЕСУТ ОТВЕТСТВЕННОСТЬ ЗА ПРЯМОЙ, КОСВЕННЫЙ, СПЕЦИАЛЬНЫЙ, СЛУЧАЙНЫЙ ИЛИ ПРЕДНАМЕРЕННЫЙ УЩЕРБ ЛЮБОГО СВОЙСТВА, ВКЛЮЧАЯ, БЕЗ ОГРАНИЧЕНИЯ, ПОТЕРЮ РЕПУТАЦИИ, РАБОТОСПОСОБНОСТИ, КОМПЬЮТЕРНЫЕ СБОИ ИЛИ ПОЛОМКИ, ИЛИ ЛЮБОЙ ДРУГОЙ УЩЕРБ ИЛИ ПОТЕРИ, ВОЗНИКАЮЩИЕ ВСЛЕДСТВИЕ ИЛИ СВЯЗАННЫЕ С ИСПОЛЬЗОВАНИЕМ ДОКУМЕНТА ИЛИ ИЗМЕНЁННЫХ ВЕРСИЙ ДОКУМЕНТА, ДАЖЕ ЕСЛИ СТОРОНА БЫЛА УВЕДОМЛЕНА О ВОЗМОЖНОСТИ ТАКОГО УЩЕРБА.
ДОКУМЕНТ И ИЗМЕНЁННЫЕ ВЕРСИИ ДОКУМЕНТА ПРЕДОСТАВЛЯЮТСЯ ПОЛЬЗОВАТЕЛЮ НА УСЛОВИЯХ ЛИЦЕНЗИИ GNU FREE DOCUMENTATION LICENSE С УВЕДОМЛЕНИЕМ О ТОМ, ЧТО:
Настоящее руководство содержит описание GDM версии 2.24.0. Дата последнего обновления: 27.08.2008.
Глоссарий наименований данного руководства
Программа выбора — программа, используемая для выбора удалённого компьютера, на котором планируется управлять дисплеем при помощи локального дисплея. Запускается командой
FreeDesktop — организация, предоставляющая стандарты рабочего места, например Спецификация содержимого рабочего места.
GDM (менеджер дисплеев GNOME) — аббревиатура, используемая для описания всего программного пакета.
Программа приветствия — графическая программа входа в систему, запускается командой
PAM — подключаемый механизм аутентификации
XDMCP — протокол управления дисплеями X
Сервер X — реализация системы «X Window System», например сервер Xorg от X.org Foundation
Слова в уголках в путях каталогов заменяются префиксами, указанными при установке.
Содержание
Введение
Менеджер дисплея GNOME (GDM) — это менеджер дисплея, который реализует все необходимое для управления локальными и удалёнными дисплеями. GDM был написан с нуля и не содержит кода из XDM или консорциума X.
GMD конфигурируется, и установки, влияющие на безопасность, и на которые следует обратить внимание, выделены в данном документе.
Некоторые дистрибутивы изменяют настройки GDM, поэтому их значения могут отличаться от значений по умолчанию, указанных в данном документе. Если GDM ведет себя не так, как описано в документации, пожалуйста, проверьте отличается ли содержимое конфигурационых файлов от указанного в данном документе.
Чтобы узнать больше о GDM посетите сайт проекта:
Чтобы задать вопросы или обсудить GDM используйте список рассылки
Пожалуйста, все обнаруженные ошибки или предложения направляйте в
Стабильность интерфейса
В состав GDM версий 2.20 и более ранних входил устоявшийся интерфейс настройки. Однако, основной код GDM 2.22 был переписан, и стал не совсем совместимым с предыдущими версиями. Это сделано из-за того, что изменены принципы работы, и некоторые параметры потеряли смысл, некоторые никогда не использовались, а часть функций в новой версии ещё не реализована.
Интерфейсы, которые продолжают поддерживаться в неизменной форме включают в себя сценарии: Init, PreSession, PostSession, PostLogin и Xsession. Некоторые настройки демона в файле
GDM версии 2.20 и более ранних позволял управлять несколькими дисплеями с различными видеокартами, что использовалось в терминалах серверов, программами входа в систему (например, Xnest и Xephyr), программой gdmsetup, темами программ приветствия, основанными на XML. Также ранние версии GDM позволяли запускать программу выбора XDMP с экрана входа в систему. Все эти возможности не реализованы в GDM версии 2.22.
Описание функциональности
GDM отвечает за управление дисплеями в системе, что включает в себя: идентификацию пользователей, запуск и завершение сеанса пользователя. GDM конфигурируется, и способы его настройки описаны в разделе «Конфигурирование GDM». GDM также поддерживает работу людей с ограниченными возможностями.
GDM может управлять как основным консольным дисплеем, так и дисплеями виртуальных терминалов(VT), и XDMCP-дисплеями. Большинство приложений могут работать с несколькими консольными дисплеями при помощи интерфейса виртуального терминала Xserver (Xserver VT), например: Fast User Switch Applet (FUSA) и gnome-screensaver.
Независимо от типа дисплея, GDM при управлении выполнит следующие действия: запустит процесс Xserver, затем выполнит сценарий
Программа приветствия запускается от имени непривилегированного пользователя и группы «gdm», которые описаны в разделе «Безопасность». Основная функция программы приветствия — идентификация пользователя при помощи PAM. Модуль PAM определяет какое приглашение (при необходимости) показывать пользователю. На большинстве систем программа приветствия запрашивает имя пользователя и пароль. Но некоторые системы могут быть настроены на использование других механизмов идентификации, например: сканирование отпечатков пальцев или использование карт SmartCard. GDM и PAM могут быть настроены таким образом, что не будут требовать какого-либо ввода, благодаря чему GDM автоматически войдёт в систему и запустит сеанс, что может быть очень полезно, например, в терминалах торговых точек.
Дополнительно, программа приветствия позволяет пользователю выбрать сеанс для запуска и используемый язык. Сеансы определены в файлах оканчивающихся на «.desktop». Подробнее этот процесс описан в разделе «Конфигурирование». По умолчанию GDM показывает обозреватель изображений пользователей, и пользователь может просто выбрать его изображение вместо того, чтобы вводить своё имя. GDM запоминает сеансы и язык по умолчанию в файле
После идентификации пользователя демон запустит сценарий
Панель программы приветствия
Программа приветствия GDM показывает панель с дополнительными действиями, присоединённую к нижней части экрана. Если пользователь выбран, то на панели можно указать сеанс, язык и раскладку клавиатуры, которые будут использованы после входа в систему. Можно также сменить раскладку при вводе пароля. На панели также есть место для значков дополнительных сервисов входа в систему, например: индикатор зарядки батарей, значок, позволяющий включить специальные возможности. Программа приветствия показывает кнопки завершения работы и перезагрузки системы, которые можно убрать при помощи настроек GDM. С помощью PolicyKit (или RBAC в Solaris) можно настроить GDM таким образом, что перед выключением или перезагрузки системы будет необходима идентификация пользователя.
Специальные возможности
GDM поддерживает специальные возможности ввода при входе в систему, позволяющие пользователям регистрироваться в системе, если затруднено использование дисплея, мыши или клавиатуры обычными способами. В этом случае доступны вспомогательные технологии ввода, такие как: экранная клавиатура, чтение текста на экране, экранная лупа и специальная доступная клавиатура для X сервера, а также, при необходимости, контрастные темы, значки и крупноразмерные шрифты.
В некоторых дистрибутивах учётную запись GDM необходимо сделать членом группы «audio», чтобы программы поддержки специальных возможностей, например программы чтения с экрана, могли нормально функционировать.
Обозреватель изображений пользователей GDM
Обозреватель изображений пользователей — это интерфейс, позволяющий пользователям ввести своё имя нажатием клавишей мыши на изображении. Эта возможность регулируется параметром /apps/gdm/simple-greeter/disable_user_list в GConf, и по умолчанию включена. Если она выключена, то пользователям необходимо ввести своё имя при помощи клавиатуры, иначе обозреватель показывает всех локальных пользователей, которым разрешен вход в систему (все пользователи из файла /etc/passwd, имеющие работающую командную оболочку (shell) и достаточное большое значение UID), а также всех удалённых пользователей, уже входивших в систему. Обозреватель из GDM 2.20 и меньше попытается показать всех удалённых пользователей, из-за чего может снизится производительность в больших системах.
Обозреватель упорядочивает пользователей по частоте входа в систему по убыванию. Благодаря чему пользователи, чаще всего регистрирующиеся в системе, могут быстро отыскать своё изображение.
Обозреватель изображений поддерживает поиск по первым символам, который динамически меняет положение изображение пользователя в списке по мере того, как пользователь вводит первые символы имени. Поэтому пользователю с длинным именем достаточно ввести несколько первых символов, и нужное имя автоматически будет выбрано из списка.
Изображения пользователей, которые использует GDM, могут быть установлены глобально системным администратором или располагаться в домашних каталогах пользователей. Глобально они находятся в каталоге
Общее изображение для всех пользователей установить нельзя. В домашнем каталоге пользователей GDM проверит наличие файла изображения в
Если в каталоге пользователя не найдено изображение, GDM использует указанную в теме GTK+ в параметре «stock_person». Если такого параметра не найдено, то будет использовано стандартное изображение.
Так как загрузка и масштабирование изображений расположенных на удалённых компьютерах может занять продолжительное время, то GDM не загружает изображения пользователей из удалённых домашних каталогов.
Когда обозреватель включён, то он показывает всех пользователей, которым разрешен вход в систему, а если включен XDMCP, то имена всех пользователей доступны удалённо. Что ухудшает безопасность в том случае, если недоброжелатель не должен догадываться о корректных именах пользователей. Поэтому в некоторых системах с высоким уровнем безопасности использование обозревателя изображений пользователей недопустимо.
XDMCP
GDM можно настроить так, что он будет отслеживать и управлять запросами по протоколу управления дисплеями X (XDMCP) от удалённых машин. По умолчанию эта возможность отключена. Если GDM собран с поддержкой TCP Wrapper, то демон разрешит доступ тем машинам, которые перечислены в секции «GDM service» в конфигурационном файле TCP Wrapper.
GDM содержит ряд внутренних механизмов, которые делают его более устойчивым к DoS атакам на XDMCP сервис. Множество параметров протокола, например таймер установки соединения, могут быть точно подогнаны. Значения по умолчанию должны достаточно хорошо подходить большинству систем.
GDM прослушивает UDP порт 177, используемый по умолчанию для XDMCP протокола. И отвечает на запросы QUERY и BROADCAST_QUERY, посылая пакет WILLING источнику.
GDM может быть настроен на обработку запросов INDIRECT и быть диспетчером удалённых менеджеров дисплеев. В этом случае GDM будет запоминать выбор пользователя и перенаправлять дальнейшие запросы указанному менеджеру (например, GDM) на другой машине. GDM также поддерживает расширения протокола, благодаря которым GDM не будет запоминать машину перенаправления после успешного соединения пользователя. Это возможно только если на обоих машинах используется GDM. Другие менеджеры будут игнорировать такую возможность.
Если XDMCP не работает, убедитесь, что все удалённые машины перечислены в файле
Для получения информации по вопросам безопасности использования XDMCP обратитесь к разделу «Безопасность».
Журналирование
GDM использует утилиту syslog для журналирования ошибок и состояний своей работы. Кроме того, GDM может фиксировать в журнале отладочную информацию, которая может пригодиться при поиске проблем, например если GDM работает не корректно. Эта возможность включается указанием параметра командной строки «--debug» при запуске демона.
Вывод сообщений от большинства X серверов помещается в каталоге журналов GDM, по умолчанию
Вывод сообщений сеанса проходит через GDM в файл
Если GDM не сможет создать этот файл по какой-либо причине, то будет создан файл
Быстрое переключение пользователей
GDM допускает одновременный вход нескольких пользователей. После входа одного пользователя другой может войти с помощью переключателя пользователей на панели GNOME, или с помощью кнопки «Сменить пользователя» в диалоге блокировки экрана хранителя экрана. Активный сеанс можно переключить обратно с помощью того-же механизма. Некоторые дистрибутивы не добавляют кнопку переключения пользователей на панель, в этом случае она может быть добавлена через контекстное меню панели.
Безопасность
Учётные записи пользователя и группы GDM
В целях безопасности, рекомендуется использовать выделенную учётную запись пользователя и группы. В большинстве систем это — «gdm». Но GDM можно настроить на использование любой другой учётной записи. Все графические программы GDM запускаются от имени этой учётной записи и взаимодействие происходит в рамках её прав. Поэтому желательно ограничить права пользователя и группы gdm.
Единственная специальная привелегия учётной записи «gdm», необходимая для работы — это возможность чтения и записи файлов Xauth в каталог
Ни при каких обстоятельствах не следеут указывать GDM такую учётную запись, к которой пользователь может легко получить доступ, например
Конфигурация программы приветствия GDM хранится в GConf. Чтобы разрешить GDM записывать конфигурацию, необходимо учётной записи «gdm» дать права записи в свой домашний каталог $HOME. Пользователи могут самостоятельно изменять конфигурацию по умолчанию в GConf, чтобы избежать необходимости обечпечивать учётной записи «gdm» права записи в домашний каталог $HOME. При этом некоторые возможности GDM могут быть недоступны, если у него нет возможности записывать информацию в конфигурацию GConf.
Модуль аутентификации PAM
GDM использует модуль PAM для аутентификации при входе в систему. PAM означает: подключаемый модуль аутентификации (Pluggable Authentication Module), и используется большинством программ, требующим аутентификацию пользователя. Это позволяет администратору настроить способы аутентификации для разных программ входа в систему (например: ssh, login, хранителей экрана и так далее).
PAM является достаточно сложным модулем со множеством параметров конфигурации, поэтому в этом документе не представлены детали его настройки, а лишь даётся необходимая информация по настройке PAM для работы с GDM. Предполагается, что читатель, желающий настроить PAM, знаком с его документацией и понимает принципы конфигурирования PAM, а также термины, используемые в этом разделе.
На разных операционных системах PAM имеет различные, но похожие интерфейсы конфигурирования, поэтому обратитесь к страницам man
По умолчанию GDM использует сервисы PAM с именем «gdm» для обычного входа и «gdm-autologin» для автоматического входа. Если эти сервисы не определены в конфигурационных файлах «pam.d» или «pam.conf», то GDM будет использовать обычное поведение PAM. На большинстве систем это сработает, но автоматический вход в систему может не работать, если не определен сервис PAM «gdm-autologin».
Сценарий
Если вы хотите использовать с GDM другие типы аутентификации (например, сканирование отпечатков пальцев или карты SmartCard), то это реализовывается с помощью соответствующих сервисных модулей PAM, а не изменением кода GDM. За дополнительной информацией обращайтесь к документации PAM. То как использовать такие механизмы часто обсуждается в списке рассылки
PAM имеет некоторые ограничения при работе с несколькими типами аутентификации одновременно, например возможность одновременного использования карт SmartCard и аутентификации путем ввода имени пользователя и пароля. Есть способы использования такой возможности, и лучший способ их изучить — это установить конфигурацию с такими настройками.
Если не работает автоматический вход в систему проверьте наличие сервиса «gdm-autologin» в конфигурации PAM. Для включения этой возможности необходимо использовать модуль PAM, который не производит аутентификации или возвращает PAM_SUCCESS со всех интерфейсов, например модуль pam_allow.so, с использованием которого конфигурация PAM с включённым сервисом «gdm-autologin» будет выглядеть следующим образом:
gdm-autologin auth required pam_unix_cred.so.1
 gdm-autologin auth sufficient pam_allow.so.1
 gdm-autologin account sufficient pam_allow.so.1
 gdm-autologin session sufficient pam_allow.so.1
 gdm-autologin password sufficient pam_allow.so.1
Указанная настройка не будет генерировать записи lastlog. Если они необходимы, то используйте следующее для сеанса:
gdm-autologin сеанс требует pam_unix_session.so.1
Базы utmp и wtmp
GDM создает записи в базах данных utmp и wtmp учёта пользователей во время входа и выхода пользователей из системы. База данных utmp содержит информацию о пользователе и его правах доступа, которая доступна с помощью команд:
Смеха аутентификации X сервера
Файлы аутентификации X сервера находятся во вновь создаваемом во время запуска подкаталоге в
GDM поддерживает только схему аутентификации X сервера «MIT-MAGIC-COOKIE-1». Другие схемы не обладают значительными преимуществами и на настоящий момент не являются приоритетными. Следует быть особенно осторожным при использовании протокола XDMCP, так как аутентификационная информация (в виде cookies) передается по сети в открытом виде, поэтому она доступна для перехвата. В этом случае злоумышленник может просто перехватить ключ при входе в систему. Для предотвращения этого необходимо использовать туннелирование X соединений через ssh, вместо протокола XDMCP. Протокол XDMCP не достаточно безопасен, чтобы его использовать как протокол удалённого графического терминала, в большинстве случаев лучше использовать «ssh -Y» вместо возможностей GDM по работе с XDMCP.
Безопасность XDMCP
Не смотря на то, что дисплей защищен аутентификационной информацией (в cookies), события XEvents и соответствующие нажатия клавиш при вводе пароля будут переданы по сети в открытом виде и их легко перехватить.
XDMCP в основном предназначен для использования в лабораторных терминалах, где клиентам необходима сеть лишь для соединения с сервером. Лучшей политикой безопасности будет использование таких клиентов в отдельной подсети к которой нет доступа извне, и единственной точкой доступа во внешние сети является сам сервер. Подобные конфигурации нельзя использовать в сетях с неуправляемыми концентраторами или прослушиваемых сетях.
Управление доступом XDMCP
Контроль доступа XDMCP реализован с использованием библиотеки TCP Wrappers. В некоторых операционных системах GDM собран без поддержки TCP Wrappers, поэтому подобные возможности могут быть недоступны.
Необходимо использовать имя демона
gdm: .evil.domain
в файл
gdm: .your.domain
в файл
Безопасность сетевого экрана
Хотя GDM и пытается предупредить возможные атаки на протокол XDMCP, рекомендуется заблокировать порт XDMCP (обычно UDP 177) на сетевом экране до тех пор, пока он действительно не понадобится. GDM пытается предотвратить DoS атаки, но X протокол традиционно небезопасен и его следует использовать только в безопасных средах. Кроме того, каждое удалённое соединение потребляет относительно много ресурсов, поэтому организовать DoS атаку через XDMCP намного проще, чем на веб-сервер.
Благоразумным будет заблокировать все порты, используемые X сервером: TCP порты 6000+номер дисплея. GDM использует номера дисплеев больше 20 для гибких серверов-по-требованию.
X не очень безопасный протокол, но XDMCP еще менее безопасен.
Средство PolicyKit
GDM можно настроить на использование средства PolicyKit, чтобы позволить системному администратору управлять видимостью кнопок выключения и перезагрузки системы на экране программы приветствия.
Видимость этих кнопок регулируется действиями:
RBAC: управление доступом по ролям
GDM можно настроить на использование RBAC вместо PolicyKit. В этом случае используется конфигурация RBAC для управления видимостью кнопок выключения и перезагрузки системы на экране программы приветствия.
Например, в системе Solaris для этого используется авторизация «solaris.system.shutdown». Достаточно изменить файл
Поддержка ConsoleKitConfigure
GDM включает поддержку публикации информации учётной записи пользователя с помощью системы учёта сеансов пользователей ConsoleKit, которая может отслеживать вошедших пользователей и в этой роли заменять файлы utmp и utmpx, которые существуют в большинстве UNIX подобных системах.
Когда GDM собирается создать новый процесс программы входа (login), то вызывается привилегированный метод ConsoleKit чтобы открыть новый сеанс для пользователя. В это же время GDM предоставляет ConsoleKit информацию о сеансе пользователя: ID пользователя, имя дисплея X11, который будет связан с сеансом, имя машины, откуда сеанс инициирован (что полезно в случаях XDMCP), локальный ли это сеанс и так далее. GDM — единственный доверенный источник подобной информации о пользовательском сеансе, как процесс, проводящий инициализацию сеанса. Использование указанного привилегированного метода ограничивается политикой безопасности системы D-BUS.
В случае, когда пользователь уже находится внутри существующего сеанса, аутентифицировался в GDM и запрашивает возврат в существующий сеанс, GDM вызывает привилегированный метод ConsoleKit для разблокирования этого сеанса. Детали того, что происходит при получении сигнала о разблокировке сеанса точно не определены и зависят от самого сеанса. Однако, большинство сеансов в ответ разблокируют хранитель экрана.
Когда пользователь начинает выход из системы или GDM или сеанс неожиданно завершается, регистрация сеанса пользователя в ConsoleKit будет отменена.
Конфигурирование
GDM имеет множество интерфейсов конфигурирования: точки подключения сценариев, конфигурация демона, конфигурация программы приветствия, глобальные параметры сеанса, интеграцию с конфигурацией gnome-settings-daemon и параметры сеанса. Подробнее это рассмотрено далее.
Точки подключения сценариев
Точки подключения сценариев GDM находятся в каталоге
Xsession
Init/
PostLogin/
PreSession/
PostSession/
Работа сценариев
Для каждого типа есть сценарий c именем «Default», который будет выполнен по умолчанию и располагается в каталоге, соответствующем типу сценария. Так сценарий по умолчанию для типа
Все эти сценарии выполняются под учётной записью root и должны возвращать 0 в случае успешного завершения и не нулевое значение если процесс входа должен быть прерван. Выполнение GDM приостанавливается во время исполнения сценария, поэтому если сценарий «подвиснет», то процесс входа также «подвиснет».
После успешного запуска X сервера GDM выполнит сценарий
После успешной аутентификации пользователя GDM выполнит сценарий
После инициализации сеанса GDM запустит сценарий
Когда пользователь завершает сеанс, GDM выполнит сценарий
Внимание! Сценарий
Во время выполнения всех указанных сценариев переменная окружения
Конфигурирование
Сценарий Xsession
Существует также сценарий
Конфигурация демона
Конфигурация демона GDM находится в файле
Внимание! Ранние версии GDM содержат дополнительные параметры, которые более не поддерживаемые GDM.
Файл
В файле
[daemon]
TimedLoginEnable=true
TimedLogin=you
Далее приведён полный список поддерживаемых параметров конфигурации:
[daemon]
TimedLoginEnable
TimedLoginEnable=false
Автоматический вход в систему произойдёт под учётной записью
TimedLogin
TimedLogin=
Учётная запись под которой произойдёт автоматический вход в систему по истечении определённого промежутка времени неактивности.
TimedLoginDelay
TimedLoginDelay=30
Задержка в секундах перед автоматическим входом под учётной записью
AutomaticLoginEnable
AutomaticLoginEnable=false
Если истина, то вход под учётной записью
AutomaticLogin
AutomaticLogin=
Учётная запись под именем которой произойдет немедленный вход в систему, если
User
User=gdm
Учётная запись под которой выполняется программа приветствия и другие графические приложения. Смотрите также описание параметра
Group
Group=gdm
Имя группы, под которой программа приветствия и другие графические приложения будут запущены. Смотрите также описание параметра
Параметры безопасности
--debug
Enable
Enable=false
Выводить отладочную информацию в syslog. Обычно, это файл
Параметры безопасности
Параметры безопасности
[security]
DisallowTCP
DisallowTCP=true
Если истина, то к параметрам запуска локального X сервера всегда добавляется
Поддержка XDCMP
[xdmcp]
DisplaysPerHost
DisplaysPerHost=1
Чтобы предотвратить атаки путем переполнения очереди ожидающий соединений, GDM разрешает только одно соединение с одной машины. Если необходимо предоставить больше дисплеев для машин с несколькими экранами, то следует увеличить этот параметр.
Внимание! Количество допустимых локальных дисплеев не ограничивается. Эта опция ограничивает только удалённые соединения через протокол XDMCP.
Установка в истину включает поддержку XDMCP протокола, разрешая GDM управлять удалёнными дисплеями и X терминалами.
Запросы прослушиваются на UDP порту 177. См. описание параметра «Port» для дополнительных сведений.
Если GDM собран с соответствующими опциями, то управление удалёнными дисплеями может быть осуществлено через библиотеку TCP Wrappers. Имя сервиса —
В зависимости от конфигурации TCP Wrappers, возможно, следует добавить
Внимание! XDMCP - небезопасный протокол, и на сетевом экране следует заблокировать UDP порт 177 до тех пор, пока он действительно не понадобится.
HonorIndirect
HonorIndirect=true
Разрешает XDMCP INDIRECT выбор (т.е. удалённое исполнение программы
MaxPending
MaxPending=4
GDM фиксирует длину очереди ожидающих соединений для предотвращения атак на сервис. Одновременно могут стартовать только MaxPending дисплеев.
Этот параметр не ограничивает количество управляемых удалённых соединений. Он ограничивает только количество дисплеев инициирующих соединение одновременно.
MaxSessions
MaxSessions=16
Определяет максимальное количество одновременно обслуживаемых соединений удалённых дисплеев. То есть общее количество удалённых дисплеев на данной машине.
MaxWait
MaxWait=30
Когда GDM готов обслужить дисплей, он отправляет пакет ACCEPT, содержащий уникальный идентификатор сеанса, который в дальнейшем будет использован в протоколе XDMCP.
Затем GDM поместит идентификатор сеанса в очередь ожидающих соединений для дисплея в ответ на запрос MANAGE.
Если ответ не был получен в течение MaxWait секунд, GDM объявит дисплей недоступным и удалит из очереди, освободив место для других дисплеев.
MaxWaitIndirect
MaxWaitIndirect=30
Этот параметр определяет максимальное количество секунд между тем, как пользователь выбирает машину и последующим непрямым запросом соединения с машиной. По истечении времени информация о выбранной машине стирается и место для непрямых запросов освобождается для других дисплеев. Эта информация также может быть стёрта, если больше, чем
PingIntervalSeconds
PingIntervalSeconds
Внимание! Ранее GDM использовал параметр
Port
Port=177
Порт UDP, который
Willing
Willing=lt;etcgt;/gdm/Xwilling
Когда машина посылает пакет WILLING в ответ на QUERY, то она посылает строку, сообщающую статус этого сервера. Обычно это системный идентификатор, но можно создать сценарий, отражающий любое сообщение. Если такого сценария нет или значение параметра пустое, то будет послано сообщение по умолчанию. Если сценарий выполнился успешно и вернул сообщение, то будет отослана первая строка этого сообщения. Сценарий выполняется не чаще одного раза в три секунды для предотвращения DoS атак, путем забрасывания машины пакетами QUERY.
Настройка простой программы приветствия (Simple Greeter)
По умолчанию GDM использует программу приветствия «Simple Greeter» и она настраивается через GConf. Значения по умолчанию находятся в файле
Параметры конфигурации программы приветствия
/apps/gdm/simple-greeter/banner_message_enable
false (boolean)
Определяет, показывать ли приветствующее текстовое сообщение.
/apps/gdm/simple-greeter/banner_message_text
NULL (string)
Содержит текстовое сообщения приветствия.
/apps/gdm/simple-greeter/disable_restart_buttons
Отражать ли кнопку перезагрузки системы на экране входа в систему.
/apps/gdm/simple-greeter/disable_restart_buttons
/apps/gdm/simple-greeter/logo_icon_name
computer (string)
Содержит имя значка темы для отображения логотипа приветствия.
/apps/gdm/simple-greeter/logo_icon_name
NULL (string)
/apps/gdm/simple-greeter/disable_restart_buttons
/apps/gdm/simple-greeter/wm_use_compiz
Использовать ли менеджер окон compiz вместо metacity.
Параметры сеанса GDM
Специальные возможности
Параметры конфигурации программы приветствия
Глобальные настройки сеанса
Программа приветствия GDM использует некоторые механизмы, что и сеанс рабочего места. Поэтому они используют многие общие параметры в GConf. Для всех таких параметров программа приветствия использует значения по умолчанию, пока они не будут переопределены: 1) установленной обязательной политикой GDM; 2) обязательной системной политикой. GDM устанавливает собственную обязательную политику, чтобы усилить безопасность.
Демон параметров GNOME
GDM включает следующие подключаемые модули gnome-settings-daemon: a11y-keyboard, background, sound, xsettings.
Они обеспечивают, например, фоновую картинку, шрифт и настройки темы, звуки и так далее.
С помощью GConf подключаемые модули можно отключить. Например, чтобы отключить звуковой модуль, следует использовать параметр
Параметры сеанса GDM
Сеансы GDM определяются в соответствии со спецификациями рабочего пространства FreeDesktop.org, которые можно получить по адресу:
Сеанс можно запретить, добавив в файл рабочего места строчку
Параметры языка пользовательских сеансов GDM
Сеанс пользователя по умолчанию и выбор языка находятся в файле
Файл
Параметр
[Desktop]
Session=gnome
Language=cs_CZ.UTF-8
Команды GDM
Команды GDM для пользователя root
пакет GDM содержит следующие команды, предназначенные для пользователя root в каталоге

Команда
-?, --help
Кратка справка по параметрам командной строки.
--fatal-warnings
Завершать работу GDM при возникновении любых предупреждений.
--timed-exit
Завершить работу демона после 30 секунд. Полезно для отладки.
--version
Вывести версию демона.






Разрешение проблем
Этот раздел содержит полезные советы как заставить GDM работать. Если у вас проблемы с GDM, вы можете сообщить об ошибке или написать письмо в лист рассылки (как это сделать описано ранее во введении).
Если GDM работает некорректно, желательно включить в письмо отладочную информацию, для получения которой необходимо запустить gdm с параметром --debug. Затем дойти до места где возникает ошибка и посмотреть в системный журнал (
GDM не запускается
Существует множество проблем из-за которых GDM не запускается, в этой секции описаны лишь общие проблемы и способы их отслеживания при старте GDM. Достаточно непросто отследить проблемы, из-за которых GDM «тихо» завершает работу.
Во-первых, убедитесь, что сервер X правильно настроен. Файл конфигурации GDM содержит секцию [server-Standard], используемую для запуска X сервера. Проверьте, что эта команда запускается в вашей системе в командной строке консоли и запускает X сервер, в противном случае, вероятно, проблема в параметрах X сервера. Обратитесь к журналу ошибок X сервера. Возможно, X сервер требует других параметров командной строки. Если это так, измените конфигурацию GDM, чтобы тот запускал X сервер с параметрами корректными для вашей системы.
Также проверьте, что каталог
Лицензия
Эта программа ― свободное программное обеспечение. Вы можете распространять или изменять его при условиях соответствия GNU General Public License опубликованной Free Software Foundation; либо версии 2 лицензии, либо (на ваше усмотрение) любой более поздней версии.
Эта программа распространяется в надежде на то, что приложение будет полезно, но БЕЗ ВСЯКИХ ГАРАНТИЙ; не гарантируется даже ПРИГОДНОСТЬ или СООТВЕСТВИЕ КАКИМ-ЛИБО ТРЕБОВАНИЯМ. Для получения дополнительной информации ознакомьтесь с GNU General Public License.
Копия лицензии
Nikita Belobrov <qvzqvz\@gmail\.com>, 2008
2005
2006
Sun Microsystems, Inc.
Если поддержка ConsoleKit нежелательна, то её можно отключить во время сборки, используя параметр «--with-console-kit=no» при запуске сценария конфигурирования.
EnableProxy
EnableProxy=false
Установка в истину включает поддержку сеансов XDMCP через локальный прокси X сервера, что может увеличить производительность сеансов XDMCP, особенно в сетях с большими задержками, так как часть операций может быть выполнена без выполнения запросов по сети.
Однако, этот режим может существенно увеличить нагрузку на машину, обслуживающую сеансы XDMCP.
За деталями настройки этой возможности смотрите описание параметров
MaxPendingIndirect
MaxPendingIndirect=4
Одновременно GDM предоставляет
PingIntervalSeconds=15
Интервал посыла пакетов ping X серверу. Если X сервер не вернул ответ на предыдущий ping по истечении интервала, то соединение с ним прекращается и все сеансы завершаются. Это комбинация параметров XDM PingInterval и PingTimeout, но в секундах.
ProxyReconnect
FlexiProxyReconnect=
Установка этой опции разрешает экспериментальную поддержку миграции сеанса между сеансами XDMCP, что позволяет пользователю отключится, а затем подключится к тому же сеансу, возможно, с другого терминала.
Чтобы использовать эту возможность необходимо иметь связанный X сервер, поддерживающий отсоединение от родительского X сервера и присоединение к другому X серверу. В настоящее время в какой-то степени этот режим поддерживает Распределённый многопотоковый X сервер (DMX) и другие проекты, например NoMachine NX, но этот режим достаточно сложен в реализации.
Значение этого параметра должно соответствовать пути команды, которая пересоединит XDMCP прокси к другому дисплею. Поддерживается первоначальная реализация этого механихма для работы с DMX.
ProxyXServer
ProxyXServer=
Команда X сервера для запуска XDMCP прокси. Любые связанные X сервера, например: Xnest или Xdmx, должны работать достаточно хорошо.
Эти файлы по умолчанию устанавливаются в