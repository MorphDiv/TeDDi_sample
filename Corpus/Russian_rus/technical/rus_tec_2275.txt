# language_name_wals:	Russian
# language_name_glotto:	Russian
# iso639_3:	rus
# year_composed:	NA
# year_published:	NA
# mode:	written
# genre_broad:	technical
# genre_narrow:	NA
# writing_system:	Cyrl
# special_characters:	NA
# short_description:	KDEdoc
# source:	https://object.pouta.csc.fi/OPUS-KDEdoc/v1/raw/ru.zip
# copyright_short:	http://opus.nlpl.eu/KDEdoc.php
# copyright_long:	http://opus.nlpl.eu/KDEdoc.php J. Tiedemann, 2012, Parallel Data, Tools and Interfaces in OPUS. In Proceedings of the 8th International Conference on Language Resources and Evaluation (LREC 2012)
# sample_type:	whole
# comments:	NA

Справочное руководство по kppp
Разрешается копировать, распространять и / или изменять этот документ на условиях лицензии GNU для свободной документации, версии 1.1 или более поздней, опубликованной Фондом Free Software Foundation; без неизменямых разделов, без текста на первой странице, без текста на последней странице. Копия лицензии находится здесь.
kppp - это программа дозвона и графический интерфейс для демона ppp, позволяющая интерактивно генерировать скрипты и настраивать сеть.
Введение
kppp - это программа дозвона и графический интерфейс для демона ppp, позволяющая интерактивно генерировать скрипты и настраивать сеть. Она автоматизирует процесс дозвона до вашего Интернет-провайдера, а также позволяет вам легко управлять всем процессом.
kppp предоставляет в ваше распоряжение богатый набор статистических средств и ведет учет времени, проведенного вами в Интернете.
Встроенные терминал и генератор скриптов делают настройку соединения простой. Далее вам не понадобятся дополнительные терминальные программы, такие как seyon и minicom для настройки и проверки соединений.
В функции kppp входит учет стоимости телефонных звонков, так что вы сможете сами вести учет своих расходов на пребывание в Интернете.
Мы надеемся, что вам понравится наша программа дозвона и что благодаря ей вам станет проще работать в Интернете.
Простое подключение
Перед тем, как вы начнете...
Если на вашем компьютере установлена свежая версия ОС Linux, вы можете счесть этот документ ненужным. Программа kppp включает в себя мастер настройки, который в большинстве случаев настроит работоспособное соединение с Интернетом за несколько минут.
Вне зависимости от того, используете вы мастера или нет, вам понадобится следующая информация перед тем, как вы начнете:
Телефонный номер модемного пула вашего Интернет-провайдера.
Имя пользователя и пароль, предоставленные вашим Интернет-провайдером.
Адрес DNS -сервера вашего Интернет-провайдера (одного адреса достаточно, но предпочтительнее иметь два).
А также дополнительные сведения, которые дадут вам полный доступ к сервисам вашего Интернет-провайдера:
Адреса серверов входящей почты (часто это pop.ваш_провайдер.ru или mail.ваш_провайдер.ru)
Узнайте также, поддерживает ли ваш Интернет-провайдер протоколы POP3 или IMAP.
Адреса серверов исходящей почты (SMTP) (могут совпадать с серверами входящей почты или же называются примерно так: smtp.ваш_провайдер.ru).
Адрес NNTP -сервера групп новостей Usenet (возможно news.ваш_провайдер.ru или nntp.ваш_провайдер.ru).
Прокси-сервера вашего Интернет-провайдера (если таковые имеются).
Вполне вероятно, что эти сведения будут предоставлены вам вашим Интернет-провайдером в письменном виде после подписания контракта, или же вы можете получить их, обратившись в службу технической поддержки вашего Интернет-провайдера.
Получив эти сведения, а также установив на свой компьютер свежую версию ОС Linux, вы можете легко настроить соединение с Интернет с помощью мастера подключения kppp.
Мастер подключения kppp
Запуск мастера подключения.
Вы можете запустить мастера подключения из начального экрана kppp. Запустите kppp из K -меню: программа находится в разделе Интернет под названием Подключение к Интернету.
Появится следующий диалог:
Начальный экран программы дозвона kppp
Скорее всего, начальный экран не содержит ни одной записи, и для начала нам придется создать хотя бы одну.
Нажмите кнопку Настройка для создания нового соединения с Интернет.
Мастер подключения предложит вам нажать одну из трех кнопок: Мастер подключения, Диалоговая настройка и Отмена
Мастер подключения задаст вам вопрос о том, что вы хотите сделать
Отмена
Нажмите на эту кнопку, если вы действительно не хотите создавать соединение в данный момент. Окно сообщения будет убрано с экрана, останется только окно программы дозвона.
Мастер подключения
Если в вашем распоряжении находится современный модем и вы используете одного из крупнейших Интернет-провайдеров в вашей стране, то, скорее всего, мастер подключения тут же настроит ваше соединение. В любом случае, перед ручной настройкой попытайтесь использовать мастера подключения.
Диалоговая настройка
Если вы не преуспели в создании соединения с помощью мастера подключения или же хотите настроить соединение сами, нажмите на эту кнопку. На данный момент использовать мастер подключения целесообразно людям в небольшом количестве стран (и для ограниченного числа Интернет-провайдеров).
В этом разделе мы рассмотрим подключение с использованием Мастера подключения, диалоговая же настройка будет описана позднее.
Мастер подключения: оставшиеся шаги
Начальный экран содержит вступительный текст, поясняющий те вещи, о которых вы прочли в самом начале руководства. Нажмите на кнопку Далее, чтобы продолжить.
На следующем экране вам будет предложено указать вашу страну. Не все страны перечислены в списке, и если ваша страна отсутствует, то нажмите на кнопку Отмена, - - в этом случае будет запущена Диалоговая настройка.
На следующем экране будет показан список Интернет-провайдеров, известных kppp для страны, выбранной вами этапом раньше. Если ваш Интернет-провайдер не указан в списке, нажмите на кнопку Отмена и настройте соединение в режиме Диалоговой настройки
Вам будет предложено ввести ваши имя пользователя и пароль для соединения с Интернет. Обратите внимание, что у некоторых Интернет-провайдеров имя пользователя и пароль на доступотличны от имени пользователя почтового ящика и его пароля - - будьте внимательны! Нажмите на кнопку Далее для продолжения.
В следующем диалоге вы можете ввести префиксы дозвона (если таковые применяются), например, если вам необходимо набрать 0 для доступа на внешнюю линию, или если у вас есть префикс для отключения режима ожидания. Нажмите на кнопку Далее для продолжения.
Вот и все! Если вы хотите перепроверить введенные данные, то используйте кнопки Назад и Далее для перемещения по диалогам. По завершении проверки нажмите на кнопку Завершить для окончания настройки.
Конечно же, любая информация может быть изменена позднее, через диалог настройки kppp.
Диалоговая настройка соединения
Диалоговая настройка соединения ненамного сложнее настройки с применением мастера.
Диалоговая настройка запускается точно так же, как и мастер подключения. Запустите kppp из K -меню: программа находится в разделе Интернет под названием Подключение к Интернету.
Появится следующий диалог:
Начальный экран программы дозвона kppp
Скорее всего, начальный экран не содержит ни одной записи, и для начала нам придется создать хотя бы одну.
Нажмите кнопку Настройка для создания нового соединения с Интернет.
На сей раз нажмите на кнопку Диалоговая настройка, и вы увидите следующий диалог:
Диалог Новое соединение
Диалог Новое соединение содержит следующие разделы:
Дозвон
IP -адрес
Шлюз
DNS -сервер
Скрипт логина
Выполнить
Статистика
Как правило, вам не потребуется заполнение всех разделов целиком, тем не менее, каждый из разделов детально описан далее.
Вкладка Дозвон
Вкладка Дозвон в разделе Соединения
На вкладке Дозвон находятся следующие опции:
Название соединения:
Любому соединению должно быть дано название. Назовите его по своему усмотрению, но названия должны быть уникальными, если вы настраиваете более одного соединения.
Номер телефона:
Укажите номер телефона для дозвона. Вы можете использовать символы, такие как -, для лучшей читаемости номера. Если вы укажете несколько номеров, разделенных двоеточием (например, 1111111:2222222:3333333, то kppp при получении сигнала Занято начнет дозвон по следующему в последовательности номеру. Нажмите на кнопку Добавить для добавления номера, кнопку Удалить - - для удаления номера из списка, а стрелки вверх и вниз используйте для изменения порядка дозвона.
Протокол авторизации
Выберите соответствующий способ авторизации, который kppp будет использовать при регистрации на сервере. За дополнительными сведениями обратитесь к вашему провайдеру. Использование PAP и CHAP описывается в разделе.
Сохранить пароль
Отметьте этот флажок, если хотите, чтобы kppp сохранил ваш пароль.
Ручная настройка демона ррр...
При нажатии на эту кнопку появится диалог настройки аргументов демона ppp. В этом диалоге вы можете указать желаемые опции, которые kppp передаст демону ppp. На man-странице демона ppp вы найдете список доступных опций, однако вы должны иметь четкое представление о том, что делаете, в противном случае, воздержитесь от манипулирования аргументами.
Вкладка IP
Вкладка IP в разделе Соединения
Динамический IP-адрес
Отметьте этот флажок, если ваш Интернет-провайдер использует динамическую IP -адресацию. В этом случае при каждом соединении с провайдером вашему компьютеру будет присваиваться новый IP -адрес.
Статический IP адрес
Отметьте этот флажок, если ваш Интернет-провайдер выделил вам статический IP -адрес. В этом случае пропишите этот адрес в поле IP-адрес и укажите Маску подсети, если таковая необходима. Проконсультируйтесь у вашего Интернет-провайдера, если не знаете точно. Подавляющее большинство Интернет-провайдеров используют динамическое присваивание адресов, и в большинстве случаев правильным будет использование динамического IP -адреса.
Автоконфигурация имени хоста с этого IP-адреса
Отметьте эту опцию, если вы хотите, чтобы программа kppp настроила домен и имя хоста для вашего компьютера после установления ppp - соединения.
Автоконфигурация имени хоста происходит путем запроса сервера доменных имен об имени, присвоенном IP -адресу данного ppp -соединения.
Эта опция необходима для одиночных компьютеров, которым необходимо использвование таких протоколов, как talk, и для которых имя хоста должно совпадать с названием компьютера в Интернет. Эта опция изменяет значение опции Доменное имя в разделе DNS; установки принимают значения по умолчанию по прекращении ppp -соединения.
Эта опция НЕ нужна, если вам необходимо просто подключиться к Интернету, получить почту, войти в чат или же просмотреть содержимое WWW-страниц. Побочным эффектом использования этой опции является невозможность подключения к Х-серверу, иными словами, вы не сможете запустить ни одно приложение с графическим интерфейсом.
Отметьте в том случае, если это вам необходимо
Вкладка Шлюз
Вкладка Шлюз в разделе Соединения
Шлюз по умолчанию
Отметьте для назначения демону ppp статуса шлюза по умолчанию. По умолчанию эта опция включена.
Статический шлюз
Отметьте для назначения к использованию шлюза, отличного от заданного по умолчанию.
Назначить шлюз маршрутом по умолчанию
В большинстве случаев оставьте без изменений (отмечено по умолчанию)
Вкладка DNS
Вкладка DNS в разделе Соединения
Доменное имя:
Укажите доменное имя вашего компьютера. Также как и в случае серверов DNS, оно вернется к начальному значению, указанному в файле / etc / resolv.conf, после разъединения. Если это поле не будет заполнено, доменное имя будет взято из файла / etc / resolv.conf
Настройка:
Выберите способ: Автоматически (Интернет-провайдер автоматически назначает адрес сервера DNS при соединении) и Вручную. Если вы выбирете ручную настройку, становится доступным раздел IP-адрес сервера DNS.
IP-адрес сервера DNS
Этот раздел доступен в том случае, если вы отметили опцию настройки Вручную. Добавьте сервера доменных имен, назначенные вашим Интернет-провайдером. Вам необходимо указать, как минимум, один сервер доменных имен, чтобы ваша ОС могла переводить в IP -адреса имена доменов, к примеру, ftp.kde.org. Адреса серверов DNS должны быть заданы в численном виде, например, 128.231.231.233. Во время исполнения программы эти адреса будут добавлены в файл / etc / resolv.conf.
Нажмите на кнопку Добавить для добавления адреса нового DNS -сервера к списку. Нажмите на кнопку Удалить для удаления из списка.
Игнорировать заданные сервера DNS во время соединения
Если вы отметите эту опцию, то все сервера DNS, перечисленные в файле / etc / resolv.conf будут проигнорированы в течение данного сеанса связи.
Вкладка Скрипт логина
Вкладка Скрипт логина в разделе Соединения
Этот диалог предназначен для создания скрипта дозвона для соединения с вашим Интернет-провайдером. Вы можете использовать мини-терминал и сведения, предоставленные вашим Интернет-провайдером, для создания необходимого скрипта.
Выберите опцию из раскрывающегося списка слева, а затем укажите параметры для выбранного действия в окне редактирования справа. Используйте кнопку Добавить для добавления записи в конец скрипта, который отображается в нижней части диалога. Используйте кнопку Вставить для вставки записи в любое место скрипта, а также кнопку Удалить для удаления строки из скрипта.
Доступные опции:
Ожидать
kppp будет ожидать получения заданной строки.
Отправить
kppp отправит заданную строку.
Сканировать
kppp будет сканировать входящий поток данных на предмет наличия заданной строки и сохранит все символы, начиная от конца строки и до начала новой, во внутреннем буфере. Символы пробелов как в начале строки, так и в конце будут игнорированы.
Сохранить
Постоянно хранить заранее просканированную строку в заданном регистре. На данный момент единственным доступным является регистр password.
Приостановить
Приостановить на заданное число секунд.
Повесить трубку
kppp отдаст модему команду повесить трубку.
Ответ
kppp установит модем в режим ответа.
Timeout
Изменить таймаут по умолчанию на заданное число секунд при выполнении скрипта. При необходимости можно изменять таймаут в скрипте несколько раз.
Prompt
Запросить у пользователя kppp ввод строки в ответ на заданную строку - подсказку. Набранные символы будут видны пользователю. Если в заданной строке содержится метка ##, в таком случае она будет заменена на содержимое внутреннего буфера сканирования, то есть на значение, сохраненное командой scan.
PWPrompt
Запросить у пользователя kppp ввод строки в ответ на заданную строку - подсказку. Каждый введенный пользователем символ будет отображен сиволом Звездочка.
Имя пользователя
Если поле Имя пользователя на главном экране kppp заполнено, - - отправить имя пользователя. Если поле Имя пользователя не заполнено, - - запросить пользователя kppp ввести имя пользователя в ответ на заданную строку - подсказку. Набранные символы будут отображены. На следующем шаге, например, в цикле повторения или же при авторизации в режиме обратного звонка, запрос будет выводиться вне зависимости от заполнения поля Имя пользователя.
Пароль
Если поле Пароль на главном экране kppp заполнено, - - отправить пароль. Если поле Пароль не заполнено, - - запросить пользователя kppp ввести пароль в ответ на заданную строку - подсказку. Каждый набранный символ будет отбражен символом Звездочка. На следующем шаге, например, в цикле повторения или же при авторизации в режиме обратного звонка, запрос будет выводиться вне зависимости от заполнения поля Пароль.
Начало цикла
kppp будет ожидать получения заданной строки и сохранит ее для использования переменной Конец цикла.
Конец цикла
kppp будет ожидать получения заданной строки для выхода из цикла. Если сперва будет получена строка, заданная как Начало цикла, это вызовет переход к к строке после Начала цикла и повторение парного диалога имя_пользователя / пароль.
Примеры скриптов
Пример простого скрипта логина
Ниже приведен пример простого скрипта, который можно использовать для подключения к Интернет-провайдеру
Скрипт логина, запрашивающий имя пользователя и пароль, а затем зацикливающийся.
Ниже приведен пример скрипта с запросом имени пользователя и пароля. Этот скрипт каждый раз запрашивает имя пользователя и пароль, вне зависимости от заполнения полей Имя пользователя и пароль на главном экране kppp.
Этот скрипт также поясняет применение структуры Начало цикла / Конец цикла. Если при процедуре логина происходит сбой, к примеру, при наборе пароля допущена ошибка, Интернет-провайдер выдаст сообщение об ошибке и повторно начнет цикл имя_пользователя / пароль, отправив строку ID:. Если строка ID: будет получена до обработки параметра Конец цикла, kppp начнет выполнение скрипта со строки с параметром Начало цикла.
Запрашивает сведения, не указанные в основном диалоге.
Я использую этот скрипт для подключения к своему Интернет-провайдеру. Скрипт запрашивает имя пользователя и пароль только в том случае, если я не заполнил соответствующие графы в главном диалоге kppp.
Скрипт для соединения с Интернет-провайдером, использующим авторизацию с ответами на запросы.
Вот скрипт, который я использую для подключения к Интернет-провайдеру, который требует авторизации с ответами на запросы. Обычно у вас есть устройство типа смарт-карты с дисплеем и калькулятором, предоставленное вам вашим Интернет-провайдером. Чтобы использовать его, вам необходимо знать пароль. Дозвонившись до провайдера, вы увидите запрос, который нужно будет ввести в устройство и получить динамический пароль на вход. Его вам и надо будет ввести.
Использование опций сканирования и сохранения в скриптах
В следующем логе приводится пример подключения к несуществующему Интернет-провайдеру, который изменяет пароль при каждом новом соединении. Новый пароль должен быть проверен и сохранен для использования при следующем соединении.
kppp выполнит всю эту работу вместо вас, при этом устранит риск потери клочка бумаги, на котором записан ваш пароль. Ключевым моментом следующего скрипта является использование комбинации опций Сканировать / Сохранить (Scan / Save).
Вкладка Выполнить
Вкладка Выполнить в разделе Соединения
Задайте команды для выполнения на разных этапах сеодинения. Все команды выполняются с вашими правами пользователя, поэтому вы не можете выполнить команды с root-привилегиями, разумеется, если не работаете в системе как root (что плохо по многим причинам!)
Убедитесь в правильности задания полного пути к програмее, иначе kppp не сможет ее найти.
Вы можете добавить команды, которые могут быть выполнены в четыре заданных момента времени в процессе соединения:
Перед установлением соединения
Выполнить эту команду перед дозвоном; к моменту соединения с вашим Интернет-провайдером команда уже будет выполняться.
При установлении соединения
Выполнить команду только при установлении соединения.
Перед разъединением
Выполнить команду перед разъединением.
После разъединения
Выполнить команду после разъединения.
К примеру, вам может понадобиться выполнить программу leafnode как только соединение будет установлено, или же вам необходимо проверить почту. Вы можете проверить, вся ли почта из очереди была отправлена перед разъединением. Вам может понадобиться скрипт очистки логов и кэша после разъединения.
Вкладка Учет
Вкладка Учет в разделе Соединения
Отметьте опцию Включить учет для включения или же отключения возможности учета стоимости телефонных звонков для этого соединения.
Выберите из списка правило, соответствующее вашему провайдеру телекоммуникационных услуг.
Если вы не нашли ни одного подходящего, в таком случае вы можете написать свое правило на основе шаблона, который приведен в приложении.
Последней опцией в этом разделе является Учет трафика, описанный ниже.
Учет трафика
Что такое учет трафика?
Учет трафика состоит в подсчете количества переданных и полученных байт. kppp может вести учет как переданных, так и полученных байт, или же обоих вместе. Выбор учета зависит от вас.
Для чего я должен использовать учет трафика?
Многие Интернет-провайдеры выставляют счет за свои услуги на основе количества использованного трафика. Причем, чаще всего, Интернет-провайдеры предлагают фиксированную оплату до определенного значения трафика, каждый же последующий мегабайт должен быть оплачен. kppp отображает текущее состояние трафика и поможет вам минимизировать счета за услуги. И, конечно же, если счет за услуги не зависит от трафика, вы можете использовать его для удовлетворения собственного любопытства.
Какой тип учета трафика я должен выбрать?
Это зависит от вашего провайдера. Большинство провайдеров ведут учет полученных из Интернета данных и игнорируют исходящий трафик. В таком случае вы должны использовать Входящий трафик. Если вы оплачиваете весь трафик, выберите Входящий и исходящий трафик. Исходящий трафик приведен в программе для полноты, так как провайдер с таким типом учета пока не известен. Эта опция может оказаться полезной, если вы используете WWW - или FTP -сервер дома.
Недостатки
К сожалению, учет трафика имеет и свои недостатки. kppp считает только количество трафика, вне зависимости от его происхождения. Многие провайдеры устанавливают ограничения только на доступ в Интернет, а не для трафика в их собственной сети. У некоторых провайдеров существуют различные ограничения на трафик в собственной сети, трафик по стране и весь остальной трафик. Если вы мало путешествуете по сети, по большей части используя страницы из кэша прокси-сервера вашего Интернет-провайдера, в таком случае, скорее всего ваш провайдер не выставляет счет за это. kppp не определяет принадлежность IP -пакетов к прокси-серверу, поэтому они будут учтены. Если эта ситуация похожа на вашу или, другой пример, если ваш провайдер использует кэширование сервера новостей nntpcached, - - в таком случае, учтенный в kppp трафик может оказаться больше реального объема, подлежащего оплате. С другой строны, kppp никогда не преуменьшит ваши счета.
Общие настройки kppp
Сделанные здесь изменения действительны для всех соединений в kppp
Вкладка Соединения
Вкладка Соединения
Этот диалог предназначен для управления соединениями. Названия соединений приводятся в виде списка слева от диалога.
Для удаления соединения нажмите на кнопку Удалить. Перед окончательным удалением у вас будет запрошено подтверждение.
Вы можете создать копию соединения, нажав на кнопку Копировать. К примеру, это можно использовать для разделения доступа среди членов семьи, хотя, как правило, в таком случае лучше предоставить раздельный доступ к ОС каждому! Или же, у вас может быть несколько соединений с одним и тем же Интернет-провайдером, и вы используете их все.
Нажатие на кнопку Редактировать приведет к появлению диалога, описанного в разделе Диалоговая настройка, со сведениями для выбранного соединения.
Нажав на кнопку Новое соединение, вы сможете выбрать метод настройки: Мастер подключения или же Диалоговая настройка. Оба метода были описаны ранее.
Если вы выберете соединение, для которого включен Учет, в таком случае накопленные об этом соединении сведения появятся в двух панелях соответственно: Телефонные расходы: и Трафик:.
Слева от табло учета расположены две кнопки: Сброс и Просмотр логов.
Нажатие на кнопку Сброс вызовет сброс данных о Телефонных расходах: и Трафике: до значения 0. Как правило, это может понадобиться раз в месяц или в квартал, когда вы получите счет за телефон и оплатите расходы. Каждый из параметров может быть обнулен независимо от другого, вам будет предложено сделать выбор при нажатии на кнопку Сброс.
При нажатии на кнопку Просмотр логов откроется новое окно, с логом всех звонков, сделанных из kppp. Если вы сохраняли все логи, вы можете просматривать их помесячно. Это может оказаться полезным, если вы получили неправдоподобно большой счет за телефон и проводите расследование.
Вкладка Устройство
Вкладка Устройство
В этом разделе вы можете выбрать и настроить ваш модем.
Модем
Выберите соответствующее устройство.
/dev / ttys0
В ОС DOS или Windows это устройство соответствует COM1, COM2 - - / dev / ttys1, и так далее. Обычно именно эти устройства используются в ОС Linux.
/dev / cua0
Первый последовательный порт (COM1).
COM2 обычно называется / dev / cua1 и так далее. Эти устройства обычно применяются в BSD-системах:
/dev / ttyI0
В ОС Linux так называюстя внутренние ISDN -платы. Эти устройства эмулируют Hayes-совместимые модемы. / dev / ttyI0 - - первая плата, / dev / ttyI1 - - вторая ISDN -плата и так далее. Эти устройства доступны только в ОС Linux.
/dev / modem
Большинство дистрибутивов ОС Linux создают символическую ссылку на реальное модемное устройство: / dev / modem. Избегайте использовать ссылку.. Используйте реальное устройство.
Управление потоком
Выберите аппаратное (CRTSCTS) или программное (XON / XOFF) управление потоком, или же отключите его. Рекомендуется использовать аппаратное управление потоком.
Окончание строки
Выберите соответствующий символ Enter для вашего модема. Большинство модемов используют символы CR / LF, тогда как для некоторых модемов может понадобиться другая строка. Если при выполнении скрипта возникают проблемы, попробуйте изменить этот параметр.
Скорость соединения
Выберите скорость соединения, соответствующую вашему последовательному порту, из списка. Обратите внимание на то, что последовательный порт поддерживает куда большую скорость, нежели модем. Возможно, имеет смысл начать с выбора максимальной скорости и уменьшать ее в случае возникновения проблем при попытке соединения.
Использовать файл блокировки модема
Используйте эту опцию, если хотите, чтобы kppp создал файл блокировки. В Linux каталог для таких фалов: / var / lock. Поведение программ, таких как mgetty, зависит от существования файлов блокировки, поэтому kppp не может работать совместно с mgetty, если опция файла блокировки выключена. Убедитесь, что вы не используете опцию lock для демона ppp, если хотите, чтобы kppp заблокировала модем, так как в демоне ppp опция lock указывает демону ppp попытаться заблокировать модем. Так как kppp уже заблокирует устройство, демон ppp вернет ошибку, а kppp выдаст сообщение об ошибке: демон ppp неожиданно прекратил выполнение.
Таймаут модема
Показывает, сколько секунд kppp будет ожидать от модема ответа CONNECT. Значение таймаута, равное 30 секундам, является наиболее универсальным.
Вкладка Модем
Вкладка Модем
Ожидание при состоянии Занято
Время после получения сигнала Занято, через которое модем будет пытаться соединиться повторно. Примите во внимание ограничения вашего провайдера телекоммуникационных услуг на значение этого параметра.
Громкость динамика модема
Используйте ползунок для установки громкости динамика модема. По мере смещения вправо громкость увеличивается. Для некоторых модемов низший уровень громкости соответствует выключению звука, а для других средний и высший уровень - - одно и то же.
Команды модема
В этом диалоге вы можете задать соответствующие вашему модему команды. Если у вас Hayes-совместимый модем, скорее всего, вам не понадобится менять заданные по умолчанию значения, тем не менее, прочитайте главу Команды для Hayes-совместимых модемов в этом файле. Приведенные там сведения могут оказаться очень полезными при отладке проблем с настройкой стабильного соединения с вашим Интернет-провайдером. В частности, параметры Задержка до инициализации и Задержка после инициализации помогут решить проблемы с подвисанием модема. Эти параметры указывают kppp сделать паузу перед отправкой строки инициализации модему и после нее. Параметр Задержка до инициализации также отправляет по умолчанию символ возврата каретки (CR), если вы не установили интервал задержки в значение 0.
Опрос модема
При нажатии на эту кнопку kppp пошлет модему запрос на идентификацию. При успешной обработке запроса результат будет отображен в диалоге. В зависимости от модели модема, опрос может содержать ценные сведения.
Терминал
Нажатие на кнопку Терминал вызывает окно мини-терминала. Вы можете использовать мини-терминал для тестирования модема и экспериментирования с протоколами установки ppp - соединения с вашим Интернет-провайдером. Вам не понадобятся такие терминальные программы как minicom или Seyon.
Вкладка График
Вкладка График
Здесь вы можете установить цвета, которвые kppp использует для графиков. Вы можете установить разные цвета для Фона, Текста, Входящих байт и Исходящих байт.
Вкладка Разное
Вкладка Разное
Приведенные здесь опции не относятся к входящим в этот раздел, тем не менее, они могут оказаться весьма полезными.
Версия демона ррр
Таймаут демона
kppp будет ожидать заданное количество времени после выполнения скрипта и запуска демона ppp до установки демоном ppp ppp -соединения, если таковое не было установлено процесс демона ppp будет прекращен.
Встроить в панель при установлении соединения
Если эта опция выбрана, kppp будет встроен в панель и отображен маленькой иконкой. Щелчок левой кнопкой мыши по иконке восстановит окно kppp. Щелчок правой кнопкой мыши вызовет всплывающее меню со следующим выбором: восстановить окно, показать статистику или разъединиться. Эта опция отменяет опцию Свернуть окно при соединении.
Автодозвон при разъединении
Если эта опция выбрана, то в случае разъединения kppp постарается соединиться заново.
Показывать время в строке заголовка
kppp будет отображать время длительности соединения в строке заголовка окна kppp в течение всего сеанса связи.
Разъединиться при остановке X-сервера
Выбор этой опции указывает kppp по порядку завершить ppp -соединение, разъединить модем и завершить учет при останове X-сервера. Это может оказаться полезным, если вы забудете о том, что находитесь в Интернете, когда остановите процесс X-сервера или если не хотите завершать завершать сеанс связи вручную. Если вы не хотите, чтобы kppp указывал модему повесить трубку при остановке X-сервера, оставьте эту опцию неотмеченной. Если у вас включен режим учета и вы не включили эту опцию, в таком случае ведение учета продолжается с момента останова X-сервера до завершения работы kppp.
Выход при разъединении
Свернуть окно при соединении
Если эта опция отмечена, при установлении соединения окно kppp будет свернуто. Время соединения будет отображено в панели задач.
Вкладка О программе
Вкладка О программе содержит информацию о версии, лицензии и авторе программы kppp.
kppp и безопасность
В основном этот раздел предназначен для суперпользователей (root), людей с высокими потребностями в безопасности и тех, кто просто интересуется безопасностью. Нет необходимости в прочтении этого материала тем, кто использует Linux дома, тем не менее, кое-какие знания можно почерпнуть и отсюда.
Запрет на доступ к kppp
Системный администратор может ограничить доступ на использование kppp. Существует два способа для достижения этого.
Разрешение на доступ на уровне привилегий группы
Создайте новую группу (назовите ее, к примеру, dialout или как-нибудь в этом роде) и добавляйте в нее тех пользователей, кому разрешено использовать kppp. Затем наберите в командной строке:
Здесь подразумевается, что KDE установлена в каталог / opt / kde / и что новая группа называется dialout.
Запрет на доступ с непосредственным использованием kppp
С самого начала kppp проверяет, существует ли файл / etc / kppp.allow. Если такой файл существует, только перечисленные в нем пользователи могут использовать программу. Этот файл должен быть открыт для всех на чтение (но, конечно, НЕ запись.) Распознаваемыми являются только имена пользователей, вы не можете использовть UID в этом файле. Короткий пример:
В приведенном примере только пользователи fred, karl и daisy могут использовать программу, а так же пользователи с UID 0 (нет необходимости добавлять суперпользователя в этот файл).
У kppp присутствует SUID -бит. А безопасность?
Представляется невозможным написать программу дозвона без использования SUID -бита, безопасную и простую в использовании неопытными пользователями. В плане безопасности kppp использует следующую стратегию.
Процессы программы kppp разветвляются в самом начале выполнения программы.
Головной процесс, ответственный за операции с GUI (такие как взаимодействие с пользователем), выходит из состояния SUID после разветвления и выполняется с привилегиями обычного пользователя.
Порожденный процесс сохраняет привилегии и отвечает за все действия, которым нужны привилегии суперпользователя. Для обеспечения безопасности этой части, в ней не используются вызовы библиотек KDE и Qt, а только вызовы обычных библиотек. Исходный код этого процесса короток (около 500 строк) и хорошо документирован, его легко проверить на наличие дыр в безопасности.
Головной и порожденный процессы взаимодействуют согласно стандартному IPC (взаимодействие процессов) ОС UNIX.
Особая благодарность выражается Harri Porten за написание этого замечательного участка программы. Задача казалась невыполнимой, но он сумел решить ее за одну неделю.
PAP и CHAP
Начиная с номера версии 0.9.1, kppp поддерживает наиболее распространенную форму авторизации - PAP.
PAP в kppp
Два различных способа использования PAP.
Авторизация клиента
Этот способ используется многими коммерческими Интернет-провайдерами. Это означает, что вы (ваш компьютер) должен представиться PPP -серверу Интернет-провайдера.
PPP -сервер не должен представляться вашему компьютеру. К вопросам безопасности это не относится, так как вы должны знать, куда происходит подключение.
Если ваш Интернет-провайдер, назначая вам имя пользователя и пароль, просит вас использовать PAP -авторизацию, вы должны использовать именно этот способ.
Двусторонняя авторизация
Аналогично вышеприведенному, но в этом случае ваш компьютер запрашивает PPP -сервер Интернет-провайдера представиться. Для осуществления соединения вы должны выбрать метод авторизации На основе скрипта, а не PAP, а также вручну отредактировать файл / etc / ppp / pap-secrets. Несмотря на то, что у kppp нет встроенной поддержки этого способа, установить соединение легко.
Подготовка kppp для использования PAP
Убедитесь, что файл / etc / ppp / options (и / .ppprc, если таковый существует) НЕ содержит ни одного из нижеперечисленных аргументов:
+pap
-pap
papcrypt
+chap
+chap
+ua
remotename
Маловероятно, что какая-нибудь из приведенных опций будет включена, но на всякий случай проверьте.
Запустите kppp
Нажмите кнопку Настройка
Выберите соединение, с которым вы намерены использовать PAP и нажмите кнопку Редактировать
Выберите вкладку Дозвон
Выберите PAP разворачивающемся списке Авторизация.
Если каждый раз при соединении вы не хотите набирать пароль заново, то выберите Сохранить пароль. Этим вы сохраните пароль в файле, поэтому убедитесь, что никто кроме вас не использует ваш доступ в систему.
Вот и все. Закройте все диалоги, наберите имя пользователя и пароль, назначенные вам Интернет-провайдером и нажмите на кнопку Соединиться.
Альтернативный метод использования PAP и CHAP в программе kppp
Этот раздел основан на письме Keith Brown kbrown@pdq.net и поясняет работу kppp с обычным PAP или CHAP соединениями. Если ваш Интернет-провайдер присвоил вам имя пользователя и пароль для соединения, то можете пропустить этот раздел и использовать инструкции, приведенные выше.
На первый взгляд PAP кажется сложнее, чем на самом деле. Сервер (компьютер, к которому происходит подключение) указывает клиенту (вашему компьютеру) идентифицировать себя с использованием PAP. Клиент (демон ppp) ищет в специальном файле запись с указанием соответствующего имени сервера и имени клиента для этого соединения, а затем отправляет найденный там же пароль. Вот и все!
Вот как это осуществить. Предположительно, у вас установлен демон ppp версии 2.2.x или выше; установка - - стандартная, файлы конфигурации находятся в каталоге / etc / ppp.
К примеру, вы пользуетесь услугами Интернет-провайдера glob.net, ваше имя пользователя - - userbaz, а ваш пароль - - foobar
Для начала вам необходимо добавить нижеследующее к файлу / etc / ppp / pap-secrets. Формат записи таков:
Добавьте следующую строку к файлу / etc / ppp / pap-secrets и сохраните файл:
Вы можете указать любое имя сервера, так как вы используете то же самое имя в аргументах демона ppp, как вы вскоре увидите. В примере мы указали сокращенное имя glob, которое используется для определения правильного пароля.
Далее вам нужно настроить соединение в kppp. Это делается точно так же, как и любое другое соединение, поэтому вдаваться в детали мы не будем, разве что оговорим, что файл / etc / ppp / options пуст и вам не нужно создавать скрипт логина.
В диалоге настройки kppp, внизу на вкладке Дозвон есть кнопка аргументы демона ррр. Нажатие вызовет диалог редактирования. Вы можете указать значения, которые будут отправлены демону ppp в виде аргументов командной строки, а в случае аргументов множественных значений каждое значение должно быть указано отдельно от других, в необходимом порядке.
Сперва задайте аргументы, которые вы используете. Затем добавьте аргументы, которые демон ppp использует для осуществления PAP -авторизации. В этом примере мы добавим user, userbaz, remotename и glob по порядку.
Опция user указывает демону ppp, какое имя пользователя из файла pap-secrets следуте отправить серверу. Имя удаленного компьютера задается демону ppp для соответствия с записью в файле pap-secrets, таким образом, вы можете задать любое значение с условием его совпадения с записью в файле pap-secrets.
Вот и все, теперь вы настроили соединение с сервером, использующим PAP - авторизацию.
CHAP -авторизация не сильно отлична. В Linux Network Administrators Guide вы найдете описания формата файла chap-secrets и используемых аргументов демона ppp, а все остальное окажется простым.
Тонкости работы с модемом
Этот раздел предназначен для того, чтобы дать представление об искусстве работы с модемом. Все команды, которые здесь описываются, относятся к стандарту Hayes AT и к стандартному Hayes-совместимому модему. Однако не все модемы одинаковы, и ваш случай может отличаться от изложенного.
Сеанс связи с модемом
Схемы настроек модема
Вы можете захотеть сохранить различные схемы настроек модема, а не вводить команды заново при каждом соединении. Это можно осуществить, записав их в память модема, и именно для этого вам понадобится работать непосредственно в сеансе связи с модемом. У модема может быть несколько сохраненных схем под номерами 0, 1 и т.д. Командой AT&V вы можете просмотреть их все. Обычно схема по умолчанию - - это 0 (ее можно изменить командой AT&Y). Текущая схема, с которой работает модем, называется активной.
Если вы хотите сбросить установки модема в некоторое начальное состояние, выполните команду AT&F&W, которая восстановит заводские настройки модема и сохранит их в качестве схемы по умолчанию.
Примеры изменения схемы модема см. в следующем разделе.
Как заставить модем повесить трубку
Может случиться так, что модем никак не хочет вешать трубку. Это чаще всего происходит из-за несоответствия настроек kppp и модема. У стандартного модема есть два метода повесить трубку: Командный и DTR. В командном методе модему отправляется ESC-последовательность, которая переводит модем в командный режим, а затем выполняется команда повесить трубку (ATH).
Если вы настраиваете демон ppp вручную, не используя kppp, чаще всего имеет смысл использовать командный метод для завершения терминального сеанса и запуска демона ppp. В других случаях более подходит метод DTR, так как он проще.
Метод DTR (AT&Dn)
В методе DTR модем вешает трубку, как только kppp завершает использование модема. Если в сеансе связи с модемом вы опрашиваете модем командой AT&V и в настройках активной схемы видите &D0, это значит, что метод DTR отключен. Чтобы включить метод DTR, нажмите на кнопку Терминал для начала сеанса связи с модемом, а затем наберите:
Как работает метод DTR
Всякий раз, когда сигнал Data Terminal Ready (DTR) на линии между компьютером и модемом возрастает выше определенного предела, модем вешает трубку. Когда kppp открывает последовательный порт, сигнал DTR понижается, и на внешнем модеме вы можете видеть, как зажигается лампочка DTR (или TR). Когда лампочка TR гаснет, поскольку kppp закрыл последовательный порт (или по еще более худшей причине), модем вешает трубку.
Командный метод
Используйте ползунок Защитный интервал в разделе Команды модема для установки значения регистра S12 равным 5. После этого модем будет вешать трубку корректно.
Как работает командный метод
Когда локальный модем подключен к удаленному модему, он находится в режиме соединения (connect) и передает все получаемые им символы удаленному модему. Для того, чтобы модем воспринял символы как команду себе, его нужно перевести в командный режим. Это осуществляется ESC-кодом.
ESC-код - это три сигнала, длительность которых задается регистром S12 (в пятидесятых долях секунды).
отсутствие сигнала в течение времени дольше, чем S12 / 50 сек
три подряд символа ESC (который задается в регистре S2, значение по умолчанию - - +), повторенные с интервалами менее S12 / 50 сек каждый.
отсутствие сигнала в течение времени дольше, чем S12 / 50 сек
Как только модем войдет в командный режим, вы можете отправлять ему команды. Для того, чтобы повесить трубку, отправьте команду ATH. ЕSC-коды и команда модему повесить трубку, используемые в kppp, указываются в диалоге Команды модема. Они должны соответствовать вашему модему.
Как ускорить режим тонального набора номера
В тональном режиме время набора задается регистром S11. В нем записывается длительность (в сотых долях секунды) отправки каждого тонального сигнала во время дозвона. Значением по умолчанию, как правило, является 95 (почти секунда). Быстрота набора номера зависит от качества телефонного коммутатора на вашей телефонной станции. Минимальное значение - - 50, почти в два раза быстрее, и часто оно срабатывает.
Настройка kppp на режим обратного звонка
Сервер обратного звонка под управлением ОС UNIX или Linux
В этом разделе рассказывается об обратном звонке в ОС UNIX (Linux) и о том, как kppp должна быть настроена для соединения с сервером обратного звонка под управлением ОС UNIX особое внимание уделяется ОС Linux и ее серверу обратного звонка на основе скриптов.
Что такое Обратный звонок
Для использования Обратного звонка есть несколько причин. Вот некоторые из них:
Для увеличения безопасности вашей локальной сети
Для сокращения расходов ваших сотрудников, звонящих извне
Для контроля стоимости телефонных звонков, по статье организационных расходов:
Представьте себе, что некто дозвонился на ваш сервер входящих звонков и взломал пароль доступа. Зачем же, в таком случае, конфигурировать брандмауэр для вашей сети, если можно таким простым способом получить к ней доступ?
Программное обеспечение обратного звонка запрашивает ваше имя, а затем разъединяется. Далее производится звонок по вашему номеру, который хранится в базе данных на сервере. Клиент поднимает трубку и продолжается процедура установления соединения, если не возникло сбоев. Сервер запрашивает ваше имя пользователя и пароль, зная, что звонили вы (согласно вашему звонку), или же зная, откуда вы звонили. Устанавливается соединение и запускается демон ppp.
Вопрос: как указать клиенту поднять трубку, когда сервер перезванивает ему. Нужна ли специальная программа типа mgetty? Ответ: нет, вам не понадобится специальная программа. В общем, любой клиент может быть использован при соединении с обратным звонком, вы можете использовать даже обыкновенную терминальную программу: minicom, к примеру.
Вам только надо отдать модему команду Ответить автоматически на телефонный звонок при поступлении сигнала RING. Для этого задайте модему следующую команду:
Эта команда указывает модему поднять трубку после одного звонка (RING).
Подобно большинству других программ-клиентов, kppp проверяет, не прекращено ли соединение сервером, а затем закрывает текущую сессию, если определен сигнал NO CARRIER. Это является настоящей проблемой при настройке обратного звонка. Сигнал NO CARRIER, конечно, будет получен в момент прекращения соединения сервером обратного звонка. Некоторые серверы используют специальные программы логина. Так как решить эту проблему? Укажите модему всегда показывать CARRIER UP (это не вызовет проблем при указании клиенту повесить трубку). Вы можете осуществить это следующей командой модему:
Если вам хочется проверить, как все это работает, используйте обыкновенную терминальную программу, например, minicom, позвоните на ваш сервер обратного звонка и посмотрите, что произойдет.
Настройка kppp
Теперь, когда вы увидели применение теории на практике, как настроить kppp для осуществления соединения?
Как показано, процедура весьма несложная.
Сперва укажите модему принимать входящие соединения, а не прерывать сессию установки соединения при разъединении с сервером обратного звонка при первом звонке. Обе эти опции можно добавить на вкладке Модем в настройках kppp, добавив в опцию Строка дозвона следующее:
AT&C0S0=1DT
Более никаких изменений в kppp не потребуется. Если у вас возникнут проблемы с инициализацией и сбросом установок модема, обратитесь к разделу Устранение неисправностей для получения более детальных сведений.
Не забудьте о сервере. Помните, что ОС UNIX, Windows и Macintosh по-разному обрабатывают концы строк в текстовых файлах и, таким образом, и в процедурах логина. Если вы подключаетесь к серверу под управлением ОС Windows, используйте CR / LF, для сервера под управлением ОС UNIX используйте CR, а при подключении к серверу Macintosh используйте LF
Следующие инструкции применимы к случаю дозвона на сервер обратного звонка под управлением ОС Linux с использованием обычной авторизации (не PAP или ей подобной).
Установите стиль Авторизация во вкладке Дозвон в конфигурации соединения в положение На основе скрипта
Сейчас вам надо создать скрипт логина. Редактирование скрипта логина являетсяодной из наиболее приятных функций программы kppp. Эта опция доступна на вкладке Скрипт логина в диалоге Редактирование соединения.
В этом примере пользователь userxyz должен вызвать следующий скрипт. Серверу обратного звонка уже задана таблица имен и соответствующие телефонные номера, в целях безопасности создать псевдоним для соответствующего вам номера телефона.
Для каждой строки выберите критерий из раскрывающегося списка в левой стороне диалога и введите действие в поле справа. Нажмите на кнопку Добавить для добавления строки в скрипт. Кнопкой Вставить добавляйте строки в середину скрипта, а кнопкой Удалить удаляйте строку, если в ней допущена ошибка.
Полностью скрипт будет выглядеть примерно так (без комментариев, начинающихся здесь с символа #)
После появления запроса на вход, пользователь отправляет свое имя пользователя и ожидает появления списка доступных этому пользователю телефонных номеров. Эатем он указывает серверу, по какому из предложенных номеров нужно произвести звонок. Для этого kppp может создать диалог, если вы часто переезжаете, к примеру, если вы являетесь агентом по продажам и переезжаете из гостиницы в гостиницу. Теперь сервер ожидает имя пользователя и пароль для авторизации, тем временем, сервер прерывает соединение и перезванивает пользователю. Данные для авторизации отправлены, kppp ожидает приглашения системы и запускает небольшой скрипт (здесь start_ppp), который запускает демон ppp на сервере.
Скрипт start_ppp выглядит примерно так, как показано ниже:
Конечно, настройка PPP -сервера выходит за рамки этого документа. Детальные сведения находятся на man-странице демона ppp. Замечательное описание сервера обратного звонка доступно по адресу: http: / /ap-dec717c.physik.uni-karlsruhe.de / ~mh / callback
Все остальные настройки, такие как настройка демона ppp или настройки IP -протокола будут работать нормально, и для дозвона вам не понадобятся другие программы.
Обратный звонок в kppp и другие программы типа mgetty или же faxgetty могут выполняться на одном последовательном порте. Проблем с дозвоном быть не должно, так как kppp создает файл блокировки и указывает программе getty, что другое приложение (в этом случае kppp) использует порт.
Устранение неисправностей
Известные проблемы с программой kppp, работающей в режиме обратного звонка:
Так как вы инициализируете модем для ответов на звонок, после разъединения нужно сбросить установки модема в начальное состояние. Иначе модем продолжит отвечать на звонки, что не так уж и хорошо, если рассмотренная телефонная линия является основной для вас.
У kppp есть мелкие недостатки, когда она использует одну линию наряду с другой программой, такой как mgetty. Если mgetty в процессе выполнения использует ту же линию, то kppp не может правильно инициализировать модем.
kppp не в состоянии запросить некоторый тип ввода во время логина на основе скрипта. К сожалению, при использовании примера скрипта, приведенного выше, kppp также запрашивает имя пользователя второй раз, при запросе сервера обратного звонка. От этого можно избавиться, если прописать ваше имя пользователя в скрипт логина (неудобно и некрасиво, зато срабатывает).
Ресурсы Интернета о серверном программном обеспечении
Программное обеспечение для сервера обратного звонка под управлением ОС Linux доступно во многих местах.
Хорошо известная мощная программа mgetty способна работать с соединениями по принципу обратного звонка. Описание настройки mgetty для этой цели находится по адресу http: / /www.dyer.demon.co.uk / slug / tipscrip.htm, написанное Colin McKinnon, colin@new.co.uk.
Существует готовый к использованию пакет для ОС Linux: http: / /www.icce.rug.nl / docs / programs / callback / callback.html. Этот пакет поддерживает Frank B.
Brokken, frank@icce.rug.nl. Так как настройка, несмотря на прямолинейность, весьма сложна, то я написал короткое вступление для нее: http: / /ap-dec717c.physik.uni-karlsruhe.de / ~mh / callback /, в котором также содержатся более подробные сведения об обратном звонке.
Обратный звонок службы RAS в ОС Windows NT
В ОС Windows NT используется подход, совершенно отличный от описанного выше.
NT требует наличия расширения к протоколу PPP, поз названием CBCP (Протокол контроля обратного звонка). У демона ppp есть поддержка этого протокола, но вам придется перекомпилировать демон ppp. Если кому-нибудь удалось успешно соединиться с сервером обратного звонка под управлением NT, просьба дать нам знать об этом.
Вопросы и ответы
Вопросы о дозвоне
kppp не работает. kppp сообщает, что демон ppp прекратил работу или истек период таймаута. Что происходит?
Внимательно ли вы прочли это руководство? Ниже приводятся наиболее распространенные ловушки:
Нажмите на кнопку Подробности. kppp выдаст вам выдержку из логов сообщений PPP (эта опция может на работать на не - Linux компьютерах, и даже на некоторых дистрибутивах ОС Linux). Логи помогут вам найти ошибку.
Убедитесь в том, что демон ppp является двоичным исполняемым демоном ppp, а не скриптом
Убедитесь в том, что файл / etc / ppp / options существует и не содержит конфликтующих записей. Если что-либо в этом файле вызывает у вас сомнения: удалите содержимое файла.
Убедитесь в том, что вы НЕ используете опцию lock в качестве аргумента для демона ppp (программа kppp сама заботится о блокировке модема).
Удалите опцию lock из обоих файлов / etc / ppp / options и / .ppprc!
Использование символической ссылки / dev / modem также может вызвать конфликт. Устраните причину ошибки использованием реального устройства, то есть / dev / cuaX или / dev / ttySX.
COM1 относится к ttyS0, COM2 - к ttyS1 и так далее.
Убедитесь в правильности задания прав на доступ. В случае неполадок вы можете запустить программу как суперпользователь, а затем, когда неполадки будут устранены, задать меньшие права, если не можете позволить себе выполнение kppp с правами суперпользователя. Возможно, решением окажется создание группы modem.
Возможно, вы запускаете демон ppp слишком рано, то есть, до того, как удаленный сервер готов установить PPP -соединение. Если вы используете скрипт логина, с помощью встроенного терминала проверьте процедуру логина. Некоторые провайдеры требуют наличия простых команд Send или Send ppp для запуска PPP. По словам некоторых пользователей, им пришлось добавить команду Pause 1 или Pause 2 в скрипт для решения конфликтов с временем.
Если проблема так и не разрешилась, вы можете получить информацию для отладки из логов системы, выполнив команду:
Почему kppp выдает сообщение: Невозможно использование модема?
Это означает, что у kppp нет разрешения на использование модема или же на вкладке Модем вы указали недействительный модем. Сперва убедитесь в правильности указания модема. После того, как вы убедитесь в том, что модем указан верно, разрешите kppp доступ к модему, а также изменение файла / etc / resolv.conf, если kppp будет конфигурировать DNS. Если вы можете позволить выполнение kppp с правами суперпользователя, - - это решит проблемы с правами доступа, в противном случае все права на доступ вы должны регулировать самостоятельно. Для задания kppp прав суперпользователя выполните следующие команды:
Почему kppp сообщает о невозможности создания файла блокировки модема?
В большинстве случаев это означает, что вы установили kppp без бита SETUID, или пользователь, использующий kppp, не имеет разрешения на запись в каталог файлов блокировки, по умолчанию в / var / lock. Это пример систем Red Hat. Проверьте диалог модема для определения заданного каталога. Простое решение: запустите kppp с битом SETUID, если можете позволить себе такое, или разрешите пользователям доступ к каталогу / var / lock, или создайте группу modem, у которой будет доступ к файлам каталога / var / lock.
Почему kppp устанавливается с битом SETUID?
para >В SETUID-бите нет нужды, если вы немного знакомы с системным администрированием ОС UNIX. Просто создайте группу modem, добавьте в нее всех пользователей, которым разрешен доступ к модему и разрешите этой группе доступ на чтение / запись в модем. Если вам также необходимо, чтобы конфигурация DNS работала с kppp, файл / etc / resolv.conf должен быть доступен на чтение / запись членам этой группы. Это также относится к файлам / etc / ppp / pap-secrets и / etc / ppp / chap-secrets, если вы используете соответствующую поддержку PAP или CHAP.
Команда разработчиков программы kppp за последнее время проделала большую работу, чтобы сделать kppp безопасной в отношении SUID. Но принимать решение об установке и методах установки программы придется вам.
Вас также могут заинтересовать сведения в разделе Безопасность.
Что мне делать, если kppp не устанавливает соединения, а выдает сообщение: Ожидается строка OK
Вы пробовали применять команды CR / LF? Попробуйте следующие команды:
CR, LF или CR / LF.
Кроме того, вашему модему может потребоваться некоторое время для ответа при инициализации. Откройте диалог Команды модема на вкладке Модем и измените значения задержек До инициализации и После инициализации. Выясните, поможет ли вам значительное изменение этих значений, затем выполните более точную настройку.
Соединение работает, но я не могу запустить ни одно приложение!
Проверьте, указали ли вы в kppp хотя бы один DNS -сервер.
Проверьте содержимое файла / etc / host.conf. Он должен содержать примерно такую строку: order hosts, bind. Ключевое слово bind указывает библиотеке перевода адреса запросить сервер имен при осуществлении перевода адреса. Если такой строки в файле нет, добавьте ее.
Как мне указать kppp послать строку \n или же \r
Добавьте пустую строку, как показано в примере скрипта:
Как мне избавиться от сообщения kppp: Невозможно создать файл блокировки модема?
Это происходит по причине отсутствия у вас прав на создание файла блокировки. Если вы используете файл блокировки, то у вас должны быть права на запись в каталог (как правило, / var / lock). Такой проблемы не возникнет, если вы установили для kppp SUID-бит. Обратитесь к разделу Файлы блокировки.
Почему мой модем так шумит при установлении соединения?
Нажмите на кнопку Настройка, а затем на вкладку Модем. Вы можете установить громкость динамика модема в одно из трех состояний: Выключено, Средне и Громко. Для большинства модемов Средне и Громко дают один и тот же результат. Если изменение этой настройки не помогает, убедитесь в том, что правильные настройки модема указаны в разделе Настройка, Модем, Команды модема.
Я установил громкость динамика модема в положение Выключено и проверил команды модема, тем не менее, модем по-прежнему ужасно шумит при дозвоне. Почему?
Строка инициализации звука может быть потеряна в случае, если модем не успевает обрабатывать команды, полученные от kppp. Увеличьте значение Задержки после инициализации в разделе Настройка, Модем, Команды модема.
kppp сообщает об установлении соединения с нехарактерной для модемного соединения скоростью 115200 или же 57600
Большинство модемов сообщают о скорости последовательной линии, а не о скорости телефонного соединения. Таким модемам можно указать сообщать скорость телефонного соединения добавлением команд к строке инициализации или строке дозвона. Для большинства модемов такой командой является ATW2. Если вы хотите добавить эту команду к строке дозвона (которая, как правило, начинается с ATD), в таком случае новая строка дозвона будет такой:
ATW2D.
Почему kppp выдает сообщение Скорость соединения не определена?
У современных модемов бывают очень сложными сообщения о соединении, к примеру, CONNECT LAP.M / V42.bis / 115000:RX / 31200:TX, и kppp не в состоянии правильно обработать такое сообщение. Включите опцию Показывать Лог, - - и определите скорость соединения.
Скорость моего соединения низка
Если вы не довольны скоростью модемного соединения, убедитесь, что вы установили скорость соединения (доступно в разделе Настройка, Устройство, Скорость соединения) равной 57600 или выше. Убедитесь, что ваши последовательные порты поддерживают высокие скорости. Большинство старых систем (на основе i486) некорректно работают при задании скорости, равной 115200. Если вы используете чипсет 8250 UART, он не будет работать. Чип 16550 или 16550A будет работать без проблем.
Кроме того, вам нужно установить, как строка инициализации переводит модем в высокоскоростной режим (согласно руководству по эксплуатации от вашего модема).
Скорость моего соединения очень низка!
Если соединение происходит на скорости в несколько бит в секунду, проверьте аппаратные настройки. Если движение мыши ускоряет передачу данных, то это точно аппаратная проблема!
Мне необходимо использовать импульсный набор номера, а не тональный (или наоборот). Как мне изменить этот параметр?
Измените строку дозвона модема. Практически все модемы поддерживают следующие AT-команды:
ATDT
Выбрать тоновый набор номера
ATDP
Выбрать импульсный набор номера
Вопросы о правилах учета стоимости телефонных звонков
Как мне написать файл правил (rules file) для учета стоимости телефонных звонков?
Я написал файл правил (rules file) для учета стоимости телефонных звонков в моем районе. Что я должен сделать, чтобы другие тоже могли использовать его?
Возможно ли использовать в файле правил для учета стоимости телефонных звонков дробные числа, к примеру, "(0.17, 45.5)"?
Да, возможно. Но не следует использовать слишком малые значения (менее десятых долей секунды), так как это повышает нагрузку на ЦПУ, хотя, возможно, пройдет незамеченным на современном ЦПУ.
Помимо праздника Пасхи, в моей стране есть и другие праздники с нефиксированной датой.
В таком случае вам придется написать собственный код для определения даты этих праздников. Обратитесь к файлу ruleset.cpp, в качестве примера используйте праздник Пасхи. Затем пошлите этот участок кода для включения в программу!
Вопросы о логах сообщений системы
У меня появляется сообщение Линия зациклилась. Что это означает?
Короткий ответ: вам не удалось запустить PPP -соединение на удаленном компьютере.
В логах значится сообщение Signal 15
Если вы видите следующие строки, скорее всего это означает, что kppp сообщает об ошибке таймаута. kppp ожидает запуска PPP -интерфейса в течение заданного таймаута, после чего ожидание прекращается. Демон ppp получает команду на останов, Signal 15:
SIGTERM.
Что означает сообщение Принятый сигнал линии не является 8-битным
Демон PPP предупреждает о том, что 8-ой бит принимаемых данных данных установен в 0. В большинстве случаев это значит, что PPP -сервер пока не запущен на удаленном компьютере. Вы можете увидеть запрос на логин, который будет возвращать все данные, переданные демоном ppp.
Сообщение: can 't locate module ppp-compress? Что оно означает?
Система выдает следующие сообщения?
Добавьте следующие строки:
к файлу / etc / conf.modules.
Авторы и лицензия
kppp
Программа kppp разработана на основе программы ezppp 0.6, написанной Jay Painter. Однако, практически весь код в kppp изменен, таким образом у ezppp и kppp не так много общего.
Авторы программы:
Bernd Johannes Wuebben wuebben@kde.org
Mario Weilguni mweilguni@sime.com
Harri Porten porten@kde.org (в настоящее время поддерживает программу)
Приносим благодарность тем, кто содействовал разработке программы kppp
Jesus Fuentes Saaverdra jesus.fuentes@etsi.tel.uva.es за написание некоторых опций и другую проделанную работу.
Markus Wuebben wuebben@eure.de за диалог ATI запроса
Peter Silva peter.silva@videotron.ca за диалоги и многое другое
Martin A.
Brown MABrown@etcconnect.org
Olaf Kirch okir@caldera.de за введение в тайны фаловых дескрипторов.
Авторское право на документацию:
2001 Lauri Watts lauri@kde.org, в основе лежит оригинал, написанный Bernd Johannes Wuebben wuebben@kde.org
Этот документ распространяется на условиях GNU Free Documentation License.
Программа распространяется на условиях лицензии GNU General Public License.
Установка
Как получить kppp
kppp - это часть проекта KDE http: / /www.kde.org /.
kppp входит в пакет kdenetwork на ftp: / /ftp.kde.org / pub / kde /, основном FTP -сервере KDE.
Сборка и установка
Чтобы собрать и установить kppp, введите следующие команды в каталоге дистрибутива kppp:
Поскольку kppp использует autoconf и automake, у вас не должно возникнуть никаких проблем. Если же у вас возникли ошибки, сообщите о них в списки рассылки KDE.
Подготовка вашего компьютера для осуществления PPP -соединений
В следующих разделах содержатся сведения об операционных системах, в которых возможно использование kppp. Следуюшие сайты могут содержат интересные сведения о протоколе ppp, демоне ppp и о работе в сетях в целом:
FAQ по PPP в ОС Linux: http: / /metalab.unc.edu / mdw / FAQ / PPP-FAQ.html
HOWTO по PPP в ОС Linux: http: / /metalab.unc.edu / mdw / HOWTO / PPP-HOWTO.html
http: / /www.thoughtport.com:8080 / PPP / index.html
Руководство администратора сети: http: / /metalab.unc.edu / mdw / LDP / nag / nag.html
Подготовка компьютера под управлением ОС Linux для осуществления PPP -соединений
Для работы kppp (на самом деле, демона ppp) необходимо, чтобы ядро имело поддержку ррр-соединений. Если же таковая имеется, загрузите последнюю версию демона ppp из любого популярного архива Linux (такого как ftp: / /sunsite.unc.edu / pub / Linux / system / Network / serial / ppp / и перекомпилируйте ядро с включенной поддержкой ppp.
Не стоит волноваться по этому поводу, это не так уж и сложно. Также не забудьте установить демон ppp.
Если вы не уверены, что ядро ОС поддерживает ppp, то выполните команду dmesg и найдите строки вроде:
Программа kppp попытается самостоятельно определить, имеет ли ядро ОС поддержку PPP. Если таковой не имеется, kppp сообщит об этом при запуске.
Подготовка компьютера под управлением ОС FreeBSD для осуществления РРР-соединений
Набор команд для Hayes-совместимых модемов
Ниже приводится описание набора команд для Hayes-совместимых модемов. Большинство модемов поддерживают этот набор команд в достаточно большой степени. Если вы потеряли руководство по эксплуатации вашего модема (или если руководства не было), этот раздел может быть оказаться весьма полезным. К примеру, я определил, как отключать динамик моего модема: команда ATM0 - - наконец-таки тишина!
Инициализационная строка модема являет собой последовательность команд. Она подготавливает модем к коммуникациям, задавая ему такие параметры как: режим дозвона, ожидание, определение сигнала Занято и многие другие установки. Современные коммуникационные программы создают строки инициализации сами, на основе выбранных вами опций меню, на основе включенных вами функций, и т. д.
На протяжении многих лет Hayes-совместимые модемы являются промышленным стандартом. Несмотря на возросшее количество производителей модемов, большинство из них очень близки к стандарту Hayes-совместимых. Ниже приводится (частично) набор команд для Hayes - совместимых модемов. (Так называемые AT -команды). Набор команд для Hayes-совместимых модемов можно разделить на четыре группы:
Основной набор команд
Цифра после заглавной буквы. Например, M1.
Расширенный набор команд
Символ & (амперсант) с последующей заглавной буквой в сочетании с цифрой. Это расширение основного набора команд. К примеру, &M1. Обратите внимание на то, что команда M1 отлична от команды &M1.
Частный набор команд
Обычно начинающиеся с символа обратного слэша (\) или знака процента (%), эти команды очень различаются на разных моделях модемов. По этой причине ниже приведены только некоторые из них.
Команды для управления регистрами
Регистр - - компьютерный термин, означающий некую физическую область памяти. Количество памяти в модемах мало. Этот четвертый набор команд используется для ввода значения в определенный регистр (область в памяти). Регистр хранит определенную переменную (алфавитно-цифровые данные), которые используются модемом и коммуникационным программным обеспечением. К примеру, команда S7=60 указывает компьютеру Установить значение регистра #7 равным 60.
Кроме того, большинство команд определяются буквенно-цифровой комбинацией (L0, L1 и так далее), использование нуля является необязательным. К примеру, команда L0 аналогична команде L. Имейте это ввиду при ознакомлении с таблицей, приведенной ниже!
Ниже приводятся некоторые из наиболее важных символов в строке инициализации модема. Как правило, изменение этих символов не требуется.
AT
Указывает модему, что последует набор команд. С этой команды начинаться каждая строка, содержащая команды.
Z
Сбросить установки модема в состояние по умолчанию
, (запятая)
задерживает выполнение программы на одну секунду. Допускается использование нескольких команд, в одном ряду. Например, команда,,,, создаст задержку в 4 секунды. (Время паузы задается значением регистра S8.
^M
Отправляет модему символ-прерывание Возврат каретки (CR). Этот управляющий код большая часть коммуникационных программ понимает как Carriage Return
Основной набор команд Hayes
В алфавитном порядке:
Основной набор команд Hayes
Дозвониться по указанному номеру и выполнить процедуру приветствия.
P
Импульсный набор номера
T
Тоновый набор номера
W
Ожидать повторного зуммера
,
Выдержать паузу, заданную значением регистра S8 (обычно 2 секунды)
;
После дозвона остаться в командном режиме
!
Краткое прерывание линии (На полсекунды повесить трубку, как в случае перевода звонка.
L
Набрать последний набранный номер
Расширенный набор команд Hayes
Расширенный набор команд Hayes
Установки по умолчанию для Generic Hayes-совместимых модемов.
Как правило, имеет смысл использовать эту команду в строке инициализации модема, так как команды &F1 - &F3 могут по-разному быть поняты различными модемами, тем самым вызывая проблемы при соединении. (Никогда нельзя точно знать какие установки изменяет команда &F2.
С другой стороны, бывает целесообразным использовать приведенные ниже опции; большинство проблем можно решить, заменив сложную строку инициализации простой командой &F2 или подобной. Тем не менее, если вы создаете строку инциализации, лучше начать ее простой командой &F, а не использовать измененные типы установок по умолчанию.
Команды Backslash (обратный слэш) и Percent (процент)
Команды Backslash (обратный слэш) и Percent (процент)
Прямое соединение - - это простое соединение без использования протоколов коррекции ошибок и сжатия данных. В этом случае скорости компьютер-модем и модем-модем должны быть идентичными.
Нормальное соединение использует управление потоком (аппаратное или программное) для буферизации отправленных и полученных данных, таким образом, модем может передавать данные на скорости, отличной от скорости передачи компьютера. К примеру, компьютер может отправлять данные на скорости 57 Кб / с с использованием сжатия, а модем ведет передачу на скорости 28.8 Кб / с. Этот режим используется большинством модемов.
Соединение с надежной связью подобно нормальному соединению; если по какой-либо причине не происходит сжатия данных или отключен режим коррекции ошибок, в таком случае произойдет разъединение. (В частности, такой модем проверяет все соединения на предмет надежности, в противном же случае вешает трубку.)
Соединение с надежной (с авторегулировкой) связью является практически тем же самым, разве что модем будет пытаться соединиться заново для установления соединения с надежной связью. Большинство модемов используют этот режим.
S-регистры
S-регистры
Возможные опции при невозможности устранить ошибки связи:
0 - Разъединить
1 - Установить прямое соединение
3 - Установить нормальное соединение
4 - Установить MNP -соединения при возможности, иначе разъединить
5 - Установить MNP -соединение при возможности, иначе установить прямое соединение.
7 - Установить MNP -соединение при возможности, иначе установить нормальное соединение
1 = 300 bps
5 = 1200 bps
6 = 2400 bps
7 = 1200 / 75 bps (протокол v.23)
8 = 4800 bps
9 = 9600 bps
10 = 12000 bps
11 = 14400 bps
12 = 7200 bps
Пример шаблона для учета стоимости телефонных звонков.
Если вы не нашли правила, соответствующего вашему району, то можете написать свое собственное, используя следующий шаблон. Не бойтесь, это действительно очень просто.