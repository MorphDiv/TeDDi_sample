# language_name_wals:	Spanish
# language_name_glotto:	Spanish
# iso639_3:	spa
# year_composed:	NA
# year_published:	NA
# mode:	written
# genre_broad:	technical
# genre_narrow:	NA
# writing_system:	Latn
# special_characters:	NA
# short_description:	KDEdoc
# source:	https://object.pouta.csc.fi/OPUS-KDEdoc/v1/raw/es.zip
# copyright_short:	http://opus.nlpl.eu/KDEdoc.php
# copyright_long:	http://opus.nlpl.eu/KDEdoc.php J. Tiedemann, 2012, Parallel Data, Tools and Interfaces in OPUS. In Proceedings of the 8th International Conference on Language Resources and Evaluation (LREC 2012)
# sample_type:	whole
# comments:	NA

El manual de kppp
Se concede permiso para copiar, distribuir y / o modificar este documento bajo los términos de la Licencia Libre de Documentación de GNU, versión 1.1 o posterior publicada por la Free Software Foundation; con secciones no invariantes, con textos que no estén en la cubierta, y con textos que no estén en la contraportada.
Se incluye una copia de la licencia en.
kppp es un marcador de teléfono y un entorno para pppd, que permite la creación interactiva de guiones y la configuración de red.
Introducción
kppp es un marcador telefónico y un entorno de uso para pppd.
Permite la generación interactiva de guiones y la configuración de red.
Automatiza el proceso de marcado para realizar llamadas a su proveedor de Internet, permitiéndole al mismo tiempo tener el proceso controlado en todo momento.
Una vez que se ha conectado, kppp proporciona un amplio conjunto de estadísticas y lleva la cuenta del tiempo que usted permanece en línea.
La incorporación de una terminal y un generador de guiones le permiten configurar su conexión con facilidad.
Ya no será necesario que utilice otros programas de terminal adicionales como seyon o minicom para probar y configurar su conexión.
kppp proporciona un sistema de contabilidad del gasto telefónico, que le permite mantener un seguimiento a los costes derivados de estar en línea.
Esperamos que le guste este marcador, y que facilite su acceso a Internet.
Conectándose de una forma sencilla
Algunas cosas que debería saber antes de empezar
Si tiene una distribución de Linux más o menos modernas, puede que encuentre el resto de este documento supérfluo. kppp incluye un pequeño asistente que en muchos casos puede ayudar a realizar una conexión a Internet en unos pocos minutos.
Se use o no el asistente, debería saber lo siguiente antes de comenzar:
El número de acceso de su proveedor de servicios de Internet.
Su nombre de usuario y su contraseña en el proveedor elegido.
Los servidores DNS de su proveedor (con uno es suficiente, pero dos es mejor).
Otra información opcional que sea necesaria para acceder totalmente a los servicios de su proveedor:
La dirección del servidor de correo entrante (normalmente pop.yourisp.com o mail.yourisp.com)
También debe saber si su proveedor utiliza los protocolos POP3 o IMAP.
La dirección del servidor de correo saliente (SMTP), que puede ser la misma que la del entrante, o que normalmente se llama algo como smtp.yourisp.com).
El servidor de noticias de Usenet (NNTP), que posiblemente será news.yourisp.com o nntp.yourisp.com).
Cualquier servidor proxy que tenga configurado su proveedor.
Toda esta información está probablemente disponible en la documentación que le haya entragado su proveedor de servicios al firmar el contrato de acceso, o se la podrán proporcionar en el servicio de atención al cliente de su proveedor.
Con lo anterior de la mano, y una instalación adecuada de Linux, se dará cuenta de lo sencillo que resulta configurar un acceso a Internet con el asistente de kppp.
El asistente de kppp
Inicio del asistente.
Puede iniciar el asistente desde la ventana principal de kppp.
Inicie kppp desde el menú K, buscándolo en la sección Internet bajo el nombre de Marcador de Internet.
Aparecerá el siguiente diálogo:
La pantalla de inicio del marcador kppp
Lo más probable es que no contenga ninguna entrada para empezar, y eso es lo que vamos a hacer ahora.
Pinche en el botón Configuración para comenzar a configurar una nueva conexión a Internet.
El asistente le ofrecerá tres opciones, Asistente, Diálogo de configuración y Cancelar
El asistente le pregunta qué desea hacer
Cancelar
Elija esta si no desea configurar una cuenta en ese momento.
El mensaje desaparecerá, y se quedará con la ventana de marcación, como antes.
Asistente
Si dispone de un módem más o menos estándar, y utiliza uno de los proveedores importantes de su pais, es probable que el asistente sea capaz de configurar una conexión operativa de forma inmediata.
Pruebe esto primero, antes de intentar realizar una configuración manual.
Diálogo de configuración
Si no ha tenido éxito con el asistente, o desea hacer las cosas usted mismo, elija esta opción.
El asistente es, de momento, útil únicamente con un pequeño conjunto de paises y proveedores de Internet.
Para el propósito de este capítulo, asumiremos que ha elegido Asistente, y la configuración basada en diálogos será descrita en un capítulo posterior.
El descanso del asistente
La primera pantalla que verá contiene únicamente una introducción, que explica las cosas que ha leido en la primera sección de este capítulo.
Pulse Siguiente para avanzar.
La segunda pantalla le preguntará por el pais en el que vive.
Aquí no aparecen todos los paises, y si el pais en el que vive no está en la lista, tendrá que pulsar el botón Cancelar, en cuyo caso la configuración basada en diálogos comenzará para que usted continue con ella.
En la siguiente pantalla, se le mostrará una lista de proveedores de Internet conocidos por kppp, basándose en su elección del pais de la pantalla anterior.
Igual que antes, si su proveedor no aparece en la lista, tendrá que pulsar en Cancelar y hacer la configuración basada en diálogos.
Ahora se le pedirá que introduzca su nombre y contraseña de la conexión a Internet.
Tenga en cuenta que en algunos proveedores esto será diferente de los datos de su cuenta de correo, así que asegúrese de que está utilizando los correctos.
Pulse en Siguiente para continuar.
En la siguiente pantalla, tendrá la oportunidad de introducir cualquier prefijo de marcación especial que pueda tener.
Por ejemplo, si debe marcar 0 para obtener una línea externa, o si tiene un prefijo para anular la llamada en espera.
Pulse en Siguiente para continuar.
Y eso es todo.
Si desea revisar alguno de los datos, puede utilizar los botones Atrás y Siguiente para moverse por los diálogos.
Cuando esté contento con la información introducida, pulse el botón Terminar, y habrá acabado.
Por supuesto toda esta información se puede modificar posteriormente, en el diálogo de configuración de kppp.
Configuración de una conexión a través de los diálogos
Configurar una conexión por medio de los diálogos no resulta mucho más difícil que hacerlo con el asistente.
Puede acceder al diálogo de configuración de la misma manera que al asistente.
Inicie kppp desde el menú K, en concreto en el menú Internet con el nombre de Conexión telefónica a Internet.
Aparecerá el siguiente diálogo:
La ventana inicial de kppp
Lo más probable es que no tenga ninguna entrada con la que comenzar, y eso es lo que vamos a tratar ahora.
Pinche en el botón Configuración para comenzar a configurar una nueva conexión a Internet.
Esta vez, elija Configuración por diálogos y verá el siguiente diálogo:
El diálogo Nueva conexión
El diálogo Nueva conexión contiene las siguientes secciones:
Marcar
IP
Puerta de enlace
DNS
Script de autenticación
Ejecutar
Contador
Normalmente no será necesario que realice operaciones en todos ellos, aunque están completamente descritos en las siguientes secciones.
El apartado Marcar
El apartado de marcación de las conexiones
El apartado Marcar incluye las siguientes opciones:
Nombre de la conexión:
Debe darle un nombre a la conexión.
Pueder ser cualquiera, pero si tiene más de una conexión configurada, cada nombre debe ser único.
Número de teléfono:
Especifique el número a marcar.
Puede utilizar caracteres como - para hacer el número más legible.
Si encadena una serie de números serapados por dos puntos (p. ej.
1111111:2222222:3333333), kppp irá pasando de uno a otro si al marcar recibe la señal de ocupado.
Puede utilizar el botón Añadir para añadir un nuevo número, Eliminar para eliminar un número de la lista, y las flechas arriba y abajo para cambiar el orden de la lista.
Autenticación
Elija el método de autenticación apropiado para el sistema al que quiere acceder con kppp.
Consulte con su proveedor para más información.
El uso de los sistemas de autenticación PAP y CHAP están descritos en el capítulo.
Guardar contraseña
Active esta casilla si desea que kppp guarde su contraseña entre las sesiones.
Personalizar opciones del pppd...
Esto abrirá el diálogo de argumentos de pppd.
Puede utilizar ese diálogo para añadir las opciones que desee que kppp le pase a pppd.
Lea la página del manual de pppd para obtener una lista de opciones disponibles.
Salvo que sepa realmente lo que está haciendo, no debería modificar nada aquí.
El apartado IP
El apartado IP de las conexiones
Dirección IP dinámica
Active esta opción si su proveedor de Internet utiliza direcciones IP de asignación dinámica.
En este caso, su dirección IP cambiará cada vez que establezca una conexión.
Dirección IP estática
Active esta opción si su proveedor de Internet le ha proporcionado una dirección IP estática.
En ese caso necesitará además introducir dicha dirección en la casilla Dirección IP, y la Máscara de subred correspondiente.
Consulte con su proveedor de Internet si no está seguro.
La mayoría de los proveedores de Internet utilizan las direcciones dinámicas, así que esa es la opción más probable.
Autoconfigurar el nombre de máquina desde esta dirección IP
Active esta opción si desea que kppp establezca el nombre y el domino de su máquina después de una conexión ppp exitosa.
Esto se hace tras consultar en el servidor de nombres de dominio configurado el nombre correspondiente a la dirección IP asignada por el enlace ppp.
Esta opción es útil para las máquina independientes que utilizan protocolos como talk, que requieren que el nombre de su máquina corresponde con el asignado para la misma en Internet.
Sobreescribe la opción Nombre de dominio de la sección DNS, y los valores anteriormente configurados en la máquina se restauran una vez cerrada la conexión ppp.
Esta opción no es útil si sólo desea conectarse a Internet para navegar, comprobar el correo o charlar.
Como efecto secundario, desactiva las nuevas conexiones a su servidor X.
En otras palabras, que no podrá abrir más programas del entorno gráfico.
Actívela únicamente si le resulta absolutamente necesario.
El apartado Puerta de enlace
El apartado Puerta de enlace de las conexiones
Puerta de enlace predeterminada
Active esto si desea que pppd utilice la puerta de enlace predeterminada de su sistema.
Esta es la opción por defecto.
Puerta de enlace estática
Active esto si desea especificar la puerta de enlace a utilizar en vez de hacer uso de la predeterminada.
Asignar la ruta predeterminada hacia esta puerta de enlace
Con casi total certeza deberá tener esto activado (por defecto)
El apartado DNS
El apartado DNS de las cuentas
Nombre de dominio:
Especifique el nombre de dominio de su ordenador.
Al igual que con las direcciones DNS, se restaurará el original especificado en / etc / resolv.conf cuando se haya interrumpido la conexión.
Si esa casilla se deja vacía, no se harán cambios al dominio especificado en / etc / resolv.conf.
Configuración:
Elija entre las opciones de configuración Automática (el proveedor de Internet le enviará automáticamente las direcciones de los servidores DNS al conectar) y Manual.
Si elige manual, se activará la sección Direcciones IP de DNS.
Direcciones IP de DNS
Esta sección sólo se activa si elige Manual en la opción anterior.
Añada los servidores de nombres de dominio que le haya asignado su proveedor de Internet.
Debe especificar al menos un servidor de nombres de dominio para que sea posible identificar los nombres legiles como ftp.kde.org que se corresponden con una dirección IP.
Las direcciones de servidores DNS proporcionadas deben estar escritas en formato numérico, p. ej.
128.231.231.233.
Estas direcciones se añadirán durante la conexión al archivo / etc / resolv.conf.
Elija el botón Añadir para añadir cada nueva dirección de servidores DNS a la lista inferior.
Seleccione Eliminar para borrar una entrada de la lista.
Deshabilitar servidores de nombres existentes durante la conexión
Si activa esta casilla, cualquier servidor DNS que aparezca en / etc / resolv.conf será desactivado durante la conexión.
El apartado Script de autenticación
El apartado Script de autenticación de las cuentas
Utilice este diálogo para componer un guión de marcación para la conexión con su proveedor de Internet.
Puede utilizar la mini terminal y la información proporcionada por su proveedor de Internet para deducir cual será la secuencia de acciones a ejecutar.
Elija una opción de la lista desplegable de la izquierda, y después añada los parámetros para esa acción en la casilla de la derecha.
Utilice el botón Añadir para añadir cada entrada al final del guión, que aparece en la parte inferior del diálogo.
Utilice Insertar para insertar una entrada en cualquier lugar del guión, y utilice Eliminar para borrar una línea del guión.
Las opciones disponibles son:
Expect
kppp esperará a recibir la cadena especificada.
Send
kppp enviará la cadena especificada.
Scan
kppp buscará en el flujo de entrada la cadena especificada, y almecenará internamente cualquier caracter que exista desde el final de dicha cadena hasta el siguiente carácter de nueva línea.
Se eliminarán los espacios en blanco del principio y del final.
Save
Almacena permanentemente la cadena extraida anteriormente en el registro especificado.
En este momento el único registro válido es password.
Pause
Hace una pausa durante el número de segundos determinado.
Hangup
kppp enviará al módem la señal interrupción de la comunicación.
Answer
kppp pondrá el módem en el modo de respuesta.
Timeout
Cambia dinámicamente el tiempo de espera predeterminado al número de segundos especificados durante el guión.
Puede cambiar el tiempo de espera varias veces durante la ejecución del guión si así fuese necesario.
Prompt
Le pide al usuario de kppp que introduzca una cadena, dando como ayuda la cadena especificada.
El usuario verá lo que ha escrito.
Si la cadena especificada incluye la marca ##, esta será sustituida por la cadena anteriormente obtenida por medio del comando scan.
PWPrompt
Le pide al usuario de kppp que introduzca una cadena, dando como ayuda la cadena especificada.
Se escribirá en la pantalla un asterisco por cada carácter que teclee el usuario.
ID
Si el campo Usuario de la ventana principal de kppp está cumplimentado, se enviará como nombre de usuario.
Si el campo Usuario no está cumplimentado, se le pedirá al usuario de kppp que introduzca un nombre de usuario, dando como ayuda la cadena especificada.
El usuario verá lo que teclea.
En una segunda llamada a este comando, como si fuese la segunda iteración de un bucle, o durante la autenticación para retrollamada, se pedirá el nombre de usuario independientemente de si el campo Usuario estaba cumplimentado o no.
Password
Si el campo Contraseña de la ventada principal de kppp está cumplimentado, se enviará esa contraseña.
Si el campo Contraseña no está cumplimentado, se pedirá al usuario de kppp que introduzca una contraseña, dando como ayuda la cadena especificada.
Se imprimirá en la pantalla un asterisco por cada tecla pulsada.
En una secunda llamada a este comando, como si fuese la segunda iteración de un bucle, o durante la autenticación para retrollamada, se pedirá la contraseña independientemente de que el campo Contraseña esté cumplimentado o no.
LoopStart
kppp esperará a que se reciba la cadena especificada.
Guardará la cadena para su uso con LoopEnd.
LoopEnd
kppp esperará a recibir la cadena especificada para salir del bucle.
Si la cadena dada por el LoopStart correspondiente se recibe primero, saltará a la línea posterior a LoopStart, permitiendo la repetición de diálogo emparejados del tipo usuario / contraseña.
Guiones de ejemplo
Un ejemplo de un sencillo guión de autenticación
Este es un sencillo ejemplo de guión que podría utilizarse para el acceso a un proveedor de Internet
Un guión de acceso que pide nombre de usuario y contraseña y tiene bucles.
Este es un guión para la misma cuenta pero solicitando el nombre de usuario y la contraseña.
Este guión pedirá el nombre de usuario siempre, independientemente del contenido de las casillas Usuario y Contraseña en la ventana principal de kppp.
Este guión también ilustra sobre el uso de la estructura LoopStart / LoopEnd.
Si algo va mal durante el proceso de autenticación, por ejemplo, se ha tecleado mal la contraseña, el proveedor de Internet imprimirá un mensaje de error y se reiniciará el bucle usuario / contraseña volviendo a mostrar la cadena ID: nuevamente.
Si la cadena ID: se detecta antes de que le procese el comando LoopEnd, kppp volverá a iniciar el guión desde la línea siguiente al comando LoopStart.
Solicitud de información no cumplimentada en el diálogo principal.
Este es el guión que utilizo realmente para conectarme con mi proveedor de Internet.
El guión pedirá el nombre de usuario y la contraseña únicamente si no están ya introducidos en los respectivos campos del diálogo principal de kppp.
Guión para un proveedor que utilice autenticación reto / respuesta.
Este es un guión que utilizo para conectar con un proveedor que utiliza algún tipo de autenticación de la forma reto / respuesta.
Normalmente el proveedor suele proporcionar algún tipo de dispositivo (una tarjeta inteligente con pantalla y un teclado tipo calculadora).
Usted debe conocer la contraseña para utilizar el dispositivo.
Después de realizarse la llamada, el proveedor informa del reto.
Usted debe introducir el reto en su dispositivo y obtiene como respuesta una contraseña dinámica.
Y después debe introducir esa contraseña.
Uso de Scan y Save en guiones
El siguiente registro muestra el procedimiento de acceso a un proveedor de Internet ficticio que proporciona una nueva contraseña en cada autenticación.
La nueva contraseña debe ser verificada y almacenada para la siguiente sesión.
Es posible configurar kppp para que realice esta tarea por usted, eliminando el riesgo de perder ese trocito de papel que contiene su contraseña.
La clave del siguiente guión está en el uso combinado de los comandos Scan y Save.
El apartado Ejecutar
El apartado de ejecución de las cuentas
Aquí puede seleccionar los comandos que se ejecutarán en las diversas etapas de la conexión.
Esos comandos se ejecutan con su usuario real, así que no puede ejecutar comandos que requieran privilegios de root, salvo que usted sea, efectivamente, root (lo cual es una mala idea por muchas razones).
Asegúrese de que proporciona la ruta completa del programa o kppp no será capaz de encontrarlo.
Puede añadir comandos a ejecutar en cuatro momentos diferentes durante la conexión:
Tiempo conectado
Ejecutar el comando antes de que comience la marcación, para que ya esté funcionado al acceder al proveedor de Internet.
Mientras se conecta
Ejecutar el comando únicamente después de una conexión exitosa.
Antes de desconectar
Ejecutar el comando mientras permanece la conexión, antes de cortar la comunicación del módem.
Mientras se desconecta
Ejecutar este comando una vez que se ha cerrado la conexión.
Puede que quiera, por ejemplo, ejecutar leafnode en cuanto esté conectado, o comprobar su correo.
Puede querer asegurarse de que se envía la cola de correo, antes de cerrar la conexión.
Puede querer un programa que limpie los registros y la caché inmediatamente después de desconectarse.
El apartado Contador
El apartado Contador para las conexiones
Utilice la casilla Activar seguimiento de costes para activar o desactivar el seguimientos de costes de esta conexión.
Seleccione de la lista el conjunto de reglas adecuado a su proveedor de telecomunicaciones.
Si no encuentra uno apropiado, puede escribir usted mismo el conjunto de reglas copiando la plantilla proporcionada, que encontrará en un apéndice.
La opción final de este página es Volumen seguimiento de costes, que se describe a continuación.
Volumen de seguimiento de costes
¿Qué es el volumen de seguimiento de costes?
Básicamente, quiere decir que se cuenta el número de bytes transmitidos hacia y desde Internet. kppp puede contar los bytes entrantes, los salientes o ambos.
Será decisión suya qué desea (o debe) utilizar.
¿Por qué utilizar volumen de seguimiento de costes?
Muchos proveedor de Internet facturan a sus clientes en función del número de bytes transmitidos.
Más común incluso, los proveedores ofrecen tarifa plana hasta un límite de transferencia arbitrario, y después cobran por cada megabyte que supere ese límite. kppp le muestra el volumen actual y le puede ayudar a mantener sus facturas al mínimo.
Se supone que, aunque a usted no le facturen por volumen, puede activar el volumen de seguimiento de costes para satisfacer su propia curiosidad.
¿Qué tipo de volumen de seguimiento de costes debo seleccionar?
Eso depende sobre todo del proveedor.
Mucho de ellos sólo cuentan los megabytes que se descargan de Internet, e ignoran los que se envían.
En ese caso debería escoger Bytes de entrada.
Si debe pagar por ambos sentidos, la elección será Bytes de entrada y salida.
Bytes de salida se incluyé por completar las opciones, ya que no es habitual que los proveedor utilicen los bytes enviados como base para la facturación.
Puede ser útil si usted posee un servidor web o de FTP.
Inconvenientes
Por desgracia, hay un inconveniente en el volumen de seguimiento de costes. kppp únicamente contabilizará el número de bytes, independientemente de su origen.
Muchos proveedores ponen su límite sólo en el acceso a Internet, y no a la información que circula por su propia red.
Algunos proveedor establecen diferentes límites para la información que circula por su red, por su país o que viene del extranjero.
Así que si usted no suele navegar mucho y obtiene la mayoría de sus páginas del proxy de su proveedor de Internet, lo más probable es que no le estén cobrando por ese tráfico. kppp no sabrá si esos paquetes de información provienen del proxy, así que los contará de todas formas.
Si usted está en esta situación, o, por ejemplo, su proveedor utiliza un caché de servidor de noticias como nntpcached, el volumen calculado por kppp puede ser superior a la cantidad real por la que le van a facturar.
El lado bueno es que kppp nunca se quedará corto en el cálculo de la facturación.
Parámetros globales de kppp
Los cambios hechos aquí afectan a todas las conexiones configuradas con kppp.
El apartado Conexiones
El apartado Conexiones
En este diálogo se pueden administrar las conexiones.
Sus nombres aparecen en una lista a la izquierda de la ventana.
Para eliminar una conexión, utilice el botón Eliminar.
Se le pedirá que confirme la eliminación antes de que esta se produzca definitivamente.
Es posible hacer una copia de una conexión por medio del botón Copiar.
Puede utilizarlo, por ejemplo, para separar el acceso de diferentes usuarios, aunque sería más adecuado hacerlo con diferentes cuentas del sistema operativo.
También es posible que usted tenga más de una cuenta con un mismo proveedor de Internet, y quiera utilizarlas todas.
El botón Editar... le llevará al diálogo descrito en Configuración por diálogos, pero con los datos de la cuenta seleccionada.
El botón Nueva... le ofrecerá la posibilidad de elegir entre el Asistente o la ya mencionada Configuración por diálogos.
Si selecciona una conexión, y tiene activado el seguimiento de costes, se mostrará la información correspondiente en dos paneles llamados Costes de teléfono: y Volumen:, respectivamente.
A la izquierda de los contadores hay dos botones:
Reiniciar... y Ver registros.
El botón Reiniciar... colocará los valores de Costes de teléfono: y Volumen: en 0.
Lo normal es que esta operación se realice una vez al mes o al trimestre, dependiendo de la modalidad de facturación de su proveedor.
Puede reiniciarlos de forma independiente, y dicha posibilidad se ofrece cada vez que se pulsa el botón Reiniciar....
El botón Ver registros abrirá otra ventana, donde se mostrará un registro de todas las llamadas realizadas con kppp.
Si ha guardado los registros, podrá moverse atrás y adelante en saltos mensuales.
Esto puede ser útil si ha recibido una factura telefónica demasiado alta, ya que podrá investigar el por qué.
El apartado Dispositivo
El apartado Dispositivo
Aquí puede seleccionar y configurar su módem.
Dispositivo del módem
Elija el dispositivo adecuado para su hardware.
/dev / ttys0
Los usuarios de DOS o Windows conocen este puerto como COM1, mientras que COM2 corresponde con / dev / ttys1 y así sucesivamente.
Estos dispositivos son los que se utilizan normalmente en sistemas Linux.
/dev / cua0
La primera línea serie (COM1).
COM2 corresponde normalmente con / dev / cua1 y así en adelante.
Estos dispositivos son los utilizados normalmente en sistemas BSD, léase FreeBSD, NetBSD y OpenBSD.
/dev / ttyI0
En Linux estos dispositivos corresponden a tarjetas RDSI internas.
Estos dispositivos simulan un módem compatible con el estándar Hayes. / dev / ttyI0 corresponde a la primera tarjeta, / dev / ttyI1 a la segunda y así sucesivamente.
Estos dispositivos sólo aparecen en la versión para Linux.
/dev / modem
Muchas distribuciones Linux hacen un enlace simbólico desde el dispositivo real del módem a / dev / modem.
No debería utilizar este método.
Es mejor que utilice el dispositivo real que este enlace.
Control de flujo
Seleccione entre Hardware (CRTSCTS), Software (XON / XOFF) o ninguno.
La configuración recomendada es control de flujo por Hardware.
Terminación de línea
Elija el caracter de fin de línea correcto para su módem.
La mayoría de los módems utilizan CR / LF, aunque hay otros que requieren una configuración diferente.
Si tiene problemas mientras ejecuta un guión de autenticación, pruebe cambiando este parámetro.
Velocidad de conexión
Elija de la lista de velocidades de conexión las más apropiada para su puerto serie.
Tenga en cuenta que los puertos serie normalmente soportan velocidades mucho más altas que los módems.
Lo mejor es que comience con el valor más alto posible, y únicamente lo baje si tiene problemas de conexión.
Usar bloqueo de archivo
Active esta opción si desea que kppp utilice un archivo de bloqueo.
En Linux ese archivo se almacenará en el directorio / var / lock.
Los programas como mgetty dependen de la existencia de esos archivos de bloqueo, y kppp no funcionará con mgetty si no se establece el archivo de bloqueo.
Asegúrese de que no utiliza la opción lock en pppd si desea que kppp bloquee el módem, ya que la opción lock de pppd inducirá a pppd a intentar bloquear el dispositivo del módem.
Como kppp ya lo habrá hecho previamente, pppd producirá un error y kppp mostrará el mensaje pppd murió de forma inesperada.
Tiempo de espera del módem
Este es el tiempo, en segundos, que kppp esperará a que el módem envíe la respuesta CONNECT.
Un valor de 30 segundos debería ser suficiente en la mayoría de los casos.
El apartado Módem
El apartado Módem
Esperar por línea ocupada
Este es el tiempo que el módem esperará antes de volver a marcar, si la línea estaba ocupada.
Tenga en cuenta que hay proveedores de telecomunicaciones en determinados paises que recomiendan que este valor no sea demasiado bajo.
Volumen del módem
Utilice el regulador para establecer el volumen del módem.
El nivel más bajo está a la izquierda, el centro es para un volumen medio, y a la derecha está el nivel más alto.
En algunos módems, el volumen más bajo equivale a desactivar el sonido y, en otros módems, los volúmenes medio y alto son iguales.
Comandos del módem
En este diálogo puede incluir cualquier comando particular de su módem.
Si posee un módem compatible con Hayes, lo más probable es que no necesite modificar los valores predeterminados, pero se recomienda que lea el apéndice de esta ayuda Comandos Hayes.
La información que hallará en dicho documento le será muy útil en los casos en que se encuentre con problemas a la hora de obtener una conexión estable con su proveedor de Internet.
En particular los parámetros de Retardo previo de inicio y Retardo posterior de inicio suelen intervenir si está sufriendo bloqueos del módem.
Estos parámetros hacen que kppp realice una pausa justo antes o justo después de enviar la cadena de inicialización al módem.
El Retardo previo de inicio enviará también un carácter CR, salvo que el intervalo de retardo esté establecido a 0.
Consultar al módem
Al pulsar este botón kppp le pedirá al módem que se identifique.
Si la operación tiene éxito, se mostrarán en el diálogos las respuestas del módem.
Esto puede ser o no informativo, dependiendo del módem.
Terminal
El botón Terminal abre una mini terminal.
Puede utilizar esa mini terminal para probar el módem y experimentar con el protocolo de negociación de la inicialización de una conexión ppp con su proveedor de Internet.
Ya no será necesario un programa de terminal como minicom o Seyon.
El apartado Gráfico
El apartado Gráfico
Aquí se pueden establecer los colores utilizados por el gráfico de kppp.
Puede establecer diferentes colores como Color de fondo, Color de texto, Color de bytes de entrada y Color de bytes de salida.
El apartado Miscelanea
El apartado Miscelanea
Aquí se encuentran varias opciones que no se ajustan a ninguna de las otras secciones, pero que a peser de todo pueden resultar muy útiles.
Versión del PPPD
Expiración del PPPD
kppp esperará este periodo de tiempo antes de finalizar pppd en el caso de que no se haya conseguido un enlace ppp válido.
Empotrar en el panel al conectar
Si se elige esta opción, kppp se empotrará en el panel donde aparecerá como un pequeño icono animado.
Utilice el botón izquierdo del ratón sobre ese icono para restaurar la ventana de kppp.
El botón derecho del ratón abrirá un menú emergente que ofrece la posibilidad de restaurar la ventana, mostrar estadísticas de las transferencias o cerrar la conexión.
Esta opción anula Minimizar ventana al conectar.
Vuelve a llamar automáticamente si se desconecta
Esta opción hará que kppp intente volver a establecer la conexión si esta se ha perdido.
Mostrar reloj en la barra de título
Esto hará que kppp muestre el tiempo que lleva conectado en la barra de título de la ventana principal.
Dicho reloj sólo se verá durante el tiempo que dure la conexión.
Desconectar al apagar el servidor X
Esta opción provoca que kppp cierre la conexión ppp, desconecte el módem, y finalice el seguimiento de costes de forma ordenada cuando se cierre el servidor X.
Esto es útil si se le suele olvidar que se encuentra conectado al cerrar el servidor X, o símplemente no quiere preocuparse de cerrar la conexión manualmente cada vez.
Si no desea que kppp cuelgue el módem al salir del servidor X, debería dejar esta opción sin activar.
Tenga en cuenta que si tiene el seguimiento de costes activado y deja esta opción apagada, habrá una entrada de seguimiento de costes sin cerrar en su registro por cada vez que haya cerrado el servidor X sin cerrar kppp previamente.
Salir al desconectar
Minimizar ventana al conectar
Si esta opción está activada, la ventana de kppp se minimizará inmediatamente después de que se establezca una conexión.
El tiempo de conexión transcurrido se mostrará en la barra de tareas.
El apartado Acerca de
El apartado Acerca de muestra información sobre la versión, el autor y la licencia de kppp.
kppp y los asuntos de seguridad
Esta sección está mayormente indicada para los administradores (root) con importantes demandas en seguridad, o símplemente a quién tenga un interés técnido.
No es necesario leerlo si únicamente utiliza Linux a nivel doméstico, aunque siempre puede aprender algo.
Restricción de acceso a kppp
Un administrador de sistema puede querer restringir el acceso a según quién utilice kppp.
Hay dos maneras de acometer esto.
Restricción de acceso con permisos de grupo
Cree un nuevo grupo (quizá llamado dialout o similar), y ponga a todos los usuarios a los que se les permita usar kppp en ese grupo.
Después teclee en la línea de comandos:
Esto asume que KDE está instalado en / opt / kde / y que el nuevo grupo se llama dialout.
Restricción de acceso por el método de kppp
Antes de hacer nada, kppp comprueba si hay un archivo llamado / etc / kppp.allow.
Si dicho archivo existe, sólo les estará permitido llamar a los usuarios nombrados en el mismo.
El archivo debe ser legible (pero por supuesto NO escribible).
Sólo se reconocen los nombres de usuario, así que no se pueden utilizar identificadores de usuario (UID) en este archivo.
Este es un pequeño ejemplo:
En el ejemplo anterior, sólo los usuarios fred, karl y daisy pueden efectuar llamadas, así como cualquier usuario con un UID de 0 (de modo que no hay que incluir a root específicamente).
¿kppp tiene el bit SUID activo? ¿Qué pasa con la seguridad?
Es virtualmente imposible escribir un sistema de llamadas telefónicos sin el bit SUID que sea al mismo tiempo fiable y sencillo de utilizar para los usuarios poco expertos. kppp aborda los problemas de seguridad con la siguiente estrategia.
Inmediatamente después de iniciarse, kppp se divide.
El proceso maestro, que se ocupa de todas las operaciones del entorno gráfico (como la interacción con el usuario), abandona el estado SUID tras la división, y se ejecuta con privilegios de usuario normal.
El proceso esclavo mantiene sus privilegios, y es el responsable de todas las acciones que necesitan privilegios de root.
Para mantener esta parte segura, aquí no se utiliza ninguna llamada a las bibliotecas de KDE o Qt, sólo se hacen llamadas a bibliotecas sencillas.
El código fuente de este proceso es corto (unas 500 líneas) y está muy bien documentados, así que es fácil buscar agujeros de seguridad.
Los procesos maestro y esclavo se comunican a través del IPC estándar de UNIX.
Un agradecimiento especial a Harri Porten por escribir este excelente segmento de código.
Se pensaba que era imposible, pero el lo resolvió en una semana.
PAP y CHAP
A partir de la versión 0.9.1, kppp admite directamente la forma más utilizada de autenticación PAP.
PAP con kppp
Hay dos modos diferentes de utilizar PAP.
Autenticación del lado del cliente
Esta variante es utilizada por muchos proveedores de Internet comerciales.
Básicamente significa que usted (o, mejor dicho, su ordenador) debe identificarse en el servidor PPP del proveedor.
El servidor PPP no necesita identificarse en su ordenador.
Esto no supone un problema de seguridad, ya que usted debería saber con qué ordenador está tratando de conectarse.
Si su proveedor le proporciona un nombre de usuario y una contraseña, y le dice que utilice autenticación PAP, esta será la variante que deberá elegir.
Autenticación en dos sentidos
Es similar a la anterior pero en este caso su ordenador requiere que el servidor PPP del proveedor se identifica en su ordenador.
Para poder establecer la conexión, deberá escoger el método de autenticación Basado en script, no PAP, y tendrá que modificar manualmente el archivo / etc / ppp / pap-secrets.
Mientras kppp no proporcione un método integrado que admita esta variante, no será sencilla establecer una conexión de este tipo.
Preparación de kppp para PAP
Asegúrese de que el archivo / etc / ppp / options (y / .ppprc si existe) no contiene ninguno de los siguientes argumentos:
+pap
-pap
papcrypt
+chap
+chap
+ua
remotename
Sería raro que encontrase en el archivo alguna de estas opciones, pero para asegurarse, por favor comprúebelo.
Inicie kppp
Pinche en Configuración
Elija la cuenta con la que desea utilizar PAP y pinche en el botón Editar
Elija el apartado Marcar
Seleccione PAP en el desplegable Autenticación.
Si no desea tener que escribir la contraseña cada vez que realiza una conexión, marque Guardar contraseña.
Esto guardará la contraseña en un archivo, así que asegúrese de que nadie tiene acceso a su cuenta.
Y eso es todo.
Cierre las ventanas de diálogo, teclee el nombre de usuario y la contraseña que le proporcionó su proveedor, y pinche en Conectar.
Un método alternativo para utilizar PAP y CHAP con kppp
Esta sección está basada en un correo electrónico de Keith Brown kbrown@pdq.net y explica cómo hacer que kppp funcione con una cuenta PAP o CHAP genérica.
Si su proveedor le entregó un nombre de usuario y una contraseña, lo más probable es que pueda saltarse esta sección, ya que las instrucciones de la anterior deberían ser suficientes.
PAP parace mucho más complicado en un principio de lo que es en realidad.
El servidor (la máquina a la que se está conectando) básicamente le dice al cliente (su ordenador) que se identifique utilizando PAP.
El cliente (pppd) busca en un archivo específico una entrada que contenga un nombre de servidor coincidente, y un nombre de cliente para esta conexión, y entonces envía la contraseña que encuentra.
Eso es todo.
Ahora veamos cómo hacer que ocurra eso.
Asumo que la versión de pppd instalada es la 2.2.x o posterior, y que los archivos de configuración se encuentran en el directorio / etc / ppp.
Con ánimo ilustrativo, imagine que usted tiene una cuenta de Internet con glob.net con el nombre de usuario userbaz y la contraseña foobar
En primer lugar, necesita añadir todo esto a un archivo llamado / etc / ppp / pap-secrets.
El formato que nos interesa es:
Así que debería añadir la siguiente línea a / etc / ppp / pap-secrets y guardar el archivo:
Puede utilizar cualquier nombre de servidor que desee, siempre y cuando utilice el mismo nombre en los argumentos de ejecución de pppd, como verá en breve.
En este caso se ha reducirdo a glob, ya que este nombre únicamente sirve para localizar la contraseña correcta.
Lo siguiente que debe hacer es configurar la conexión en kppp.
Básicamente se hace de la misma forma que cualquier otra conexión, así que no entraremos en detalles, salvo para decir que deberá asegurarse de que el archivo / etc / ppp / options está vacío, y que no desea crear un acceso basado en guiones.
En el diálogo de configuración de kppp, en la parte inferior del apartado Marcar, hay un botón llamado Personaliza opciones del pppd.
Este botón abrirá un diálogo de edición donde podrá introducir los valores que se enviarán a pppd como argumentos de la línea de comandos.
En caso de que haya argumentos con múltiples valores, deberá introducir cada valor en una línea de la lista, en el orden correcto.
Puede introducir cualquier otro argumento que desee.
A continuación añada los argumentos que pppd utiliza para manejar la autenticación PAP.
En este ejemplo, vamos a añadir user, userbaz, remotename y glob en ese orden.
La opción user le indica a pppd qué usuario debe buscar en el archivo pap-secrets para enviarlo a continuación al servidor.
La opción remotename es utilizado para que pppd busque la coincidencia en el archivo pap-secrets, así que, como ya se ha dicho, puede ser cualquier palabra que desee siempre que coincida con la almacenada en pap-secrets file.
Y eso es todo sobre el tema, ahora debería ser capaz de configurar su propia conexión utilizando autenticación PAP.
CHAP no es muy diferente.
Puede leer en la guía de administradores de red de Linux el formato del archivo chap-secrets y los argumentos de pppd utilizados, y el resto es sencillo.
Trucos del módem
Esta sección debería introducir a los temerosos en el (no tan) ancestral arte de la configuración del módem.
Todos los comandos utilizados pertenecen al estándar Hayes AT, pero no todos los módems son iguales, así que los resultados podrían variar.
Sesiones del módem
Una sesión del módem le permite interaccionar con el módem directamente.
Usted teclea comandos y el módem responderá.
Para obtener una sesión del módem, cuando no haya ninguna conexión activa, vaya al diálogo Configuración, después a Módem Terminal.
Se abrirá una ventana para configuración interactiva del módem.
Pruebe a teclear ATZ (que reiniciará el módem).
Debería obtener OK como respuesta.
Perfiles del módem
Una de las razones por las razones por las que puede querer enviar comandos al módem directamente es si tiene un conjunto de configuraciones del módem que desea mantener, y no tenerlas que especificar en cada conexión.
Un buen método para hacer esto es a través de los perfiles del módem.
Los módems puede tener almacenados varios perfiles numerados 0,1,...
Se puede utilizar AT&V para verlos todos.
El perfil por defecto normalmente es 0 (esto se puede cambiar mediante AT&Y).
El perfil en uso se denomina perfil activo.
Cuando cambie un parámetro, se modificará el perfil activo.
El comando ATZ hará que el módem cargue el perfil por defecto, borrando todos los cambios que se hayan hecho.
Para que kppp utilice el perfil que usted desee, cambie la cadena de inicialización del módem (Configuración Módem Comandos del módem Cadena de inicialización).
Por ejemplo ATZ1 hará que kppp reinicie el módem y utilice el perfil almacenado número 1.
Si desea reiniciar su módem para volver al punto de inicio, utilice AT&F&W para establecer en el perfil activo los valores predeterminados en fábrica, y almacenarlos como perfil predeterminado.
Los ejemplos de cambios de perfiles se encuentran en la siguiente sección
Hacer que el módem cuelgue
En ocasiones puede encontrase con que kppp tiene dificultades para colgar el módem.
Esto se debe con casi total seguridad al una incoherencia entre los parámetros de kppp y los del módem.
Un módem normal utiliza dos métodos para decidir colgar la línea: comando, y DTR.
El método comando implica el envío de una secuencia de escape al módem, que lo deja en modo de comandos, y depués envía el comando de colgado (ATH).
A parte de kppp, al configurar el paquete pppd manualmente, es muy útil utilizar el método comando, ya que puede abandonar una sesión de terminal, y después iniciar pppd sin que el módem cuelgue.
En la mayoría de otras situaciones, se prefiere el método DTR, ya que es más sencillo.
Método DTR (AT&Dn)
El método DTR hará que el módem cuelgue en cualquier situación en la que kppp deje de utilizarlo.
Si obtiene una sesión del módem, hace una petición del estado a través de AT&V, y puede encontrar entre las opciones del perfil mostradas el texto &D0, significa que el método del colgado DTR está desactivado.
Para activarlo utilice el botón Terminal para abrir una sesión con el módem, y después:
Cómo funciona el método DTR
Cada vez que la línea Data Terminal Ready (DTR), que va entre el ordenador y el módem, sube, el módem cuelga.
Cuando kppp abre el puerto serie, la línea DTR se baja.
En un módem externo se puede apreciar cómo el indicador DTR (o TR) se ilumina cuando ocurre esto.
Cuando se apaga el indicador de TR (porque kppp ha cerrado el puerto serie, o algo peor), el módem cuelga.
Método de comandos
Para que cuelgue adecuadamente, abra una sesión del módem, y establezca el tiempo de guarda a un intervalo corto:
Después utilice el deslizador Tiempo de guarda, en la sección de comandos del módem, para que coincida con el registro (S12 a este valor 5).
El módem debe colgar adecuadamente.
Cómo funciona el método de comandos
Cuando el módem local está conectado al módem remoto, se encuentra en estado connect, en el que pasa todos los caracteres que recibe al módem remoto, sin interpretarlos.
Para hacer que el módem acepte los caracteres como comandos, es necesario establecer el módem en modo de comandos.
El código de escape lo hace.
El código de escape se define como tres intervalos del tiempo cuya logitud está definida por S12 en cincuentaavos de segundo.
Tranquilo (debe durar más que S12 / 50 segundos)
Carácter de escape (definido por el registro S2, el predeterminado es +), repetido tres veces (menos de S12 / 50 segundos entre cada una).
Tranquilo (debe durar más que S12 / 50 segundos)
Una vez que el módem se encuentra en estado de comandos, se le pueden enviar estos.
Para colgarlo, envíe el comando ATH.
Los códigos de escape y la secuencia de colgado utilizados por kppp se muestran en el diálogo Comandos del módem.
Deben ajustarse a la configuración de su módem.
Cómo hacer más rápida la marcación por tonos
Si puede utilizar marcación por tonos, el tiempo que tarda en marcar se puede modificar utilizando el registro S11.
Determina la duración (en centésimas de segundo) de cada uno de los tonos al marcar.
El valor predeterminado es normalmente 95 (casi un segundo).
La velocidad máxima depende de la tecnología de conmutación que utilice su operadora telefónica.
La duración mínima es de 50, velocidad que es casi la mitad y que normalmente funciona.
Configuración de kppp para retrollamada
Servidor de retrollamada para UNIX o Linux
Esta sección presenta la retrollamada en UNIX (Linux), y cómo se puede configurar kppp para conectarse con un servidor de retrollamas UNIX, en concreto a un servidor de retrollamada que funciona en Linux y basa su funcionamiento en guiones.
Una introducción a la retrollamada
Existen varias razones para considerar utilizar la retrollamada.
Algunas de ellas son:
Aumentar la seguridad de su red local
Reducir gastos de los colaboradores externos
Controlar los costes telefónicos allí donde las llamadas se consideran gastos empresariales
Piense en alguien que hace una llamada a su servidor de conexiones entrantes, y que piratea una contraseña. ¿Por qué tanta preocupación en mantener un cortafuegos en su conexión a Internet, si el acceso a su red es tan sencillo?
Los programas de retrollamada normalmente le pedirán un nombre, y después colgarán la línea.
A continuación le devolverán la llamada, normalmente a un número que está almacenado en una base de datos del servidor.
El cliente descuelga el teléfono y continúa con la conexión como si nada hubiera pasado.
El servidor pide en ese momento el nombre de usuario y la contraseña, para comprobar que usted es quien dijo ser en la primera llamada, o al menos si está donde dijo que estaba.
La conexión se establece a partir de ese momento con normalidad, y se inicia el servicio pppd.
Ahora llega la gran pregunta, cómo hacer que el cliente descuelgue el teléfono cuando llame el servidor. ¿Es necesario un programa especial como mgetty?
La respuesta, no, no hace falta ningún programa especial.
En general se puede utilizar cualquier cliente para las conexiones de retrollamada, incluso un programa de terminal normal y corriente como minicom.
Lo único que hay que hacer es enviarle al módem el comando AutoAnswer para que conteste automáticamente cuando detecte que en la línea se ha producido una llamada entrante (RING).
Esto se hace con el siguiente comando del módem:
Esto le dice al módem que descuelgue el teléfono al recibir el primer RING.
Como muchos otros programas cliente, kppp comprueba si la conexión ha sido cerrada por el servidor, y entonces detiene la sesión actual si se detecta un NO CARRIER.
Esto es, por lo tanto, el problema más grave de la configuración de la retrollamada.
Es obvio que se detectará un NO CARRIER en el momento en que el servidor de retrollamada cuelgue la línea.
Algunos servidores utilizan un programa de acceso especial. ¿Cómo resolver este problema?
Hay que decirle al módem que muestre siempre CARRIER UP (lo que no provoca ningún problema si se le dice al cliente que cuelgue la línea).
Puede hacer esto con el siguiente comando del módem:
Si desea problarlo, puede utilizar primero un programa de terminal ordinario como minicom, y llamar al servidor de retrollamada para ver lo que ocurre.
La configuración de kppp
Ahora que ya ha visto la teoría, ¿cómo se configura kppp para hacerse cargo de la conexión?
El proceso es bastante sencillo, como se puede ver.
Lo primero que hay que hacer es decirle al módem que acepte conexiones, y que no detenga la negociación cuando el servidor de retrollamada corte la comunicación por primera vez.
Puede añadir estas dos opciones en el apartado Módem de la configuración de kppp, añadiendo a la opción Cadena de marcado la cadena AT&C0S0=1DT
No hay más cambios que hacer en la configuración de kppp.
Si tiene problemas con la inicialización y el reinicio del módem, consulte la sección Solución de problemas para más información.
Piense un momento en el servidor.
Recuerde que los sistemas operativos UNIX, Windows y Macintosh tienen diferentes opiniones sobre cómo debe terminar una línea en un archivo de texto, y por lo tanto, también en los procesos de acceso al sistema.
Si está conectando a un servidor Windows, utilice CR / LF, si está conectando a un servidor UNIX, utilice use CR, y si el servidor es un Macintosh, utilice LF
Asumimos que estas intrucciones son válidas para las llamadas a un sistema de retrollamada de Linux que utiliza el acceso ordinario al sistema (no PAP o similar).
Establezca a Basada en script la opción de Autenticación en el apartado Marcar de la configuración de cuentas.
Ahora debe construir el guión de acceso.
La edición de guiones de acceso es una de las mejores características de kppp.
Puede encontrarlo en el apartado Script de autenticación en el diálogo Editar conexión.
En este ejemplo, el usuario userxyz necesita que se llame al siguiente guión.
El servidor de retrollamada ya conoce la tabla de nombres y sus números de teléfono correspondientes, así que, por motivos de seguridad, se elige con un álias el número de teléfono que será utilizado.
En cada línea, elija los criterios de la lista desplegable que se encuentra a la izquierda del diálogo, y teclee la acción en la casilla de texto de la derecha.
Pinche en el botón Añadir para añadir cada línea al guión.
Puede utilizar el botón Insertar para añadir una línea en el medio del guión, y Eliminar para eliminar una línea en caso de que se haya cometido un error.
El guión completo debería tener este aspecto (sin los comentarios, que comienzan por #)
Después de esperar la petición de autenticación, el usuario envía su identificador y espera una lista de los teléfonos disponibles para ese nombre de usuario.
Entonces le dice al servidor a cuál de los números ofrecidos debe llamar. kppp puede abrir un diálogo para hacer esto, si su localización cambia muy a menudo, p. ej. usted es un representante de ventas y se mueve de hotel en hotel.
Ahora el servidor está a la espera de un nombre de usuario y una contraseña para la autenticación, pero mientrastanto, el servidor cuelga y devuelve la llamada al usuario.
Se envía la información de autenticación, y kppp espera un símbolo de comandos, y después inicia un pequeño guión (llamado aquí start_ppp) que lanza pppd en el servidor.
El guión start_ppp podría tener el siguiente aspecto:
Es obvio que la configuración de un servidor PPP no está dentro de los objetivos de este documento.
Para tener información detallada, consulte las páginas del manual de pppd.
Se puede encontrar una excelente descripción de un servidor de retrollamada en http: / /ap-dec717c.physik.uni-karlsruhe.de / ~mh / callback
El resto de los elementos de la configuración, como la configuración de pppd, o los parámetros de la dirección IP se comportan de manera normal, y no se requiere ningún software especial para su funcionamiento.
Se puede ejecutar la retrollamada de kppp junto con otros programas como mgetty o cualquier otro servidor de fax en el mismo puerto serie.
No hay ningún problema con las llamadas entrantes, ya que kppp crea un archivo de bloqueo que informa al programa de fax que hay otra aplicación (en este caso, kppp) utilizando la línea en ese momento.
Solución de problemas
Hay algunos problemas comunes relacionados con la retrollamada de kppp:
Como el módem se inicia en modo auto respuesta, será necesario reiniciarlo una vez cerrada la conexión.
De otra forma, el módem seguirá descolgando la línea por usted, lo cual no es una buena idea si esa es su línea telefónica principal.
kppp tiene algunos problemas con la compartición de una línea con otro programa, como mgetty.
Si mgetty está funcionando en la misma línea de módem, kppp no podrá iniciar el módem correctamente.
kppp no es capaz de solicitar determinadas entradas del usuario durante el acceso basado en guiones.
Por desgracia, al utilizar el guión de ejemplo mostrado anteriormente, kppp pide el nombre de usuario la segunda vez que lo pide el servidor de retrollamada.
Puede evitar esto introduciendo el nombre de usuario manualmente en el guión de acceso (lo cual no queda elegante, pero funciona).
Recursos en Internet de software servidor
Hay disponibles conjuntos de software servidor de retrollamada para Linux es diversos lugares.
El conocido mgetty es un potente programa, y es capaz de manejar conexiones de retrollamada.
Se puede encontrar una descripción de cómo configurar mgetty para este propósito en http: / /www.dyer.demon.co.uk / slug / tipscrip.htm, la cual está escrita por Colin McKinnon, colin@wew.co.uk.
También hay un paquete para Linux que se encuentra listo para usar en http: / /www.icce.rug.nl / docs / programs / callback / callback.html.
Este paquete está mantenido por Frank B.
Brokken, frank@icce.rug.nl.
Como la configuración no es especialmente sencilla, he escrito una breve introducción que se encuentra en http: / /ap-dec717c.physik.uni-karlsruhe.de / ~mh / callback /, que además contiene una introducción más general a la retrollamada.
Retrollamada con RAS de Windows NT
Windows NT utiliza un método muy diferente al descrito anteriormente.
NT requiere una extensión del protocolo PPP, llamada CBCP (protocolo de control de retrollamada). pppd soporta este protocolo, pero deberá recompilarlo.
Si alguien ha conseguido conectarse por medio de retrollamada con un servidor NT, por favor háganoslo saber.
Preguntas y respuestas
Preguntas sobre la marcación
No puedo hacer que funcione kppp. kppp me dice que pppd ha fallado o ha caducado el tiempo de espera. ¿Qué está ocurriendo?
¿Ha leido el manual atentamente?
Estos son, una vez más, los errores más comunes:
Pinche en el botón Detalles. kppp le dará un extracto de los mensajes de registro de PPP (puede no funcionar en sistema que no sea Linux, incluso puede fallar en algunas distribuciones de Linux).
El registro le ayudará a rastrear los errores.
Asegúrese de que pppd es un binario y no un guión.
Asegúrese de que pppd tiene la marca setuid de root activada.
Asegúrese de que el archivo / etc / ppp / options existe y de que no contiene ninguna entrada conflictiva.
Si tiene dudas deje el archivo vacío.
Aseúrese de que no utiliza la opción lock como argumento de pppd (kppp ya se encarga del bloqueo de los dispositivos).
Elimine la opción lock tanto de / etc / ppp / options como de / .ppprc.
El uso del enlace simbólico / dev / modem puede causar conflictos.
Elimine esta fuente de problemas utilizando el dispositivo real, es decir / dev / cuaX o / dev / ttySX.
COM1 equivale a ttyS0, COM2 es ttyS1 y así.
Asegúrese de que establece los permisos correctos.
En caso de problemas quizá se mejor que primero lo ejecute como root y después, cuando todo funcione bien, trabaje con menos permisos si es que no puede ejecutar kppp con el modo setuid de root.
Probablemente lo mejor sea crear un grupo de usuarios llamado modem.
Puede que ejecute pppd demasiado pronto, es decir antes de que el servidor remoto esté listo para negociar una conexión PPP.
Si está utilizando un guión para el acceso, debería utilizar la terminal incluida para verificar el procedimiento de acceso.
Algunos proveedores requieren que se ejecute un simple comando como Send o Send ppp para lanzar PPP.
Algunos usuarios han informado que tenían la necesidad de añadir Pause 1 o Pause 2 a sus guiones para evitar conflictos de temporización.
Si no ocurre nada, puede obtener información de depuración de los registros del sistema utilizando el comando:
¿Por qué kppp me dice No puede abrir el módem?
Esto significa que kppp no tiene permisos para abrir el dispositivo del módem o que ha selecciona un dispositivo de módem que no es válido.
Asegúrese de que ha seleccionado el módem correcto.
Una vez que esté seguro de eso, debe darle a kppp los permisos adecuados para que acceda al dispositivo del módem y sea capaz de modificar el archivo / etc / resolv.conf en caso de que quiera que kppp configure correctamente el DNS.
Si le es posible ejecute kppp con setuid root, ya que de esta manera quedan resueltos todos los problemas de acceso.
En caso de que no pueda hacerlo, tendrá que suponer cuales son los permisos correctos que debe configurar.
Para darle a kppp permisos setuid root, haga lo siguiente:
¿Por qué me dice kppp que no puede crear un archivo de bloqueo del módem?
Esto significa, en la mayoría de los casos, que ha instalado kppp sin el modo SETUID activado y que el usuario que está ejecutándolo no tiene permisos de escritura en el directorio del archivo de bloqueo, que es, de forma predeterminada, / var / lock.
Este es, por ejemplo, el caso de los sistemas Red Hat.
Compruebe el diálogo del módem para ver cual es el directorio exacto que usted ha elegido.
La solución es sencilla: ejecute kppp con el SETUID de root activado o, si esto no es posible, deles a los usuarios normales acceso de escritura al directorio / var / lock.
También puede crear un grupo de usuarios del módem que tengan acceso al mencionado directorio.
¿Por qué se instala kppp con el bit de SETUID activado?
No hay necesidad de utilizar el bit SETUID, si tiene algún conocimiento sobre administración de sistemas UNIX.
Basta con que cree un grupo de usuarios llamado modem, añada a ese grupo todos los usuarios a los que quiere dar acceso al módem y configure los permisos del dispositivo del módem para que ese grupo tenga acceso de lectura y escritura.
Además, si quiere que la configuración DNS funcione con kppp, el grupo también tiene que tener permisos de lectura y escritura en el archivo / etc / resolv.conf.
Lo mismo ocurre con / etc / ppp / pap-secrets y / etc / ppp / chap-secrets si desea utilizar el soporte integrado para PAP o CHAP, respectivamente.
El equipo de kppp ha hecho últimamente un gran trabajo para hacer que kppp funcione bien sin necesidad de tener el setuid activado.
Pero la decisión sobre si lo instala y cómo lo instala es suya.
Le recomendamos que consulte también la sección Seguridad.
¿Qué puedo hacer cuando kppp se queda para y espera con el mensaje:
Esperando OK?
¿Ha cambiado la configuración de CR / LF?
Pruebe con CR, LF o CR / LF.
También es posible que el módem necesite algún tiempo para responder en su inicialización.
Abra el diálogo Comandos del módem y el apartado Módem y ajuste las esperas de retardo previo y posterior.
Compruebe si le funciona cuando incrementa drásticamente los valores, y después haga un ajuste más preciso.
La conexión funciona bien, pero no puedo abrir ninguna aplicación.
Es probable que haya seleccionado la opción Autoconfigurar el nombre de máquina y el servidor X tenga problemas para conectarse a su ordenador por este motivo.
Si verdaderamente necesita esta opción (y lo más probable es que no sea así), tendrá que configurar manualmente las autorizaciones apropiadas.
Si eso funciona, puede intentar lo siguiente:
Compruebe si ha proporciona a kppp al menos una dirección de un servidor DNS.
Compruebe el contenido del archivo / etc / host.conf.
Debería haber una línea que diga algo similar a order hosts, bind.
La palabra clave bind advierte al sistema de resolución que incluya una petición al servidor de nombre cuando haga una búsqueda de direcciones.
Si esa línea no existe, pruebe a añadirla.
¿Cómo hago que kppp envíe un \n o un \r?
Basta con enviar una cadena vacía, como en el siguiente ejemplo:
¿Cómo puedo hacer que kppp deje de informar del error:
No se puede crear el archivo de bloqueo?
Esto ocurre porque usted no tiene permisos suficientes para crear un archivo de bloqueo.
Si dedice utilizar un archivo de bloqueo, debe tener permiso de escritura en el directorio correspondiente (normalmente / var / lock).
Esto no será un problema si le ha dado a kppp permisos de setuid.
Por favor, lea la sección sobre los Archivos de bloqueo.
¿Por qué el módem hace tanto ruido al marcar?
Pinche en el bottón Configuración, después en Módem.
Desde ahí puede controlar el volumen del módem con tres niveles: apagado, medio y alto.
En la mayoría de los módems, los niveles medio y alto suelen ser iguales.
Si esto no funciona, asegúrese de que están establecidos los valores correctos para su módem en Configuración, Módem, Comandos del módem.
He establecido el volumen del módem en apagado y he verificado los comandos del módem, pero sigo escuchando un ruido estruendoso durante la marcación. ¿Por qué?
Es posible que se pierda la cadena de configuración del volumen si el módem no es capaz de trabajar a la misma velocidad a la que kppp envía los comandos.
Incremente el valor del retardo posterior de inicio en Configuración, Módem, Comandos del módem.
kppp informa de velocidades del módem anormales, como 115200 o 57600.
Muchos módems informan por defecto únicamente de la velocidad del puerto serie, y no de la velocidad de la línea telefónica.
Debe configurar ese tipo de módems para que informan de la verdadera velocidad añadiendo algunos comandos en las cadenas de inicialización o de marcado.
En muchos módems el comando es ATW2.
Si desea añadirlo a la cadena de marcado (que normalmente comienza por ATD), la nueva cadena debe ser ATW2D.
¿Por qué kppp informa de Velocidad desconocida?
Los módems modernos tienen normalmente mensajes de conexión muy complejos, como CONNECT LAP.M / V42.bis / 115000:RX / 31200:TX, y kppp no es capaz de interpretarlo correctamente.
Active Mostrar registro y podrá ver la velocidad de conexión.
Mi velocidad de conexión es lenta
Si no está satisfecho con la velocidad del módem, asegúrese de que ha establecido la velocidad de conexión (puede comprobarlo pinchando en Configuración, Dispositivo, Velocidad de conexión) a 57600 o más.
Asegúrese de que sus puertos serie admiten velocidades de conexión altas.
Hay muchos sistemas antiguos, basados en i486 que no funcionan correctamente si se establece la velocidad a 115200.
Si disponible de una antigua UART 8250, no funcionará.
Si tiene una 16550 o 16550A debería hacerlo sin problemas.
Además, debería consultar el manual de su módem para verificar las cadenas de inicialización que activan las velocidades de transferencia altas.
Mi velocidad de conexión es REALMENTE baja.
Si el flujo de datos es de sólo unos pocos bytes por segundo, debería comprobar su configuración de hardware.
Si el mover el ratón acelera la transmisión, puede dar por supuesto que se trata de un problema de hardware.
El módulo de KControl Información también puede servirle de ayuda.
Mi línea telefónica funciona con marcación por pulsos en vez de por tonos (o viceversa). ¿Cómo lo cambio?
Debe modificar la cadena de marcado de su módem.
Prácticamente la totalidad de los módems admiten los siguientes comandos AT:
ATDT
Selecciona marcación por tonos.
ATDP
Selecciona marcación por pulsos.
Preguntas sobre las tarifas telefónicas
¿Cómo puedo escribir un archivos de tarifas telefónicas?
Basta con que siga el archivo de tarifas TEMPLATE que se inclute con kppp.
Utilice la opción de línea de comandos de kppp -r para comprobar la sintaxis de su archivo de tarifas propuesto.
He escrito un archivo de tarifas telefónicas para mi zona. ¿A dónde puedo enviar para que otros puedan hacer uso del mismo?
¿Puede contener mi archivo de tarifas unidades de tiempo fraccionadas como "(0.17, 45.5)"?
Sí, es posible.
Puede no debería utilizar unidades menores de una décima de segundo salvo que sea estrictamente necesario, ya que eso repercutirá en la carga del procesador, aunque en ordenadores modernos es posible que no llegue a notarse.
En mi país hay otras festividades móviles además de Pascua.
En ese caso, será necesario que escriba algo de código nuevo que permita el procesamiento de esa festividad.
Revise el archivo ruleset.cpp y copie el ejemplo de Pascua (easter).
Depués envíenos las modificaciones.
Preguntas sobre los registros del sistema
He visto un mensaje que dice Serial line is looped back. ¿Qué significa?
La respuesta rápida: no ha iniciado el programa de PPP en el sistema.
El registro muestra Signal 15.
Si ve las siguientes líneas, lo más probable es que haya recibido un error de tiempo de espera de kppp. kppp ha estado esperando la activación del interfaz PPP y ha desistido después de un tiempo especificado.
A pppd se le ha informado que debe apagarse, con la señal número 15, es decir SIGTERM.
¿Qué pasa con Receive serial link is not 8-bit clean?
El servicio PPP informa de que en todos los datos que recibe, el bit 8 tiene valor cero.
En la mayoría de los casos esto significa que el servidor PPP remoto aún no está funcionando.
Puede que esté llamando a un sistema de identificación que devuelve toda la información que le envía su pppd.
¿Y can 't locate module ppp-compress? ¿Qué es esto?
¿Ve los siguientes mensajes?
Basta con que añada las líneas:
al archivo / etc / conf.modules.
Créditos y licencia
kppp
kppp está derivado de ezppp 0.6, por Jay Painter.
Sin embargo, prácticamente todo kppp ha sido reescrito, así que en este momento ezppp y kppp ya no tienen casi nada en común.
Desarrolladores principales:
Bernd Johannes Wuebben wuebben@kde.org
Mario Weilguni mweilguni@sime.com
Harri Porten porten@kde.org (Current maintainer)
Muchas gracias a las siguientes personas que han contribuido con su código a kppp
Jesús Fuentes Saavedra jesus.fuentes@etsi.tel.uva.es porimplementar varias opciones y otras tareas variadas.
Markus Wuebben wuebben@eure.de por el díalogo de peticiones ATI.
Peter Silva peter.silva@videotron.ca por los diálogos emergentes y otras contribuciones
Martin A.
Brown MABrown@etcconnect.org
Olaf Kirch okir@caldera.de por la introducción a los misterios de la comunicación de descriptores de archivos.
Copyright de la documentación 2001 Lauri Watts lauri@kde.org, mayormente basada en el original de Bernd Johannes Wuebben wuebben@kde.org
Esta documentación está sujeta a los términos de la Licencia de Documentación Libre GNU.
Este programa está sujeto a los términos de la Licencia Pública General GNU.
Instalación
Cómo obtener kppp
kppp forma parte del proyecto KDE http: / /www.kde.org /.
kppp está incluido en el paquete kdenetwork en ftp: / /ftp.kde.org / pub / kde /, el servidor FTP del proyecto KDE.
Compilación e instalación
Para poder compilar e instalar kppp en su sistema, introduzca las siguientes instrucciones en el directorio raíz de la distribución de kppp:
Como kppp utiliza autoconf y automake no debería producirse ningún problema en la compilación.
Si encuentra alguna dificultad le rogamos que se dirija a los foros de discusión de KDE.
Preparación de un ordenador para una conexión PPP
Las siguientes secciones contienen información más o menos genérica para algunos de los sistemas operativos más comunes en los que se podría ejecutar kppp.
Las siguientes páginas web puede ser de interés si busca información sobre el protocolo ppp, pppd y las redes en general.
El PFs de Linux PPP: http: / /metalab.unc.edu / mdw / FAQ / PPP-FAQ.html
El HOWTO de Linux PPP: http: / /metalab.unc.edu / mdw / HOWTO / PPP-HOWTO.html
http: / /www.thoughtport.com:8080 / PPP / index.html
La guía de administradores de red: http: / /metalab.unc.edu / mdw / LDP / nag / nag.html
Preparación de un sistema Linux para PPP
Para que kppp (y, de hecho, pppd) funcione, es necesario que el núcleo de su sistema tenga integrado el soporte para ppp.
Si no es el caso, obtenga la última versión de pppd en cualquiera de los servidores de software de Linux habituales (como ftp: / /sunsite.unc.edu / pub / Linux / system / Network / serial / ppp /), y recompile el núcleo con el soporte para ppp activado.
No se asuste, todo esto es más sencillo de lo que parece.
No olvide instalar después pppd.
Si no está seguro de tener un núcleo con soporte para ppp, ejecute el comando dmesg en la línea de comandos, y busque algo como esto:
kppp intenta determinar por sí mismo si el núcleo tiene soporte para PPP.
Si no lo tiene, usted será informado inmeditamente después de iniciar kppp.
El los núcleos de Linux con versiones 2.x, el servicio pppd debe ser una versión 2.3 o superior.
Ninguna de las versiones de pppd tiene en realidad una opción --version, pero al poner dicha opción el servicio pppd producirá un mensaje de error, y mostrará una lista de las opciones y otra información, en la que se puede encontrar la versión del servicio pppd.
Preparación de un sistema FreeBSD para las conexiones ppp
El conjunto de comandos de módem Hayes
Esta es una descripción del conjunto de comandos Hayes.
La mayoría de los módems utilizan gran parte de este conjunto de comandos.
Si ha perdido el manual de su modem, o si nunca lo ha tenido, esta referencia le podría ser útil.
Yo, por ejemplo, al final he aprendido a desconectar el altavoz del módem:
ATM0 - y por fin el silencio.
Las cadenas de inicialización del módem consisten en una serie de comandos.
Preparan el módem para las comunicaciones, estableciendo algunos parámetros como el modo de marcado, las esperas, la deteción de la señal de ocupado y muchas otras cosas.
Los programas de comunicación por módem más modernos reinician las cadenas de inicialización en función de las opciones de menú que seleccione, las características que active, etc..
Durante muchos años los módems Hayes han sido el estándar.
Con el crecimiento del mercado de fabricantes de módems, la mayoría se han unido, al menos en algo, al estándar Hayes.
Lo que viene a continuación en una lista parcial del conjunto de comandos de Hayes (llamados comandos AT).
El conjunto de comandos de Hayes se puede dividir en cuatro grupos:
Conjunto de comandos básico
Una letra mayúscula seguida de un dígito.
Por ejemplo, M1.
Conjunto de comandos extendido
El símbolo & y una letra mayúscula seguidos de un dígito.
Esta es una extensión del comando básico.
Por ejemplo, &M1.
Tenga en cuenta que el comando M1 es diferente del comando &M1.
Conjunto de comandos propietario
Comienzan normalmente con una barra invertida (\), o un signo de porcentaje (%), estos comandos varían dependiendo del fabricante del módem.
Pero esa razón, sólo se mostrarán unos pocos comandos de este tipo.
Comandos de registro
Un registro es un punto físico específico de la memoria.
Los módems tiene pequeñas cantidades de memoria.
Este cuarto conjunto de comandos se utiliza para introducir valor en un registro (punto de la memoria) en particular.
El registro almacenará una variable (información alfanumérica) en particular, que será utilizada por el módem y el programa de comunicaciones.
Por ejemplo S7=60 le indica al ordenador que establezca el valor 60 en el registro número 7.
Aunque la mayoría de los comando están definidos por una combinación de letra y número (L0, L1 etc.), el uso del cero es opcional.
En este ejemplo, L0 es lo mismo que indicar símplemente L.
Tenga esto en cuenta al leer la table que viene a continuación.
Estos son algunos de los caracteres más importantes que puede aparecer en la cadena de inicialización de un módem.
Estos caracteres no deberían ser cambiados en circunstancias normales.
AT
Le dice al módem que lo que sigue es un comando.
Así debe comenzar cada línea de commandos.
Z
Reinicia el módem a su estado por defecto.
, (una coma)
hace que el programa se detenga durante un segundo.
Puede utilizar más de una, consecutivamente.
Por ejemplo,,,,, le dice al módem que espere durante cuatro segundos (la duración de la pausa viene determinada por el valor del registro S8).
^M
Envía el carácter de retorno de carro al módem.
Es un código de control que la mayoría de los programas de comunicaciones interpretan como retorno de carro.
El conjunto básico de comandos Hayes
En orden alfabético:
Conjunto básico de comandos Hayes
Llama al número indicado y se conecta en modo llamante.
P
Llamada por pulsos
T
Llamada por tonos
W
Espera al segundo tono de llamada
,
Pausa durante el tiempo especificado en el registro S8 (normálmente 2 segundos)
;
Permanece en modo de comandos después de marcar.
!
Cuelgue fugaz (cuelga durante medio segundo, como para la llamada en espera).
L
Llama al último número marcado
El conjunto extendido de comandos Hayes
El conjunto extendido de comandos Hayes
Predeterminados genéricos compatibles con Hayes
Normalmente es bueno que utilice esto en la cadena de inicio, ya que los parámetros &F1 - &F3 varían de unos módems a otros, puede causar problemas de conexión (ya que nunca se sabe realmente qué es lo que cambia realmente &F2).
Por otro lado, también interesa probar las otras opciones que se detallan, muchos de los problemas se pueden resolver sustituyendo una cadena de inicio complicada por un simple &F2 o similar.
Sin embargo, si está construyendo una cadena de inicio, es mejor que comience con un simple &F, y no utilice los parámetros personalizados.
Comandos de barra invertida y de porcentaje
Comandos de barra invertida y de porcentaje
Una conexión directa es simplemente un enlace sin ningún tipo de control de errores o compresión de datos.
En este caso, las velocidades entre el ordenador y el módem y entre los módems deben ser idénticas.
Una conexión normal utiliza control de flujo (ya sea por software o hardware) para hacer una caché de la información enviada o recibida, de forma que el módem puede transmitir información a una velocidad diferente de la que se recibe.
Por ejemplo, un ordenador puede enviar a una velocidad real de 57kbps, utilizando compresión, mientras que el módem tiene una velocidad real de 28.8 kbps.
Este es el modo que utilizan la mayoría de los módems.
Una conexión fiable es un tipo de conexión normal; si, por alguna razón, no se pueden establecer o mantener la compresión de datos o la corrección de errores, se cortará la conexión. (Esencialmente, un módem de ese tipo asegura que todas las conexiones son fiables, ya que colgará cuando la conexión no lo sea).
Igualmente, las conexiones auto-fiables son básicamente lo mismo, excepto que el módem tratará de negociar las conexión para establecer un enlace fiable.
Nuevamente, este es el modo que utilizan la mayoría de los módems.
Registros-S
Registros S
Opciones a realizar cuando falla la correción de errores:
0 - Desconectar
1 - Establecer conexión directa
3 - Establecer conexión normal
4 - Establecer una conexión MNP si el posible, en caso contrario colgar
5 - Establecer una conexión MNP si es posible, en caso contrario una conexión directa.
7 - Establecer una conexión MNP si es posible, en caso contrario una conexión normal
1 = 300 bps
5 = 1200 bps
6 = 2400 bps
7 = 1200 / 75 bps (modo v.23)
8 = 4800 bps
9 = 9600 bps
10 = 12000 bps
11 = 14400 bps
12 = 7200 bps
Muchos módems tiene docenas, incluso cientos, de registros S, pero sólo la primera docena más o menos suele ser medianamente estándar.
Una plantilla de ejemplo para el cálculo del coste telefónico.
Si no puede encontrar una regla para su región tendrá que escribir una siguiendola siguiente plantilla.
No tenga miedo porque es realmente sencillo.
No olvide enviar sus reglas al mantenedor de kppp.