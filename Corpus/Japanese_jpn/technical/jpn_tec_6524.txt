# language_name_wals:	Japanese
# language_name_glotto:	Japanese
# iso639_3:	jpn
# year_composed:	NA
# year_published:	2014
# mode:	written
# genre_broad:	technical
# genre_narrow:	NA
# writing_system:	Jpan
# special_characters:	NA
# short_description:	GNOME
# source:	https://object.pouta.csc.fi/OPUS-GNOME/v1/raw/ja.zip
# copyright_short:	http://opus.nlpl.eu/GNOME.php
# copyright_long:	http://opus.nlpl.eu/GNOME.php J. Tiedemann, 2012, Parallel Data, Tools and Interfaces in OPUS. In Proceedings of the 8th International Conference on Language Resources and Evaluation (LREC 2012)
# sample_type:	whole
# comments:	NA

GNOME デスクトップシステム管理ガイド
GNOME システム管理ガイドは、デスクトップ環境を設定したりユーザ毎にデスクトップを管理する方法についてシステム管理者にいろいいろな情報を提供します。
2006
Brent Smith
2005
2004
Sun Microsystems
2003
GNOME ドキュメンテーション・プロジェクト
このドキュメントをフリーソフトウェア財団発行の GNU フリー文書利用許諾契約書 (バージョン 1.1 かそれ以降から一つを選択) が定める条件の下で複製、頒布、あるいは改変することを許可する。変更不可部分、表カバーテキスト、裏カバーテキストは存在しない。この利用許諾契約書の複製物は
本ドキュメントは GFDL の下で配布されているその他の GNOME マニュアル集の一部である。これらのドキュメントとは別に本ガイドを別個に配布する場合は、GFDL のセクション６で説明しているように、そのドキュメントに対するライセンスの複製を添付することで実現できる。
企業は自分達の製品とサービスを区別するために使用する多くの名称は自分たちの登録商標であると主張している。これらの名称が GNOME のドキュメントに表記されていたり、これらの登録商標が GNOME ドキュメンテーション・プロジェクトのメンバに提示している箇所は全部を大文字または最初の文字を大文字にしている。
DOCUMENT IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, WITHOUT LIMITATION, WARRANTIES THAT THE DOCUMENT OR MODIFIED VERSION OF THE DOCUMENT IS FREE OF DEFECTS MERCHANTABLE, FIT FOR A PARTICULAR PURPOSE OR NON-INFRINGING. THE ENTIRE RISK AS TO THE QUALITY, ACCURACY, AND PERFORMANCE OF THE DOCUMENT OR MODIFIED VERSION OF THE DOCUMENT IS WITH YOU. SHOULD ANY DOCUMENT OR MODIFIED VERSION PROVE DEFECTIVE IN ANY RESPECT, YOU (NOT THE INITIAL WRITER, AUTHOR OR ANY CONTRIBUTOR) ASSUME THE COST OF ANY NECESSARY SERVICING, REPAIR OR CORRECTION. THIS DISCLAIMER OF WARRANTY CONSTITUTES AN ESSENTIAL PART OF THIS LICENSE. NO USE OF ANY DOCUMENT OR MODIFIED VERSION OF THE DOCUMENT IS AUTHORIZED HEREUNDER EXCEPT UNDER THIS DISCLAIMER; AND
UNDER NO CIRCUMSTANCES AND UNDER NO LEGAL THEORY, WHETHER IN TORT (INCLUDING NEGLIGENCE), CONTRACT, OR OTHERWISE, SHALL THE AUTHOR, INITIAL WRITER, ANY CONTRIBUTOR, OR ANY DISTRIBUTOR OF THE DOCUMENT OR MODIFIED VERSION OF THE DOCUMENT, OR ANY SUPPLIER OF ANY OF SUCH PARTIES, BE LIABLE TO ANY PERSON FOR ANY DIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES OF ANY CHARACTER INCLUDING, WITHOUT LIMITATION, DAMAGES FOR LOSS OF GOODWILL, WORK STOPPAGE, COMPUTER FAILURE OR MALFUNCTION, OR ANY AND ALL OTHER DAMAGES OR LOSSES ARISING OUT OF OR RELATING TO USE OF THE DOCUMENT AND MODIFIED VERSIONS OF THE DOCUMENT, EVEN IF SUCH PARTY SHALL HAVE BEEN INFORMED OF THE POSSIBILITY OF SUCH DAMAGES.
DOCUMENT AND MODIFIED VERSIONS OF THE DOCUMENT ARE PROVIDED UNDER THE TERMS OF THE GNU FREE DOCUMENTATION LICENSE WITH THE FURTHER UNDERSTANDING THAT:
Brent
Smith
Sun
GNOME ドキュメンテーション・プロジェクト・チーム
デスクトップのシステム管理ガイド (GNOME 2.14 以降) V2.4
2004年3月
デスクトップのシステム管理ガイド (GNOME 2.6 版) V2.3
デスクトップのシステム管理ガイド (GNOME 2.4 版) V2.2
2003年9月
デスクトップのシステム管理ガイド (GNOME 2.2 版) V2.1
2003年1月
デスクトップのシステム管理ガイド (GNOME 2.0 版) V2.0
2002年12月
本文書は GNOME デスクトップのバージョン 2.14 を対象に記述してあります。
フィードバック
GNOME デスクトップやこの文書に対するバグの報告や提案については「
GConf の使い方
この章では
GConf について
GConf
introduction

すべてのユーザに対し、特定の設定項目に変更不可の値を強制できる (このようにしてユーザが特定の設定を更新できるか否かをシステム管理者側から制御できるようになっている)
すべてのユーザに対し、特定の設定項目にデフォルト値 (既定値) を指定できる
設定ファイルの中で指定されている設定項目に対して推奨値を使用できる
設定項目毎の説明を読むことができる
さらに

ユーザ設定を格納するリポジトリ


GConf のリポジトリ
repository

このリポジトリの実体は単にディレクトリ階層を持つファイルシステムです。リポジトリには次に示す情報が格納されています:Directory

設定項目のカテゴリに相当するサブディレクトリ (例えば、一般的な設定項目に対応する
サブディレクトリ毎に、設定キーの並びと設定キーに関する情報を格納した特別なファイル (例えば、
設定キーのすべてを説明したファイルを格納する
設定キーは基本的に文字列とか整数値、あるいは複数の文字列や整数値を要素とするリストのような値を持ちます。リポジトリの中に格納される設定キーの書式は、そのリポジトリを読み込む際に使用するバックエンド・モジュールに依存します。次は、バックエンド・モジュールとして拡張マークアップ言語の XML (
本ドキュメントで任意の設定キーを参照する際の表記は、キーの名前にそのパス名を追加するものとします。例えば、
GConf の設定ソース
configuration sources

リポジトリの内容を読む際に使用するバックエンド・モジュール
リポジトリを読み書きする権限
リポジトリ自身の場所
さらに
xml:readonly:/etc/gconf/gconf.xml.mandatory
include /etc/gconf/2/local-mandatory.path
include "$(HOME)/.gconf.path"
include /etc/gconf/2/local-defaults.path
xml:readwrite:$(HOME)/.gconf
xml:readonly:/etc/gconf/gconf.xml.defaults

設定ソース
説明
変更不可の設定
この設定ソースは読み込み専用の権限になっている (ユーザはこのソースの中にある値を上書きすることはできないので、設定ソースの中にある設定項目は強制的に適用される)
ユーザ向けの設定
この設定ソースはユーザのホームにある

デフォルト
この設定ソースにはデフォルトで適用される設定情報が含まれている
パス・ファイルに記述されている設定ソースは変更不可の設定項目がユーザ向けの設定項目を上書きするような並びになっており、さらにユーザ向けの設定項目がデフォルトの設定項目を上書きするような並びになっています。すなわち、
変更不可の設定
ユーザが指定した設定
デフォルトの設定
システム管理者ならば、
include した設定ソース
/etc/gconf/2/local-mandatory.path
特定のシステムに対して変更不可の設定項目を格納する際は、この設定ソースを利用する
$(HOME)/.gconf.path
ホーム・フォルダ配下にある
/etc/gconf/2/local-defaults.path
特定のシステムに対するデフォルトの設定項目を格納する際は、この設定ソースを利用する
GConf スキーマ
schemas
schema keys
schema objects
説明

アイテム
設定キー
アプリケーションの設定に相当する
スキーマ・キー
設定キーに対するスキーマ・オブジェクトを格納したキーを指す
スキーマ・オブジェクト
設定ソースの中にある要素 (設定キーの情報を格納している) で、次のような情報がある:
設定キーを使用するアプリケーションの名前
設定キーで使用する値の型 (例: 整数型、論理型など)
設定キーに対するデフォルトの値
設定キーに関する説明の要約
次の表に設定キーとスキーマ・キー、スキーマ・オブジェクトの例を示します:
例
/desktop/gnome/interface/font_name
/schemas/desktop/gnome/interface/font_name
設定キーとスキーマ・キーを関連付けることが可能になっています。例えば、次に示す
設定キーとスキーマ・キーを関連付ける際、その設定はスキーマ・キーのスキーマ・オブジェクトの中で明示されている推奨値を使います。この推奨値はスキーマ・オブジェクトの
スキーマは、一般的にデフォルトの設定ソースの中に格納されています。
GConf のスキーマ定義ファイル
schema definition files
一連のスキーマは
スキーマの定義ファイルは
スキーマの定義ファイルの中には、GNOME デスクトップのユーザ・インタフェースと一部密接に関連するものがあります。例えば、
GNOME デスクトップのユーザ・インタフェースの中には１つ以上のスキーマ定義ファイルから提供されている設定キーを持つものがあります。例えば、
GConf デーモン
gconfd
GConf デーモン
daemon


任意のアプリケーションが設定キーに関連付けられた値を要求すると、デーモンは次のような手順で設定ソースの中を検索します:
パス・ファイルの中に記述した設定ソースの順番で、設定キーの値を検索する (値が見つかったら、その値を返す)
値が見つからなければ、同様にパス・ファイルの中に記述した設定ソースの順番で、設定キーに相当するスキーマ・キーを検索する
スキーマ・キーが見つかったらスキーマ・キーの値をチェックする
スキーマ・キーの値がスキーマ・オブジェクトであったら、スキーマ・オブジェクトの


gconftool-2 --shutdown
GConf のコマンドライン・ツール
gconftool-2
GConf のコマンドライン・ツール
command line tool

キーの値を指定する
キーの値を表示する
アプリケーションをインストールする際にスキーマの定義からスキーマをインストールする
例えば、次のコマンドは
gconftool-2 --recursive-list /desktop/gnome
この下にある一覧は
gconftool-2 コマンドのいろいろなオプション
--all-dirs
指定したリポジトリの中にあるすべてのサブディレクトリを一覧表示する
--all-entries
指定したリポジトリの中にあるすべてのキーの値を表示する
設定ソース
--config-source=
このオプションと次の
--direct
このオプションと前の
--dump
指定した
例えば、このオプションの出力をリダイレクトすることで、お使いのパネル設定に関連したすべてのキーの一覧をファイルに書き出すことができる (このファイルは
--get
指定した設定キーの値を表示する (指定したスキーマ・キーに対するスキーマ・オブジェクトの要素が持つ値も表示する)
--help

ファイル名
--load=
このオプションを利用して、設定ソースにある現在のディレクトリの設定キーの値を、指定したファイルの中にある値にする (指定したファイルには、
--long-desc=
このオプションと
--makefile-install-rule
スキーマの定義ファイルをアプリケーションにインストールする
所有者
--owner=
このオプションと
--recursive-list
指定したリポジトリにあるすべてのサブディレクトリに格納されたすべての設定キーの値を表示する
--recursive-unset
指定したリポジトリにあるすべてのサブディレクトリに格納されたすべての設定キーの値 (ユーザが指定した値) を、設定ソースのデフォルト値に戻す
--set
設定キーの値をセットして、その値をユーザの設定ソースに書き込む (
gconftool-2 \\
 --set "/apps/gnome-terminal/profiles/Default/background_color" \\
 --type string "#000000"
この
--set-schema
任意のスキーマ・キーにある属性値をセットして、その値をデフォルトの設定ソースに書き込む
この
--type
--short-desc
--long-desc
--owner
例えば、次に示すコマンドは
gconftool-2 \\
 --set-schema "/schemas/apps/gnome-terminal/profiles/Default/background_color" \\
 --short-desc "Default background color of terminal"
--short-desc=
このオプションと
--shutdown

型
--type=
このオプションを使い、設定キーにセットする値の型を指定できる (スキーマ・キーの属性値をセットする場合にも利用できる); 次は妥当なデータ型の一覧である:
bool (論理型)
float (浮動小数点型)
int (整数型)
list (リスト型)
pair (ペア型)
string (文字列型)
--unset
設定キーの値 (ユーザが指定した値) を設定ソースのデフォルト値に戻す
--usage

値を指定する
preference values, setting
preference values
setting with GConf
任意の設定キーに対して変更不可の値またはデフォルトの値を指定することができるようになっています。 このような変更不可の設定値またはデフォルトの設定値をユーザ毎に変更する前に、まず
任意の設定キーに対して、変更不可の値やデフォルトの値を指定する際に使用する
設定キー
value
gconftool-2 --direct \\
 --config-source
例えば、強制的に HTTP プロキシのホストを
gconftool-2 --direct \\
 --config-source xml:readwrite:/etc/gconf/gconf.xml.mandatory \\
 --type string \\
 --set /system/http_proxy/host wwwproxy.xyz.com
一般ユーザはこの設定値を変更することはできません。
さらに
gconftool-2 --direct \\
 --config-source xml:readwrite:/etc/gconf/gconf.xml.defaults \\
 --type int \\
 --set /apps/metacity/general/num_workspaces 5
一般ユーザはこの設定値を上書きして変更できます。
変更不可の値またはデフォルトの値を変更する前に、まずすべてのユーザがログアウトしていることを確認しておいてください。
全般の設定を指定する
ここでは、GNOME デスクトップ環境の全般に影響する変更不可の値またはデフォルト値の指定方法について説明します。
HTTP プロキシを指定する
HTTP proxy, setting
HTTP proxy
HTTP プロキシの設定を指定する際は
プロキシの名前
gconftool-2 --direct \\
 --config-source xml:readwrite:/etc/gconf/gconf.xml.mandatory \\
 --type string \\
 --set /system/http_proxy/host
そして、HTTP プロキシのホストにデフォルトの値を指定する場合のコマンドは次のような書式になります:
gconftool-2 --direct \\
 --config-source xml:readwrite:/etc/gconf/gconf.xml.defaults \\
 --type string \\
 --set /system/http_proxy/host
さらに HTTP プロキシに関連する他の設定も指定できます。これらの設定について詳細は
プリンタ・マネージャを設定する
プリンタ・マネージャを設定する際は
print manager, setting
プリンタ・マネージャ
gconftool-2 --direct \\
 --config-source xml:readwrite:/etc/gconf/gconf.xml.mandatory \\
 --type bool \\
 --set /apps/gnome-print-manager/show_all_jobs false
そして、デフォルトの値を指定する場合のコマンドは次のような書式になります:
gconftool-2 --direct \\
 --config-source xml:readwrite:/etc/gconf/gconf.xml.defaults \\
 --type bool \\
 --set /apps/gnome-print-manager/show_all_jobs false
さらにプリンタ・マネージャに関連する他の設定も指定できます。これらの設定について詳細は
ワークスペースの個数を指定する
number of workspaces, setting
workspaces
setting number with GConf
ワークスペースの個数を固定にする場合のコマンドは次のような書式になります:
整数値
gconftool-2 --direct \\
 --config-source xml:readwrite:/etc/gconf/gconf.xml.mandatory \\
 --type int \\
 --set /apps/metacity/general/num_workspaces
そして、ワークスペースのデフォルトの個数を指定する場合のコマンドは次のような書式になります:
gconftool-2 --direct \\
 --config-source xml:readwrite:/etc/gconf/gconf.xml.defaults \\
 --type int \\
 --set /apps/metacity/general/num_workspaces
さらにウィンドウ・マネージャに関連する他の設定も指定できます。これらの設定について詳細は
キーボードの操作性を設定する
keyboard accessibility, setting
keyboard
setting accessibility preferences with GConf
キーボードを使った操作性を設定する際は
gconftool-2 --direct \\
 --config-source xml:readwrite:/etc/gconf/gconf.xml.mandatory \\
 --type bool \\
 --set /desktop/gnome/accessibility/keyboard/enable true
gconftool-2 --direct \\
 --config-source xml:readwrite:/etc/gconf/gconf.xml.defaults \\
 --type bool \\
 --set /desktop/gnome/accessibility/keyboard/enable false
さらにキーボードの操作性に関連する他の設定も変更できます。これらの設定について詳細は
キーボード・ショートカットを指定する
keyboard shortcuts, setting
setting shortcut preferences with GConf
キーボードのショートカットを設定する際は
gconftool-2 --direct \\
 --config-source xml:readwrite:/etc/gconf/gconf.xml.mandatory \\
 --type string \\
 --set /apps/metacity/global_keybindings/panel_run_dialog 'lt;Altgt;F3'
さらに他のキーボード・ショートカットも設定できます。これらの設定について詳細は
パネルとパネル・オブジェクトを設定する
panel object preferences, setting
panel preferences, setting individual
panels
preferences, individual, setting with GConf

パネルの個数
パネルのいろいろな種類
パネルのいろいろなプロパティ
パネルのいろいろな内容
パネルやパネル・オブジェクト毎に設定するのは複雑な作業です。これらを設定する際は、まず最初に
パネルやパネル・オブジェクト毎に設定を行うには、設定ソースの中にあるたくさんの設定項目の値を指定しなければなりません。パネルの設定値を指定する一番簡単な方法は
パネルやパネル・オブジェクトを指定する方法
panel and panel object

この
GNOME デスクトップ環境でパネルやパネル・オブジェクト全般の構造を指定するキーで、次に示すキーはそれぞれ GNOME デスクトップに表示されるパネルやパネル・オブジェクト、アプレットの個数を表しています:
/apps/panel/default_setup/general/toplevel_id_list
/apps/panel/default_setup/general/object_id_list
/apps/panel/default_setup/general/applet_id_list
このキーはさらにパネルやパネル・オブジェクトやアプレットの識別子も割り当てます。例えば、
このセクションの中にある
パネルのプロパティを表すキーで、次のような構造になっています:
/apps/panel/default_setup/toplevels/
例えば
パネル・オブジェクトとそのプロパティ、そしてパネル・オブジェクトを格納しているパネルなどをまとめて定義するキーです。例えば
アプレットとその設定、そしてアプレットを格納しているパネルなどをまとめて定義するキーです。例えば

パネルやパネル・オブジェクト毎の設定値を指定する方法
パネルやパネルの上に表示されているパネル・オブジェクトの設定値を指定する手順は次のとおりです:
GNOME のセッションにログインして、必要なパネルを設定する

例えば、次のコマンドラインを実行すると、パネルのデフォルト設定に関する XML 定義を
gconftool-2 --dump /apps/panel &gt; my-panel-setup.entries
この
例えば、デスクトップ・エントリのファイル名を変更したいとすると:



gconftool-2 --direct \\
 --config-source xml:readwrite:/etc/gconf/gconf.xml.defaults \\
 --load my-panel-setup.entries
外観の設定を指定する
ここでは、GNOME デスクトップ環境の外観と操作性に影響する変更不可の値またはデフォルト値の指定方法について説明します。
フォントの設定を指定する
fonts, setting
fonts
フォントの設定を指定する際は二つの設定キーの値をそれぞれ変更することになります。次の表は変更するキーとそれに関連付けられているユーザ・インタフェースの部品を一覧にしたものです:
GConf の設定キー
ユーザ・インタフェースの部品
外観の設定の「
/apps/nautilus/preferences/desktop_font
外観の設定の「
例えば、アプリケーションのフォントに
gconftool-2 --direct \\
 --config-source xml:readwrite:/etc/gconf/gconf.xml.mandatory \\
 --type string \\
 --set /desktop/gnome/interface/font_name "Sans 12"

gconftool-2 --direct \\
 --config-source xml:readwrite:/etc/gconf/gconf.xml.defaults \\
 --type string \\
 --set /apps/nautilus/preferences/desktop_font "palatino 12"
背景の設定を指定する
background, setting
background
preferences, setting with GConf
デスクトップの背景の設定を指定する際は
ファイル名.png
gconftool-2 --direct \\
 --config-source xml:readwrite:/etc/gconf/gconf.xml.mandatory \\
 --type string \\
 --set /desktop/gnome/background/picture_filename
gconftool-2 --direct \\
 --config-source xml:readwrite:/etc/gconf/gconf.xml.defaults \\
 --type string \\
 --set /desktop/gnome/background/picture_filename
さらに背景に関連する他の設定も指定できます。これらの設定について詳細は
スプラッシュ・スクリーンの画像を指定する
splash image, setting
splash screen
image, setting with GConf
スプラッシュ・スクリーンの画像を指定する際は
gconftool-2 --direct \\
 --config-source xml:readwrite:/etc/gconf/gconf.xml.mandatory \\
 --type bool \\
 --set /apps/gnome-session/options/show_splash_screen false
gconftool-2 --direct \\
 --config-source xml:readwrite:/etc/gconf/gconf.xml.defaults \\
 --type bool \\
 --set /apps/gnome-session/options/show_splash_screen false
さらにスプラッシュ・スクリーンに関連する他の設定も指定できます。これらの設定について詳細は
すべての設定をデフォルト値に戻す
restoring default preference values
restoring to default with GConf
ユーザ毎にデフォルトの設定値をリストアする場合のコマンドは次のような書式になります:
ユーザ設定のソース
gconftool-2 --direct \\
 --config-source
「
このコマンドを実行すると、指定した設定ソース配下にある全サブフォルダの設定キーをすべてデフォルトの設定ソースの設定にリセットします。
メニューのカスタマイズ
この章では GNOME デスクトップによるメニューの実装方法とメニューを独自に変更する方法について説明します。
メニューについて
menus
GNOME デスクトップ環境では「
メニューの階層を簡単に変更できる (この階層を変更するのにたくさんのファイルを変更しなくてもよい上に、アプリケーションのコードを変更したりファイルを移動する必要がない)
アプリケーションを簡単にインストールできる (アプリケーションをインストールする際にメニュー階層についての情報をアプリケーション側に提供しておく必要がない)
ユーザが変更できないような設定にすることも可能である
GNOME デスクトップのメニューは次に示すコンポーネントを使用します:
メニューの定義ファイル
デスクトップ・エントリのファイル
フォルダ・エントリのファイル
いろいろなメニュー定義ファイル
menu definition files
.menu files
メニューの階層を定義するメニュー・ファイルは GNOME の「
$XDG_CONFIG_DIRS という環境変数は「
すべてのメニュー・ファイルは
パスを検索する順番がわからなくなった場合に備えて、ここで


一番最初に見つかった



&lt;!DOCTYPE Menu PUBLIC "-//freedesktop//DTD Menu 1.0//EN"
 "http://www.freedesktop.org/standards/menu-spec/1.0/menu.dtd"gt;
&lt;Menugt;
 &lt;Namegt;Applicationslt;/Namegt;
 &lt;Directorygt;Applications.directorylt;/Directorygt;

 &lt;!-- まず .directory と .desktop ファイルが格納されているシステム規模のフォルダを読み込む --gt;
 &lt;DefaultAppDirs/gt;
 &lt;DefaultDirectoryDirs/gt;

 &lt;!-- Accessories (アクセサリ) というサブメニュー --gt;
 &lt;Menugt;
 &lt;Namegt;Accessorieslt;/Namegt;
 &lt;Directorygt;Accessories.directorylt;/Directorygt;
 &lt;Includegt;
 &lt;Andgt;
 &lt;Categorygt;Utilitylt;/Categorygt;
 &lt;Notgt;
 &lt;Categorygt;Systemlt;/Categorygt;
 &lt;/Notgt;
 &lt;/Andgt;
 &lt;/Includegt;
 &lt;/Menugt; &lt;!-- ここがサブメニューの終わり --gt;

 &lt;!-- さらにたくさんのサブメニューを追加できる --gt;

&lt;/Menugt; &lt;!-- Applications メニューの終わり --gt;

メニューの定義ファイルに記載する要素
要素
&lt;Menugt;
定義ファイルのルート要素で、サブメニューを定義する際はこの
&lt;Namegt;
メニューの名前を指定する (
&lt;Directorygt;
メニューの名前やコメント、アイコンなどを記述した
デフォルトで
&lt;DefaultAppDirsgt;
$XDG_DATA_DIRS/applications/
これは、
&lt;DefaultDirectoryDirsgt;
$XDG_DATA_DIRS/desktop-directories/
これは、
&lt;Includegt;
&lt;Filenamegt;
&lt;Categorygt;
&lt;Andgt;
&lt;Orgt;
&lt;Notgt;
&lt;Allgt;
デスクトップ・エントリ
実際のメニューを生成する際に使用するフィルタリングのルールを並べて指定する (
&lt;Excludegt;

デスクトップ・エントリ


すべて
この
いずれか
この
この
すべての
デスクトップ・エントリのファイル
desktop entry files
.desktop ファイル
「
$XDG_DATA_DIRS という環境変数は「
このデスクトップ・エントリのファイルは
次はデスクトップ・エントリのファイルの例です:
[Desktop Entry]
Encoding=UTF-8
Name=Calculator
Name[ja]=関数電卓
...
Comment=Perform arithmetic, scientific or financial calculations
Comment[ja]=算術/科学/財務の計算を行います
...
Exec=gcalctool
Icon=accessories-calculator
Terminal=false
Type=Application
StartupNotify=true
Categories=GNOME;GTK;Utility;Calculator

デスクトップ・エントリのキーワード
キーワード
Categories
アイテムを説明するためのキーワードをセミコロン (;) を区切り文字としていくつか羅列する (カテゴリを表す標準的なキーワードは「
「
Comment
この項目の概要を表す (このキーワードはメニュー項目の上にポインタをのせた時に現れるツールチップの中に表示される文章である)
Encoding
デスクトップ・エントリに記載する情報のエンコーディングを表す
Exec
メニュー項目を選択した時に実行するコマンドを表す
Icon
メニュー項目に表示されるアイコンのファイル名を表す (ファイル名のパス、あるいは拡張子は指定しないこと)
MimeType
このデスクトップ・エントリが表すアプリケーションで扱える MIME 型を表す
Name
メニュー項目の名前を表す文字列 (この文字列が実際のメニューに表示される)
NoDisplay
このオプションは「アプリケーションは存在しているが、メニュー項目としては表示しない」という時に指定する
Terminal
キーワードの
起動するコマンドがウィンドウを生成しない場合、このキーワードには
Type
メニュー項目の種類を表す (この値は次のいずれかとする):




デスクトップ・エントリのファイルについて詳細については、次の URL にある仕様書をご覧ください:
http://www.freedesktop.org/Standards/desktop-entry-spec
パネルのランチャとデスクトップ上のオブジェクトもデスクトップ・エントリのファイルを利用しています。ランチャやデスクトップ上のオブジェクトで使用するデスクトップ・エントリのファイルはメニュー項目で使用するものと同じ情報が記載されています。例えば、デスクトップ・エントリのファイルはランチャをクリックした時に起動するコマンドが記載されています。
ディレクトリ・エントリのファイル
directory entry files
.directory ファイル
「
このディレクトリ・エントリのファイルは
次はディレクトリ・エントリのファイルの例です:
[Desktop Entry]
Name=Graphics
Name[ja]=グラフィックス
...
Comment=Graphics applications
Comment[ja]=グラフィックス関連のアプリケーションです
...
Icon=gnome-graphics
Type=Directory
Encoding=UTF-8

ディレクトリ・エントリのキーワード
キーワード
メニューの名前を表す文字列 (この文字列が実際のメニューに表示される)
このメニューの概要を表す (このキーワードはメニューの上にポインタをのせた時に現れるツールチップの中に表示される文章である)
メニューに表示されるアイコンのファイル名を表す (ファイル名のパス、あるいは拡張子は指定fしないこと)
メニューの種類を表す (このキーの値は常に
システム・メニューを編集する
editing
手動でメニューの設定ファイルとデータ・ファイルを編集して、いろいろなメニューをカスタマイズできるようになっています。
メニューを追加する
adding
すべてのユーザ向けにメニューを１つ追加する手順は次のとおりです:
追加するメニューに対応したディレクトリ・エントリのファイルを作成し、

この
先ほど作成した
一番最初に作成した
ここで新たに作成したメニューにメニュー項目を追加する際は「
ユーザが次回ログインすると、ここで作成したメニューがメニュー・バーの中に表示されるはずです。
作成したメニューが見つからない場合

メニュー項目をメニューに追加する
adding items to
すべてのユーザ向けにメニュー項目を１つ追加する手順は次のとおりです:
追加するメニュー項目に対応したデスクトップ・エントリのファイルを作成する (デスクトップ・エントリのファイルについて詳細は「
作成したデスクトップ・エントリのファイルを

ユーザが次回ログインすると、ここで作成したメニュー項目が表示されるはずです。
メニューのプロパティを編集する
editing properties of
すべてのユーザ向けにメニューのプロパティを編集する手順は次のとおりです:
このファイルの中から、編集したいプロパティを持つメニューに対応した
このディレクトリ・エントリのファイルを開き、メニューのプロパティを変更する (
メニュー項目を編集する
editing menu items
メニュー項目を編集する手順は次のとおりです:
メニュー項目に対応したデスクトップ・エントリのファイルを
デスクトップ・エントリのファイルでメニュー項目のプロパティを編集する (デスクトップ・エントリのファイルについて詳細は「
メニューからメニュー項目を削除する
deleting menu items
すべてのユーザ向けにメニューからメニュー項目を削除する手順は次のとおりです:
このファイルの中から、削除したいデスクトップ・エントリ名を含む


ユーザが次回ログインすると、ここで指定したメニュー項目が表示されないはずです。
&lt;!-- ... --gt;

 &lt;Menugt;
 &lt;Namegt;Accessibilitylt;/Namegt;
 &lt;Directorygt;Accessibility.directorylt;/Directorygt;
 &lt;Includegt;
 &lt;Andgt;
 &lt;Categorygt;Accessibilitylt;/Categorygt;
 &lt;Notgt;lt;Categorygt;Settingslt;/Categorygt;lt;/Notgt;
 &lt;/Andgt;
 &lt;/Includegt;
 &lt;Excludegt;
 &lt;Filenamegt;dasher.desktoplt;/Filenamegt;
 &lt;/Excludegt;
 &lt;/Menugt;

&lt;!-- ... --gt;
ユーザ・メニューを編集したり複数のメニューをまとめる
editing user menus
次の GNOME アプリケーションを使ってユーザ毎に自分のメニューを編集できるようになっています:
GNOME メニュー・エディタまたはメイン・メニュー (alacarte)
ユーザが自分のメニューを編集する際に利用できるシンプルなメニュー・エディタがあります。詳細については
ユーザが独自にメニューを定義する際は、
ユーザ定義のメニューでは「
ユーザ定義のメニューはシステム規模のメニューよりも優先されるようになっているので、システム規模のメニューと明示的に
システム規模のメニューと結合してまとめる
merging the system menu
たまに標準的なシステム規模のメニューに加えて何かメニュー項目を追加したり、使わないメニュー項目を削除したい場合があります。このような場合は、ユーザ専用の

古い仕様では
以前の仕様では
メニューの結合は次のように実施されます:
結合したメニュー定義ファイルは
結合してまとめたメニュー定義ファイル


&lt;!DOCTYPE Menu PUBLIC "-//freedesktop//DTD Menu 1.0//EN"
 "http://www.freedesktop.org/standards/menu-spec/menu-1.0.dtd"gt;

&lt;Menugt;
 &lt;Namegt;Applicationslt;/Namegt;
 &lt;MergeFile type="parent"gt;/etc/xdg/menus/applications.menult;/MergeFilegt;
 &lt;Menugt;
 &lt;Namegt;Accessibilitylt;/Namegt;
 &lt;Excludegt;
 &lt;Filenamegt;dasher.desktoplt;/Filenamegt;
 &lt;/Excludegt;
 &lt;/Menugt;
&lt;/Menugt;
独自のメニューを結合しまとめる
merging arbitrary menus
独自のメニュー定義ファイルをシステム規模のメニューと同じ方法で結合しまとめることができるようになっています。異なる点は

テーマのインストール
この章では GNOME デスクトップで利用できるいろいろなテーマとその設定、テーマを設定するオプションのインストール方法、そして独自のオプションを作成する方法について説明します。
テーマについて
themes
テーマとは、GNOME デスクトップの部品に対する視覚的な外観を指定する「既に調整された設定」の集まりです。ユーザはいろいろなテーマの中から一つ選択して自分が使っている GNOME デスクトップの外観を変更することができるようになっています。
テーマには、次に示すような GNOME デスクトップのいろいろな部分に作用する設定が含まれています:
コントロール (GUI の部品)

ウィンドウの境界 (フレーム)


テーマの Index ファイル
テーマ毎に Index ファイルが用意されており、このファイルの中でテーマの特徴を定義します。Index ファイルの名前は
次はテーマの Index ファイルの例です:
[Desktop Entry]
Type=X-GNOME-Metatheme
Name=High Contrast Large
Name[ja]=ハイ・コントラスト (大)
Comment=Large black-on-white text and icons
Comment[ja]=白地に黒色のテキストとアイコンの拡大版
Encoding=UTF-8

[X-GNOME-Metatheme]
GtkTheme=HighContrastLargePrint
IconTheme=HighContrast
MetacityTheme=Atlanta
ApplicationFont=sans 18
テーマの Index ファイルで利用するキーワードを次の表に示します:
テーマの Index ファイルで利用できるキーワード
キーワード
このテーマが、コントロール (GUI の部品) やウィンドウの境界 (フレーム) 、アイコンといったテーマのオプションの外観を決定することを指定する
テーマの名前を指定する (これは
テーマの簡単な説明を指定する (これは
GtkTheme

IconTheme

MetacityTheme

ApplicationFont

新しいコントロールのオプションをインストールする
controls options
installing

オプションのファイル
オプション名
/usr/share/themes/
画像ファイル
/usr/share/themes/
一般的に、コントロールに対する新しいオプションは
ユーザはコントロールの設定に関する独自のオプションもインストールできます。もしユーザ専用のオプションをインストールするのであれば、その設定ファイルを
新しいウィンドウの境界をインストールする
window frame options

/usr/share/themes/
/usr/share/themes/
一般的に、ウィンドウの境界に対する新しいオプションは
ユーザはコントロールの設定に関する独自のオプションもインストールできます。もしユーザ専用のオプションをインストールするのであれば、その設定ファイルを
新しいアイコンをインストールする
icons options

/usr/share/icons/
/usr/share/icons/
一般的に、アイコンに対する新しいオプションは
ユーザはアイコンの設定に関する独自のオプションもインストールできます。もしユーザ専用のオプションをインストールするのであれば、その設定ファイルを
テーマに応じたアイコンをインストールする
installing icons
GNOME デスクトップでは特殊な視覚効果を必要とするユーザ向けにいくつかのテーマをを提供しています。例えば、テーマの多くは視力の低いユーザに配慮して設計されています。そのため、いろいろなテーマで同じアイコンを正しく表示するには、複数のバージョンをインストールしておく必要があるかもしれません。
アプリケーションによっては新しいアイコンをインストールしなければならない場合もあるかもしれません。新規にアイコンをインストールする際は、いろいろなテーマの中でアイコンを正しく表示できるようにするために、そのアイコンに対して複数のバージョンを作成しておいてください。作成しておくアイコンのバージョンは次のとおりです:
GNOME デスクトップのアプリケーションで使用するためのアイコン
GTK+ のアプリケーション、または GTK+ のストック・アイコンとしてアプリケーション内部で使用するためのアイコン

新規にアイコンをインストールする際は、次に示すような 48 x 48 ピクセルのアイコンを複数作成しておいてください:
通常のアイコン
低コンストラストなアイコン
高コンストラストなアイコン
高コンストラストなアイコンを反転したアイコン
可能であれば、大きな画面を持たないデスクトップのテーマ向けに、16 x 16 ピクセルのアイコンもそれぞれ作成しておいてください。
アイコンを「
アプリケーションのランチャやパネルに表示するアイコンを作成する方法について詳細は「
独自にコントロールのオプションを作成する
creating custom
コントロールを設定するオプションがお使いのユーザにマッチしないのであれば、独自にコントロールのオプションを定義してみてください。独自のオプションを作成する手順は次のとおりです:

/usr/share/themes/SmallPrint
/usr/share/themes/SmallPrint/gtk-2.0
システム規模のテーマからユーザの要求を満たす設定に最も近い

もし新しいオプションに画像を含めたいのであれば、その画像を新しいオプションをインストールする
これでユーザは新しいコントロールのオプションを選択できるようになりました。

フォントの設定
この章では GNOME デスクトップのフォントを設定する方法を説明します。
フォントの設定について
configuring fonts
fontconfig
GNOME デスクトップでは


http://freedesktop.org/software/fontconfig
フォントの置き換え
substitution

選択したフォントの中には存在していない文字を表示しなければならなくなった場合、
さらに
すべてのユーザ向けにフォントを追加する
adding for all users
デスクトップ環境を利用するすべてのユーザ向けにフォントを追加する手順は次のとおりです:
フォントのファイルを

フォルダ名
fc-cache
ユーザ毎にフォントを追加する
adding for individual users
ユーザが個々にフォントを追加する手順は次のとおりです:
フォントのファイルをユーザの
MIME 型
この章ではアプリケーションで MIME 型を検出する方法や、MIME 型を登録する方法、そして GNOME デスクトップにアプリケーションを追加する方法について説明します。
本章は、MIME データベースをいろいろ設定する方法に関するシステム管理者の理解を促し、加えて MIME システムの一般的な概要を説明することを目的としています。そのため、必要以上に詳しく解説する
MIME 型について
MIME types

もう一つ別の例を紹介すると、
そのファイルを妥当なアプリケーションで開く
そのファイルの種類を説明する文字列を表示する
そのファイルの種類を表す妥当なアイコンを表示する
そのファイルを開くことができる他のアプリケーションの一覧を表示する
もともと MIME 型は電子メールの本文の形式を識別するための標準として提案されていたものでした。現在では、たくさんのシステムがこの MIME 型を利用してシステムに格納されているファイルの種類を特定しています。MIME 型は、トップレベルは
application
audio
image
message
model
multipart
text
video
現在のところ
GNOME における MIME 型の実装は「
MIME に関連するすべてのファイルの標準的な場所を特定できる
新しく MIME 型の情報を登録する標準的な方法をアプリケーションに提供できる
任意のファイルから MIME 型を取得する標準的な方法を提供できる
任意の MIME 型に関する情報を取得する標準的な方法を提供できる
本章の残りの部分で MIME 型のデータベースを構成しているファイルやフォルダについて説明し、それからソース XML の詳細と MIME 型を作成したり編集する方法、そして特定の MIME 型を取り扱うハンドラとしてアプリケーションを登録する方法、最後にアプリケーションを GNOME デスクトップに追加する方法について説明します。
MIME 型のデータベースについて
database
MIME 型のデータベースは、次に示すデータを持った、いろいろな種類のファイルから構成されています:
MIME 型の種類
ファイルの MIME 型を決定するメソッド
MIME 型に関するメタ情報 (例えば MIME 型を説明する可読な情報など)
データの保管場所
システム管理者が MIME 型を使ったシステムを理解する上で最も重要でかつ基本的なことは、このシステムを構成しているファイルがどこに保管されているかということを知るということです。「
MIME 型のデータベースは
例えば環境変数のためのデフォルトのパスを想定し、「
~/.local/share/mime/text/plain.xml
/usr/local/share/mime/text/plain.xml
/usr/share/mime/text/plain.xml
データの内容
次の一覧は MIME 型のデータベースを構成しているフォルダとファイル、そしてその概要を説明したものです:
&lt;MIMEgt;/packages/
このフォルダにはたくさんの XML ファイルが格納されており、それぞれのファイルには複数の MIME 型の説明が記述されています。デフォルトでは、
新しい MIME 型に関するデータを提供するアプリケーションは、このフォルダに
メディアの種類
詳細な形式
&lt;MIMEgt;/
これらのフォルダとそこに格納されているファイルは、
例:
&lt;?xml version='1.0' encoding='utf-8'?gt;
&lt;mime-type xmlns="http://www.freedesktop.org/standards/shared-mime-info" type="text/plain"gt;
&lt;!--update-mime-database コマンドで自動的に生成されます (** 編集しないこと！ **)--gt;
 &lt;commentgt;plain text documentlt;/commentgt;
 &lt;!-- (いろいろな言語で翻訳したコメントが続く) --gt;
 &lt;comment xml:lang="fr"gt;document plein textelt;/commentgt;
 &lt;comment xml:lang="hu"gt;egyszerű szöveglt;/commentgt;
 &lt;comment xml:lang="it"gt;Documento in testo semplicelt;/commentgt;
 &lt;comment xml:lang="ja"gt;平文テキストドキュメントlt;/commentgt;
 &lt;!-- (いろいろな言語で翻訳したコメントが続く) --gt;
&lt;/mime-typegt;

&lt;MIMEgt;/globs
このファイルには、１行につき１つの MIME 型と１つの グロブ・パターンが記述されています (区切り文字はコロン
このファイルも
&lt;MIMEgt;/magic
これは、ファイルの中身の「においをかぐ」(
このファイルも
&lt;MIMEgt;/XMLnamespaces
このファイルには XML の名前空間を MIME 型にマッピングする情報が記述されています。１行につき名前空間と localName と MIME 型の三つの情報が記述され、区切り文字はスペース
&lt;MIMEgt;/aliases
このファイルには MIME 型の別名が一覧で記述されています。別名とはまれに MIME 型が別の型として扱われることを意味します。一行ごとに２つのデータを記述します: 先頭が別名で、最後が MIME 型です (区切り文字はスペース
&lt;MIMEgt;/subclasses
最初の型のいずれかのインスタンスが最後の型のインスタンスの一つになるのであれば、その型は別の型のサブクラスといいます。例えば、image/svg 型のファイルは全て text/xml でかつ text/plain でかつ application/octet-stream なファイルといえます。実際は、データの種類ではなくファイルの形式でサブクラスに分類しています (例えば、すべてのスプレッドシートが継承する「汎用的なスプレッドシート」なんてものは存在しませんから)。
このファイルにはサブクラス化した MIME 型とそれらの「親」に相当する MIME 型が一覧で記述されています。「
MIME 型データベースを更新する
新しい MIME 型をシステムに追加するとか、MIME 型の情報を変更するといった作業を行うシステム管理者にとって、MIME 型のデータベースを更新する方法を理解しておくことは重要なことです。ここでは
例えば、アプリケーションが新しい MIME 型の情報を
#
update-mime-database /usr/share/mime
***
* Updating MIME database in /usr/share/mime...
***
すると、
ソース XML ファイル
source XML files

名前空間を
ルート要素は

デフォルトで、


要素 (含む属性)
*.xyz
&lt;glob pattern="
mime-type
pattern
この要素はファイル名に対する glob のパターンを表し、もしファイル名がこのパターンにマッチしたら、親の
50
&lt;magic priority="
match
priority
type
offset
mask
「XDG Shared MIME Info の仕様」
この要素には子要素としていくつかの
media
subtype
&lt;alias type="
application/x-pdf
application/pdf
この要素を使って、親の
&lt;sub-class-of type="
image/svg
text/xml
text/plain
application/octet-stream
この要素では MIME 型のサブクラスとして
ロケール名
&lt;comment xml:lang="
xml:lang
この要素は MIME 型に対する可読な説明を提供する (一行ごとに
名前空間
&lt;root-XML namespaceURI="
namespaceURI
localName
ファイルが１個のソース XML ファイルとわかった場合、この要素を使って
これらのルールを理解する一番簡単な方法は、やはり「サンプルを見る」ということでしょう。「
glob のパターンと magic ルールを並べる順番はこのドキュメントのスコープを越えて適用されます。スコープについて詳細は「
ソース XML ファイルの例:
&lt;?xml version='1.0'?gt;
&lt;mime-info xmlns='http://www.freedesktop.org/standards/shared-mime-info'gt;
 &lt;mime-type type="text/x-diff"gt;
 &lt;commentgt;Differences between fileslt;/commentgt;
 &lt;comment xml:lang="ja"gt;ファイル間の差分lt;/commentgt;
 &lt;!-- 以下、他の言語で翻訳したコメント文が続く... --gt;
 &lt;magic priority="50"gt;
 &lt;match type="string" offset="0" value="diff\ "/gt;
 &lt;match type="string" offset="0" value="***\ "/gt;
 &lt;match type="string" offset="0" value="Common subdirectories: "/gt;
 &lt;/magicgt;
 &lt;glob pattern="*.diff"/gt;
 &lt;glob pattern="*.patch"/gt;
 &lt;/mime-typegt;
&lt;/mime-infogt;
MIME 型を変更する
verifying changes
modifying
アプリケーションが
システム規模ですべてのユーザに対する MIME 型データベースを変更することも、特定のユーザのためだけに変更することもできるようになっています。すべてのユーザに対してデータベースを変更する際は、
変更が済んだら、必ず
MIME 型を追加したり変更する
すべてのユーザに対して一つ以上の MIME 型を追加する手順は次のとおりです:
MIME 型の定義をいろいろ記述したソース XML ファイルの
この
システム管理者の権限で
特定のユーザに対してのみ一つ以上の MIME 型を追加する場合の手順は、ここで編集した
変更点を検証する
MIME 型のデータベースに変更を加えその内容を更新したら、
SVG のファイルに対して
$
gnomevfs-info mime-diagram.svg
Name : mime-diagram.svg
Type : Regular
MIME type : image/svg+xml
Default app : eog.desktop
Size : 14869
Blocks : 32
I/O block size : 4096
Local : YES
SUID : NO
SGID : NO
Sticky : NO
Permissions : 600644
Link count : 1
UID : 1000
GID : 100
Access time : Wed Feb 22 18:24:47 2006
Modification time : Wed Feb 22 18:24:42 2006
Change time : Wed Feb 22 18:24:42 2006
Device # : 775
Inode # : 297252
Readable : YES
Writable : YES
Executable : NO
「

MIME 型を作成 (または上書き) して検証する際の手順は次のとおりです:
ホーム・フォルダに
特定のファイルにマッチさせる glob パターンや magic ルールが必要ない時に、ファイルの中に文字列からなるデータが格納されているならば

「


gnomevfs-info testing.xyz | grep MIME
MIME type : application/x-newtype

&lt;?xml version='1.0' encoding='utf-8'?gt;
&lt;mime-info xmlns="http://www.freedesktop.org/standards/shared-mime-info"gt;
 &lt;mime-type type="application/x-newtype"gt;lt;commentgt;new mime typelt;/commentgt;lt;glob pattern="*.xyz"/gt;lt;/mime-typegt;
&lt;/mime-infogt;
MIME 型を処理するアプリケーションを登録する
registering applications for
applications
registry
任意の MIME 型のファイルを扱うアプリケーションの登録はかなり単純です。それらのアプリケーションの

特定の MIME 型で使用するデフォルトのアプリケーションは
ユーザ用の
[Default Applications]
application/pdf=evince.desktop
text/html=epiphany.desktop
text/plain=gedit.desktop
image/jpeg=eog.desktop
image/png=eog.desktop
text/xml=gedit.desktop
XDG デスクトップ・エントリの仕様
アプリケーション毎に MIME 型を登録する方法は「
アプリケーションを GNOME デスクトップに追加する
adding applications
アプリケーションを GNOME デスクトップに追加する手順は次のとおりです:
アプリケーションのメニュー項目を追加する (メニュー項目をメニューに追加する方法について詳細は「
アプリケーションのアイコンを
もしアプリケーションに新しい MIME 型が必要ならば、ソース XML ファイルを MIME 型のデータベースに追加する (詳細は「
もしアプリケーションに新しい MIME 型が必要ならば、その MIME 型のアイコンを
アプリケーションと MIME 型を関連付ける時は
スクリーンセーバーの設定
この章ではスクリーンセーバーを設定する方法について説明します。さらに、スクリーンセーバーを利用できるように表示を変更する方法についても説明します。
スクリーンセーバーについて
screensavers
gnome-screensaver
「
スクリーンセーバーの設定を指定する
setting preferences
スクリーンセーバーの設定はすべて
スクリーンセーバーの設定を変更する際、ユーザは
さらに、ユーザは
すべてのユーザに対してデフォルトの設定とポリシーを指定したいのであれば、デフォルトの GConf 設定ソースの中にあるスクリーンセーバー用の項目を編集してください。
すべてユーザに対してなんらかの設定とポリシーを強制したいのであれば、変更不可の GConf 設定ソースの中にあるスクリーンセーバー用の項目を編集してください。
スクリーンセーバーのテーマを変更する
modifying screensaver themes
スクリーンセーバーのアプリケーションを利用すると、ユーザは一つ以上の
新しいスクリーンセーバーのテーマを追加する時は

テーマを簡単にカスタマイズできる (テーマを利用可能な状態にカスタマイズするのにたくさんのファイルを変更する必要がなく、アプリケーションを変更したりファイルを移動する必要もない)
テーマを簡単にインストールできる (テーマをインストールするのにシステム情報を提供する必要がない)
ユーザがテーマを変更できないようにすることも可能である
詳細は「
セッションの管理
この章ではセッションの管理について紹介し、セッション・デフォルトを指定する方法を説明します。加えて、セッションとログイン・スクリプトに関する情報も紹介します。
セッションについて
sessions
セッションは、ユーザが GNOME デスクトップにログインしてからユーザがログアウトするまでの間に発生するものです。
少なくとも、セッションの中で次に示すアプリケーションが起動されます:
セッション・マネージャである

GNOME デスクトップでパネルとして使用する

セッション・デフォルトを指定する
setting defaults
デフォルトのセッション情報を格納するファイルを次の表に示します:
ファイル
/usr/share/gnome/default.session
デフォルト・セッションのファイル (このファイルの中にデフォルトのセッション情報の詳細が保管されている)
$HOME/.gnome2/session
ユーザ専用のセッション・ファイル (ユーザがセッションを編集すると、その詳細がこのファイルの中に保管される)
すべてのユーザに対してデフォルトのセッションの詳細を指定する際は、デフォルト・セッションのファイルを編集してください。
すべてのユーザに対してデフォルト・セッションの設定に戻す際は、ユーザ専用のセッション・ファイルを削除してください。すると、ユーザ専用のセッション・ファイルが存在しない場合、
現在実行中のセッションをデフォルト・セッションとして保存する際は
ヘルプ・システム
この章では GNOME デスクトップのヘルプ・システムについて説明します。
ヘルプ・システムについて
online Help
ヘルプ
GNOME デスクトップは
ヘルプのソース・ドキュメントは XML 形式のファイルです。XML ファイルは DocBook XML Version 4.1.2 という文書型定義 (DTD) で記述されています。DocBook XML ファイルは、
http://www.oasis-open.org/docbook/xml
ヘルプ・システムは
OMF ファイル
.omf files
OMF files
マニュアル毎に用意されている XML ファイルは一個の OMF ファイルに関連づけられています。この OMF ファイルにはヘルプ・ブラウザによって使用されるマニュアルの構成などの情報が記述されています。OMF ファイルの拡張子は
アプリケーションをインストールする場合、その過程で OMF ファイルを専用のフォルダにインストールするようにしてください。ヘルプのドキュメントがインストールした OMF ファイルに関連づけられていると、ヘルプ・ブラウザの中にヘルプのドキュメントが表示されるようになります。
OMF ファイルには、次に示すようなヘルプのドキュメントに関する情報が記述されています:
ヘルプ・ドキュメントに対する XML ファイルの所在 (パス名)
ヘルプのドキュメントのタイトル
ヘルプのドキュメントが属すサブジェクトのカテゴリ
OMF ファイルの作成方法について詳細は「
ScrollKeeper のカタログ作成システム
ScrollKeeper cataloging system


OMF_DIR=/usr/share/omf:/usr/local/share/omf:/opt/gnome2/share/omf:/opt/kde/omf

カテゴリの階層は

ヘルプ・ドキュメントの XML ファイルを別の場所に移動したら、OMF ファイルに記述した場所も同様に更新する必要があります。
パフォーマンスの改善
この章では GNOME デスクトップのパフォーマンスを改善する方法について説明します。
パフォーマンスの改善について
performance, improving
この章では、GNOME デスクトップのパフォーマンスを改善するために変更することが可能な設定項目を紹介します。
さらに
CPU の使用率を減らす
reducing CPU usage
reducing
CPU usage
このセクションでは、GNOME デスクトップで CPU 使用率を低減させたい場合に指定することが可能な設定項目について説明します。
少ない CPU リソースでまかなえるテーマ・オプションを使う
and CPU usage
ウィンドウの境界に影響するテーマ・オプションの中には、フレームそのものの画像をファイルとして直接読み込むものがあります。それ以外のテーマ・オプションはそれよりも簡単な方法でウィンドウのフレームを描画しています。

Atlanta
Esco
次のテーマ・オプションも
AgingGorilla
Bright
Metabox
Metabox は HighContrastInverse のようにコントロール (インタフェースの部品) を反転させるオプションではうまく動作しません。コントロールを反転させるのであれば Atlanta というオプションを利用してみてください。

gconftool-2 \\
--type string \\
--set /apps/metacity/general/theme
例えば、Atlanta というテーマ・オプションを指定する場合のコマンドは次のようになります:
gconftool-2 \\
--type string \\
--set /apps/metacity/general/theme Atlanta
もしくは、

metacity-theme-viewer
例えば、Atlanta をプレビューしながらその描画パフォーマンスを計測する際のコマンドは次のとおりです:
metacity-theme-viewer Atlanta
メニューの中にアイコンを表示しないようにして CPU の使用率を減らす
icons, in menus
menu icons
turning off
メニュー項目の中にはその横にアイコンを表示するものがあります。この機能を無効にする際は、次のコマンドを実行します:
gconftool-2 \\
--type bool \\
--set /desktop/gnome/interface/menus_have_icons false
もしくは、
スプラッシュ・スクリーンを無効にして CPU の使用率を減らす
デフォルトでは、 ユーザがデスクトップにログインすると、スプラッシュ・スクリーンが表示されます。ログイン処理を行っている間、アイコンがスプラッシュ・スクリーン上に表示されます。このスプラッシュ・スクリーンを無効にして、ログイン時の CPU 使用率を低減させることが可能です。

gconftool-2 \\
--type bool \\
--set /apps/gnome-session/options/show_splash_screen false
もしくは、
パネルのアニメーションを無効にすることで CPU の使用率を減らす
animation, turning off
ユーザがパネルを表示したり隠したりする際に、アニメーション効果を付与することが可能になっています。この効果を無効にする際は、次のコマンドを実行します:
gconftool-2 \\
--type bool \\
--set /apps/panel/global/enable_animations false
もしくは、
ファイル・マネージャのパフォーマンスを改善する
Nautilus
file manager

パフォーマンスの設定を変更する
modifying performance preferences
ファイル・マネージャにはパフォーマンスに関連する設定があります。パフォーマンスの設定はそれぞれ三つの値から一つ選択できるようになっています。これらの値の意味を次の表に記します:
値
常に (
ローカルにあるファイルと他のファイルシステム上にあるファイルの両方に対して指定した操作を実行する
ローカルのみ (
ローカルのファイルシステム上にあるファイルに対してのみ指定した操作を実行する (この設定にすると CPU の使用率が減る)
しない (
指定した操作を実行しない (この設定にすると CPU の使用率とネットワークのトラフィックが減る)
次の表はファイル・マネージャのパフォーマンス設定について説明しています。CPU の使用率を低減させたいのであれば、設定値を「
設定項目
show_icon_text
アイコン表示の時にテキスト・ファイルの中身をプレビューするかどうかを指定する; テキスト・ファイルの中身をプレビューしない場合は次のコマンドを実行する:
gconftool-2 \\
--type string \\
--set /apps/nautilus/preferences/show_icon_text never
もしくは、次の手順でも同様の効果を得られる:
ファイル・マネージャのウィンドウから

show_directory_item_counts
フォルダの中にあるアイテム総数を表示するかどうかを指定する; フォルダの中にあるアイテムの総数を表示しない場合は次のコマンドを実行する:
gconftool-2 \\
--type string \\
--set /apps/nautilus/preferences/show_directory_item_counts never

show_image_thumbnails
画像ファイルのサムネイルを表示するかどうかを指定する; サムネイルを表示しない場合は次のコマンドを実行する:
gconftool-2 \\
--type string \\
--set /apps/nautilus/preferences/show_image_thumbnails never

preview_sound
サウンド・ファイルを演奏するかどうかを指定する; サウンド・ファイルを演奏しない場合は次のコマンドを実行する:
gconftool-2 \\
--type string \\
--set /apps/nautilus/preferences/preview_sound never

サイド・ペインやツールバー、場所バーを無効にする
side pane, turning off
ファイル・マネージャにはサイド・ペインやツールバーを表示しないようにする設定があります。ファイル・マネージャのパフォーマンスを改善する際は、サイド・ペインやツールバーを無効にしてみてください。
サイドペインを無効にする際は、次のコマンドを実行します:
gconftool-2 \\
--type bool \\
--set /apps/nautilus/preferences/start_with_sidebar false

gconftool-2 \\
--type bool \\
--set /apps/nautilus/preferences/start_with_toolbar false
さらに場所バーも無効にすることができます。無効にした後に必要であれば、

gconftool-2 \\
--type bool \\
--set /apps/nautilus/preferences/start_with_location_bar false
デスクトップを無効にする
desktop, turning off
desktop
ファイル・マネージャには
デスクトップの背景で使用するパターンや色をファイル・マネージャから変更できなくなる

以上を承知の上でデスクトップを無効にする際は、次のコマンドを実行します:
gconftool-2 \\
--type bool \\
--set /apps/nautilus/preferences/show_desktop false
Ｘウィンドウ・システムのネットワーク・トラフィックを減らす
X Window System network traffic
X Window System network traffic, reducing
network traffic, reducing
このセクションでは、GNOME デスクトップにおけるＸウィンドウ・システムのネットワーク・トラフィック (通信量) を低減させたい場合に指定することが可能な設定項目について説明します。
少ないネットワーク・トラフィックでまかなえるテーマ・オプションを使う
and network traffic
リモート表示する際のＸプロトコルは、特定の範囲にあるピクセルがすべて同じ色であるならば、それらのピクセルを一個一個転送するようなことはしません。
そのため、Ｘウィンドウ・システムのネットワーク・トラフィックを低減させたいのであれば、複数の色ではなく単ー色を使用しているウィンドウ・フレームのテーマ・オプションを選択してみてください。具体的には次のようなオプションのいずれかを選択してみてください:
テーマ・オプションの変更方法について詳細は「
メニューの中にアイコンを表示しないようにしてネットワーク・トラフィックを減らす
メニュー項目の中にはその横にアイコンを表示するものがあります。もしそのアイコンが別のファイルシステム上に格納されていると、このアイコン表示の機能によってＸウィンドウ・システムのネットワーク・トラフィックが増大する可能性があります。さらに、リモート・ホスト上にパネルを表示する際に、Ｘウィンドウ・システムのネットワーク・トラフィックを増大させる可能性もあります。
この機能を無効にする方法について詳細は「
使用する色数を減らして表示の品質を改善する
color usage
display quality, improving
現在あるコンピュータ・システムの多くは 24ビット色、すなわち 16,777,216色をサポートしています。しかしながら、依然として 8ビット色、すなわち 256色をサポートしているシステムを利用しているユーザもたくさんいます。
GNOME デスクトップでは「
次に示す表示上の問題が 8ビット色をサポートするシステムで発生する可能性があります:
ウィンドウやアイコン、そして背景の画像などが粗く表示される場合があります。テーマや背景の画像、アイコンの多くは Websafe カラー・パレットにはない色を使っています。パレットに存在しない色は限りなく等価な色またはディザ法で近似した色で置き換えられます。このように色を置き換えることで見映えが粗くなってしまうのです。
Websafe カラー・パレットを利用しないアプリケーションでは利用できる色数が少ないため、色に関するエラーが発生する場合があります。アプリケーションのユーザ・インタフェースで正しく色が表示されない場合があります。アプリケーションが色を確保できない場合、アプリケーション自身がクラッシュするものもあります。
Websafe カラー・パレットを利用しているアプリケーションと利用していないアプリケーションとをユーザが切り替えようとすると、色のちらつきが発生する場合があります。Websafe カラー・パレットを利用していないアプリケーションでは独自のカラー・マップを使用しているかもしれません。独自のカラー・マップを使用すると、他のビジュアルなコンポーネントに色が表れず全く何も表示されなくなってしまう場合もあります。
次のセクションでは 8ビット色をサポートするコンピュータで GNOME デスクトップの外観を最適化する方法について説明します。
Websafe カラー・パレットを利用しているテーマ・オプションを使う
and color usage
ウィンドウ・フレームのテーマ・オプションの中には Websafe カラー・パレットの色を利用するものがあります。
メニューの中にアイコンを表示しないようにして使用する色数を減らす
メニュー項目の中にはその横にアイコンを表示するものがあります。もしアイコンに含まれている色が Websafe カラー・パレットのものでない場合、この機能によって使用する色数が増える場合があります。
スプラッシュ・スクリーンを無効にして使用する色数を減らす
スプラッシュ・スクリーンを無効にすることで GNOME デスクトップとそのアプリケーションで利用する色数を増やすことができます。
スプラッシュ・スクリーンを無効にする方法について詳細は「
背景に単一色を指定することで使用する色数を減らす
using solid color
デスクトップの背景に単一色を指定します。１個しか色を利用しないので GNOME デスクトップで使用する色数が減ることになります。
背景に単一色を指定する際は、次のコマンドを実行します:
gconftool-2 \\
--type string \\
--set /desktop/gnome/background/picture_options none
gconftool-2 \\
--type string \\
--set /desktop/gnome/background/color_shading_type solid
16進表記の色
gconftool-2 \\
--type string \\
--set /desktop/gnome/background/primary_color #
もしくは、
GNOME デスクトップ機能の無効化
この章では GNOME デスクトップが提供している特定の機能を使えなくする方法について説明します。
GNOME デスクトップ機能の無効化について
disabling features
lockdown
GNOME デスクトップでは、ある特定の機能にアクセスすることを制限するための方法が提供されています。特定の機能を無効にするのは、システム管理者としてあなたのコンピュータに対する操作を制限させたいような場合に便利です。例えば、どこかの展示会で不特定多数のユーザによって操作される可能性があるデモ・マシンで、コマンドラインによる操作を無効にしたい場合などです。このように特定の機能を無効にすることを、「機能を

手動でロックダウンを指定する
画面のロックとログアウトを無効にする
lock screen
log out
画面のロックとログアウトの機能を無効にする時は
画面のロックとログアウトの機能を無効にすると、次に示すアイテムが表示されなくなります:



加えて、パネル上にある
コマンドライン操作を無効にする
command line
コマンドラインからの操作を無効にする時は
コマンドラインの操作を無効にすると、次に示すような変更がユーザ・インタフェースの中で発生します:

メイン・メニュー


加えて、パネル上にある
コマンドラインを無効にする場合は、

/usr/bin/xterm
/usr/bin/setterm
メニュー項目が次のメニューから削除されます:
パネルへ追加
メニューから起動する
さらに、
パネルの設定を変更できないようにする
panel configuration
パネルの設定を変更できないようにする時は
パネルの設定を変更できないようにすると、次に示すような変更がユーザ・インタフェースの中で発生します:
パネルのポップアップ・メニューや引き出しのポップアップ・メニューから、次に示すメニュー項目が表示されなくなります:
このパネルを削除する
プロパティ
新しいパネル
ランチャ毎のポップアップ・メニューが利用できなくなります
アプレット毎のポップアップ・メニューから次のメニュー項目が表示されなくなります:
パネルから削除
ロックする
移動

ランチャのドラッグは利用できなくなります (ランチャをドラッグして何かしたり、ドラッグしたものを何かすることがすべてできなくなります)
パネルのドラッグは利用できなくなります (パネルをドラッグして別の場所に移動することはできなくなります)
ロックダウン・エディタについて
GNOME 2.14 から
始めてみる
ロックダウン・エディタの起動方法は次のいずれかです:
メイン・メニューの
端末から
すると、いろいろなタブを持ったウィンドウが表示されます。これらのタブを使って、無効にすることが可能なデスクトップの設定をそれぞれ分類しています。次のセクションではそれぞれのタブについて説明し、無効にすることが可能な設定について概要を紹介します。
機能を無効にする
ある設定を利用できないようにする場合、説明の横にあるチェックボックスがチェックされているか確認してください。ほとんどの設定はすぐに変更が反映されますが、中にはアプリケーションの再起動が必要なものもあります。

次のセクションでは、カテゴリ毎に無効にすることが可能な設定を簡単に説明します。
お使いのシステムによってはパッケージのインストール状況に応じ、ここで説明するカテゴリが存在しない場合もあります。
全般
コマンドラインを無効にする
ユーザが端末にアクセスしたり指定したコマンドを実行できないようにする (例えば、パネルにある
印刷を無効にする
印刷できないようにする (例えば、すべてのアプリケーションが提供する
印刷設定を無効にする
印刷設定を変更できないようにする (例えば、すべてのアプリケーションが提供する
ディスクへの保存を無効にする
ファイルをディスクに保存できないようにする (例えば、すべてのアプリケーションが提供する
パネル
パネル操作を利用不可にする
チェックすると、パネルに対するいかなる変更も受け入れられなくなるが、パネルの上にあるアプレットはそれぞれロックダウンしてやる必要がある (パネルの再起動が必要である)
強制終了を無効にする
チェックすると、ユーザはアプリケーションを強制的に終了させることができなくなる (
画面のロックを無効にする
チェックすると、ユーザは画面をロックさせることができなくなる (
ログアウトを無効にする
チェックすると、ユーザはログアウトできなくなる (
Epiphany ウェブ・ブラウザ
終了を無効にする
Epiphany ウェブ・ブラウザを閉じることができなくなる
URL の入力を無効にする
URL を入力する機能を利用できなくなる
ブックマークの編集を無効にする
ブックマークを追加したり編集できなくなる
履歴の操作を無効にする
履歴情報のすべてにアクセスできなくする (
JavaScript 処理を無効にする
ウィンドウ Chrome を介した JavaScript の制御が利用できなくなる
ツールバーの編集を無効にする
ツールバーを編集できなくなる
強制的にフルスクリーン・モードにする
フルスクリーン・モードに固定してしまう
メニューバーを隠す
デフォルトでメニューバーを表示しない (
安全ではないプロトコルを無効にする
危険なプロトコルからの読み込みを無効にする (安全なプロトコルとは
GNOME スクリーンセーバー
起動時に画面をロックする
チェックすると、スクリーンセーバーを起動すると画面をロックする
ログアウトを許可する
チェックすると遅延ログアウトするためのダイアログを表示するオプションを追加する (遅延時間は
ユーザの切り替えを許可する
チェックすると、別のユーザ・アカウントに切り替えるためのダイアログを表示するオプションを追加する
隠しフォルダの一覧
この章では、GNOME デスクトップがユーザのホームに追加する隠しフォルダについて説明します。
hidden directories
.* directories
隠しフォルダとはその名前がピリオド (
ユーザのホームにある隠しフォルダの一覧
フォルダ名
.config
環境変数の
.fonts
ユーザ専用のフォントを格納する場所 (フォントを Nautilus から
.esd_auth
GNOME のサウンド・デーモンに対する認証クッキーを格納する場所 (GNOME のサウンド・デーモンは
注意: これはフォルダではなく、ファイルである
.gconf

.gconfd
次に示す
設定情報
任意の
任意の IOR が参照しているオブジェクトの状態
.gnome

注意: このフォルダは廃止でかつ GNOME 1.x のアプリケーションのみが使用する
.gnome2

キーボード・ショートカットの情報
ウィンドウを配置する場所
パネルのランチャを表す
さらに、このフォルダにはアプリケーション専用のデータを格納するためのサブ・フォルダがいくつか含まれている
.gnome2-private
このフォルダは無視すること (現在のところ、このフォルダには何の機能もない)
.local/share
環境変数の
.metacity

.nautilus
ファイル・マネージャのユーザ専用データを格納する場所で、例えば次のような情報を保管する:
ユーザが作業したフォルダのメタデータ
ユーザが追加した

.themes
テーマ・オプションやウィンドウ・フレーム、またはアイコンなどのユーザ向けテーマ・オプションを保管する場所 (ユーザは
.thumbnails
ユーザ専用の画像のサムネイルを格納する場所で、画像のサムネイルはファイル・マネージャで使用する (ちなみに、ファイル・マネージャはこのサムネイルを生成しないように制限する設定も提供している)
SMB プリンタを設定する際のセキュリティ上の注意事項
この章では、Windows ネットワーク共有で使用するプリンタの設定においてセキュリティに関連する注意事項を説明します。
Samba
SMB
Windows network shares
configuring printers
Windows のネットワーク共有は Samba または
印刷キューに対するユーザ名とパスワードは
重大なセキュリティ侵害の可能性からくるインパクトを減らすには、これらのユーザ名とパスワードを印刷キューのためだけに利用するということを保証しなければなりません。これにより、認証していない印刷キューの使用を制限すると同時にセキュリティ情報の漏洩を未然に防ぐということにもつながります。
用語の解説
.desktop

.directory
.omf
アプリケーション・レジストリ
アプリケーション・レジストリとは、アプリケーションを登録するいろいろなデスクトップ・エントリのファイルの集合です。GNOME デスクトップで、このアプリケーション・レジストリが保管されている場所は
デスクトップ・エントリのファイル
メニュー項目に相当する情報を提供するためのデータ・ファイルの一種です。デスクトップ・エントリのファイルには、メニュー項目として表示する名前や実行するコマンド、メニュー項目に表示するアイコンなどのような詳細情報を指定します。このファイルの拡張子は
ディレクトリ・エントリのファイル
メニューに相当する情報を提供するためのデータ・ファイルの一種です。ディレクトリ・エントリのファイルには、メニューとして表示する名前やツールチップの説明、メニューに表示するアイコンなどのような詳細情報を指定します。このファイルの拡張子は
GConf の設定ソース

GConf の設定キー

GConf のパス・ファイル
いろいろな
GConf スキーマ
スキーマ・キーとスキーマ・オブジェクトに対する総称です。
GConf のスキーマの定義ファイル

GConf スキーマ・キー
設定キー毎にスキーマ・オブジェクトを格納する際に使用するキーです。例えば、
GConf スキーマ・オブジェクト

Glob パターン
Glob パターンは特殊な文字 (
IOR

マジック・ルール
マジック・ルールは、任意のファイルの先頭に何が格納されているか (文字列だったりバイナリ・データだったり) を指定することによって MIME 型を定義するものです。このデータを検索するためのオフセットをマジック・ルールの中で定義しておきます。
メニューの定義ファイルは GNOME のメニューバーの中で使用するメニューの階層構造を定義したものです。
MIME

MIME 型のソース XML ファイル
MIME 型のソース XML ファイルは、いろいろな種類のファイルに対してどのように MIME 型を解決するかを定義したものです。MIME 型を解決する方法が三つあります: ファイルの拡張子を調べる方法 (Glob パターン)、マジック・ルールを使う方法、そして XML の名前空間を利用する方法です。MIME 型のソース XML ファイルは
MIME 型
MIME 型はファイルの形式を明らかにするものです。MIME 型を使うと、アプリケーションはファイルを読むことができます (MIME 型から、どのようにファイルを読めばよいかが分かるので)。例えば、メール・クライアントは
MIME 型のデータベース
MIME 型のデータベースは、デスクトップ環境に応じていろいろな MIME 型を登録するファイルの集合です。MIME 型のデータベースが格納されている場所は
OMF ファイル

PAM

スクリーンセーバー
スクリーンセーバーは、モニタの画面が使用されなくなったらそれを何か別の画像で置きかえるアプリケーションです。GNOME デスクトップにおけるスクリーンセーバー・アプリケーションは
スクリーンセーバーのディスプレイ
スクリーンセーバーのディスプレイは、モニタの画面が使用されなくなったらユーザの画面に何か別の画像を表示するアプリケーションです。
UDP

URI

Websafe カラー・パレット
Websafe カラー・パレットは 216 色からなる汎用的な目的で使用するパレットです。このカラー・パレットは 8ビット色をサポートしているようなシステムで最適な色を利用するために設計されたものです。このカラー・パレットは
相花毅 <takeshi\.aihana\@gmail\.com>, 2008
松澤 二郎 <matsuzawa\.jr\@gmail\.com>, 2010
